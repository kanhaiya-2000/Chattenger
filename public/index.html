
<!--
//  The code was originally in its minified form but was then beautified ....
//  You can take actual minified code from the following link 
//  view-source:https://chattenger.herokuapp.com
// API keys here may or may not work in your case
// Take your own api key from official site of giphy , tenor,imgur and RapidAPI
    -->

<!DOCTYPE html>
<html lang='en'>
    <head>
        <title>Chattenger</title>
        <meta name="viewport" id="content" content="width=device-width,initial-scale=1.0,user-scalable=no" />
        <meta name="og:image" content="https://kkleap.github.io/assets/chattenger_icon.webp" />
        <meta name="og:title" content="Chattenger:web app" />
        <meta name="description" content="Go to https://github.com/kanhaiya-2000/Chattenger/blob/master/README.md to get info about this project" />
        <link rel="preload" as="image" href="https://kkleap.github.io/assets/spinner2.gif" />
        <base href="." />
        <meta charset="utf-8" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
        <link href="main_font.css" rel="stylesheet" type="text/css" />
        <link href="https://fonts.googleapis.com/css2?family=Fjalla+One&display=swap" rel="stylesheet" />
        <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@500&display=swap" rel="stylesheet" />
        <link href="https://fonts.googleapis.com/css2?family=Vollkorn:ital,wght@1,600&display=swap" rel="stylesheet" />
        <link id="favicon" type="image/webp" rel="icon" href="https://kkleap.github.io/assets/chattenger_icon.webp" sizes="32x32" />
        <script type="text/javascript" src="jquery.js"></script>
        <script type="text/javascript" src="/socket.io/socket.io.js"></script>
        <style>
            * {
                outline: none;
                font-family: "chattenger";
                font-size: 1em;
            }
            input {
                border: none;
                border-radius: 14px;
                height: 2.1em;
                margin: auto;
                width: 400px;
            }
            input[type="file"] {
                display: none;
            }
            body,
            html {
                zoom: 100%;
            }
            input:focus,
            select:focus,
            option:hover,
            i:focus {
                border: none;
                outline: none;
            }
            ::-webkit-scrollbar {
                display: none;
            }
            .messagemain i {
                font-size: 0.98em;
            }
            .messagemain img,
            .messagemain video {
                background: white;
                outline: none;
                transform: scale(1, 1);
                width: 100%;
            }
            .messagemain audio {
                outline: none;
            }
            #custom-div div {
                padding: 6px 10px;
            }
            @keyframes sz {
                0% {
                    transform: scale(0.1) rotate(90deg);
                }
                10% {
                    transform: scale(0.18) rotate(120deg);
                }
                14% {
                    transform: scale(0.18) rotate(180deg);
                }
                18% {
                    transform: scale(0.18) rotate(240deg);
                }
                22% {
                    transform: scale(0.18) rotate(360deg);
                }
                25% {
                    transform: scale(0.25) rotate(65deg);
                }
                50% {
                    transform: scale(0.5) rotate(40deg);
                }
                70% {
                    transform: scale(0.7) rotate(20deg);
                }
                90% {
                    transform: scale(1) rotate(0deg);
                }
            }
            html {
                background-attachment: fixed;
                margin: 0;
                padding: 0;
                background-image: url(https://kkleap.github.io/assets/smoothbg.jpg);
                background-repeat: no-repeat;
                background-size: 100vw 100vh;
                height: 100%;
                overflow: hidden;
            }
            @keyframes s {
                10% {
                    transform: scale(1.2);
                }
                50% {
                    transform: scale(1.3);
                }
                80% {
                    transform: scale(1.1);
                }
            }
            #allgif span,
            #allstickers span {
                background-image: url("https://kkleap.github.io/assets/spinner.gif");
                background-repeat: no-repeat;
                background-size: 100% 100%;
                height: 130px;
                max-width: 200px;
                min-width: 150px;
                width: 49.5%;
            }
            #emogi input {
                background: #9db526;
            }
            #allgif img,
            #allstickers img {
                width: 100%;
                height: 130px;
                background: white;
            }
            #giveReport a:hover {
                color: white;
            }
            @media (max-width: 700px) {
                #controls,
                #controls2 {
                    position: absolute;
                    top: 10px;
                }
            }
            .loading-modal {
                display: none;
            }
            #allgif,
            #allstickers,
            #allemogies,
            #emogi {
                min-height: 200px;
                scrollbar-width: thin;
            }
            #showaudioconnection {
                scrollbar-width: none;
            }
            #allemogies div {
                font-size: 1.5em;
            }
            body {
                height: 100%;
                margin: 0;
                padding: 0;
                overflow-y: scroll;
            }
            #selectedfavicon {
                background: green;
                z-index: 3;
            }
            body,
            #message-container,
            #whole,
            #adminsection {
                overflow: hidden;
                scrollbar-width: thin;
            }
            #adminsection {
                align-items: center;
                max-height: 200px;
                overflow-y: auto;
                color: white;
                background: black;
                scrollbar-width: none;
                text-align: center;
                width: 200px;
                font-weight: bold;
            }
            #adminsection i {
                color: red;
                font-weight: bold;
            }
            #moreoptions {
                animation: f 0.6s;
                display: flex;
                flex-direction: column;
                flex-wrap: wrap;
            }
            #moreoptions span {
                cursor: pointer;
                font-family: sans-serif;
                font-size: 1.1em;
                margin: 0px;
                padding: 5px;
                transition: 0.5s;
                width: 160px;
            }
            #moreoptions span:hover {
                background: green;
                color: black;
            }
            #whole {
                background-color: rgb(42, 31, 31);
                background-image: url(https://kkleap.github.io/assets/bg3.jpg);
                background-repeat: no-repeat;
                display: flex;
                flex-wrap: wrap;
                height: 100vh;
                scrollbar-width: none;
                width: 600px;
                -webkit-touch-callout: none;
                -webkit-user-select: none;
                -khtml-user-select: none;
                -moz-user-select: none;
                -ms-user-select: none;
                user-select: none;
            }
            button {
                border-radius: 50%;
                outline: none;
                font-size: 1.5em;
                width: 40px;
            }
            #error-container {
                background: rgba(0, 0, 0, 0.22);
                font-weight: bold;
                margin: auto;
                overflow: hidden;
                padding: 8px;
                width: 330px;
                border-radius: 20px;
            }
            #message {
                border-radius: 18px;
                font-size: 18px;
                height: 100%;
                margin: 0;
                min-width: 70%;
            }
            .info {
                border-radius: 8px;
                clear: both;
                cursor: pointer;
                font-size: 0.8em;
                margin-bottom: 2px;
                margin-top: 2px;
                max-width: 200px;
                padding: 5px;
                word-wrap: break-word;
                z-index: -1;
            }
            #msg-sender {
                background: transparent;
                border-radius: 20px;
                bottom: 2px;
                display: flex;
                flex-wrap: nowrap;
                height: 35px;
                justify-content: space-between;
                margin-bottom: 0;
                position: sticky;
                width: 100%;
            }
            #msg-sender i,
            #sendbtn {
                align-self: center;
                background: black;
                border-radius: 50%;
                font-size: 2.1em;
                margin-left: 3px;
                margin-right: 3px;
                padding: 6px;
            }
            #sendbtn {
                padding: 0px;
            }
            .messages:last-child {
                animation: f 1s;
            }
            .messages {
                font-size: 1em;
                margin-top: 4px;
            }
            a {
                background: black;
                color: red;
            }
            a:hover {
                background: white;
                color: green;
            }
            #head {
                background: rgb(78, 78, 78);
                display: flex;
                flex-direction: row-reverse;
                height: 30px;
                margin-bottom: 4px;
                padding: 6px;
                position: sticky;
                width: 100%;
                z-index: 300;
            }
            #head i {
                cursor: pointer;
                font-size: 1.4em;
                font-weight: bold;
                margin: 5px;
                margin-bottom: 0;
                margin-top: 0;
                transition: 0.9s;
            }
            i {
                cursor: pointer;
            }
            #replytomsg {
                max-width: 600px;
                bottom: 37px;
            }
            #webcam {
                top: 50px;
                max-width: 500px;
                z-index: 5000;
                position: fixed;
            }
            #stylingtools,
            #Adv_toggler_menu {
                max-height: 200px;
                overflow: auto;
            }
            #head i :hover {
                background: grey;
            }
            @keyframes sp {
                10% {
                    background-image: radial-gradient(white 3%, green 80%, black);
                }
                30% {
                    background-image: radial-gradient(black 3%, white 30%, red 50%, green);
                }
                70% {
                    background-image: radial-gradient(red 3%, green 10%, yellow 10%, black 17%, red 30%, black);
                }
            }
            @keyframes f {
                0% {
                    border-radius: 50%;
                    opacity: 0.2;
                    overflow: hidden;
                    transform: scale(0.1, 0.1);
                }
                90% {
                    border-radius: 10%;
                    opacity: 0.9;
                    overflow: hidden;
                    transform: scale(1, 1);
                }
            }
            #emogi {
                background: black;
                display: none;
                height: 300px;
                max-height: 300px;
                max-width: 400px;
                scrollbar-width: thin;
                z-index: 300;
            }
            #emogi div {
                cursor: pointer;
            }
            @keyframes op {
                0% {
                    opacity: 1;
                }
                100% {
                    opacity: 0;
                }
            }
            #message-container {
                margin: auto;
                overflow: auto;
                overflow: -moz-scrollbars-none;
                overflow-x: hidden;
                overflow-y: scroll;
                padding: 2px 5px;
                padding-left: 10px;
                padding-right: 10px;
                position: sticky;
                width: 588px;
            }
            #emogi div i {
                color: #14e314;
                font-weight: bold;
            }
            select {
                cursor: pointer;
                width: 13px;
            }
            #srch {
                height: 25px;
                max-width: 150px;
                margin-right: 0;
                margin-top: 0;
                transition: width 0.4s ease-in-out;
                z-index: 400;
            }
            #srch:focus {
                max-width: 208px;
            }
            option {
                background: white;
                font-size: 1em;
                margin: 1px;
                padding: 5px;
                width: 100px;
                z-index: 20;
            }
            #videocallingpage,
            #voicecallingpage {
                background-color: black;
                background-repeat: no-repeat;
                background-size: 100% 100%;
                display: none;
                height: 100vh;
                width: 100vw;
            }
            #videocontainer {
                bottom: 10px;
                display: flex;
                flex-wrap: nowrap;
                height: 100px;
                justify-content: flex-end;
                position: fixed;
                overflow-x: auto;
                width: 100%;
                z-index: 4;
                scrollbar-width: none;
            }
            #videocontainer video {
                height: 100px;
                filter: sepia(0) saturate(1.5) contrast(1.15) grayscale(0.1) brightness(0.9);
            }
            .large {
                top: 0;
                filter: sepia(0) saturate(1.5) contrast(1.15) grayscale(0.1) brightness(0.9);
                max-height: 100%;
                max-width: 100%;
                position: fixed;
            }
            #login {
                max-width: 400px;
                padding-top: 30px;
            }
            #login1 {
                animation: f 1.3s;
                display: block;
            }
            #message {
                bottom: 10px;
                position: sticky;
                width: 85%;
            }
            #login2 {
                animation: f 1.3s;
                display: none;
            }
            #chatroom {
                height: 100vh;
                width: 100vw;
            }
            nav a {
                background: black;
                border: none;
                cursor: pointer;
                font-size: 0.7em;
                padding: 5px 10px;
                text-decoration: none;
                width: 40%;
                word-wrap: break-word;
            }
            nav a:active {
                background: blue;
                border: none;
                color: red;
            }
            nav a:hover {
                background: green;
                color: black;
            }
            video {
                border: 1px solid gray;
                transform: scale(-1, 1);
            }
            #controls,
            #controls2 {
                border-radius: 20px;
                height: 40px;
                scrollbar-width: thin;
            }
            #adminsection {
                position: sticky;
                right: 20px;
                top: 0px;
                width: 160px;
            }
            #stylingtools i {
                border-radius: 30%;
            }
            #wallpaperoption img {
                border-radius: 50%;
                background: url(https://kkleap.github.io/assets/spinner.gif) 37.5px 37.5px no-repeat;
                cursor: pointer;
                height: 37.5px;
                width: 37.5px;
            }
            #userlist {
                background: white;
                max-height: 200px;
                overflow-x: hidden;
                width: 130px;
                z-index: 200;
            }
            #userlist span {
                background: green;
                cursor: pointer;
                display: inline-block;
                width: 100%;
            }
            .activefilter {
                background: green;
            }
            #userlist span:hover {
                background: red;
                color: yellow;
            }
            @media (max-width: 700px) {
                #head {
                    padding-left: 5px;
                    padding-right: 10px;
                    position: fixed;
                    width: 97%;
                }
                #head i {
                    font-size: 1.5em;
                }
                #moreoptions span {
                    padding-left: 5px;
                    width: 160px;
                }
                input {
                    border: none;
                    border-radius: 14px;
                    height: 32px;
                    margin: auto;
                    width: 85%;
                }
                html {
                    overflow-y: scroll;
                }
                .messages {
                    box-shadow: none;
                }
                #msg-sender {
                    bottom: 2px;
                    display: flex;
                    flex-wrap: nowrap;
                    height: 40px;
                    margin-block-end: 1px;
                    margin-bottom: 0;
                    position: fixed;
                    width: 100%;
                }
                #message {
                    border-radius: 18px;
                    bottom: 0px;
                    height: 100%;
                    min-width: 30%;
                }
                #videoconatainer {
                    height: 60px;
                }
                .large {
                    bottom: 0;
                    min-height: 100%;
                    min-width: 100%;
                    position: fixed;
                    right: 0;
                }
                #msg-sender i {
                    color: red;
                    font-size: 1.9em;
                }
                #message-container {
                    overflow-y: auto;
                    position: absolute;
                    top: 44px;
                    width: 96vw;
                }
                .messagemain {
                    font-size: 1em;
                }
                #chatroom,
                #voicecallingpage,
                #videocallingpage {
                    bottom: 0;
                    height: 100%;
                    position: absolute;
                    right: 0;
                    width: 100vw;
                }
                #whole {
                    background-size: 100% 100%;
                    box-sizing: border-box;
                    display: flex;
                    height: 100%;
                }
                #whole {
                    width: 100vw;
                }
                #replytomsg {
                    max-width: 98%;
                    bottom: 42px;
                }
            }
        </style>
    </head>
    <body onbeforeunload="return 'sure to leave?'">
        <center>
            <img src="https://kkleap.github.io/assets/spinner.gif" width="1" height="1" id="spinnerbg" style="display: none;" crossorigin="anonymous" /><canvas id="expcanvas" style="display: none;"></canvas>
            <img src="https://kkleap.github.io/assets/spinner2.gif" width="1" height="1" id="spinnerbg2" style="display: none;" /><audio id="scbeep" src="https://kkleap.github.io/assets/beap.mp3" style="display: none;"></audio>
            <audio id="sctyping" src="https://kkleap.github.io/assets/typing.mp3" style="display: none;"></audio>
            <div id="login">
                <div style="padding: 12px; display: flex; justify-content: space-between;">
                    <div>
                        <span
                            style="font-size: 2em; color: #ff0b72; font-weight: bold; border-bottom: 10px solid black; cursor: pointer;"
                            id="signin"
                            onclick="$('#signup').css('border-bottom','0px');$(this).css('border-bottom','10px solid black');$('#login1').show();$('#login2').hide();$('#error-container').hide();"
                        >
                            Join
                        </span>
                    </div>
                    <div>
                        <span
                            style="font-size: 2em; color: #ff0b72; font-weight: bold; cursor: pointer;"
                            id="signup"
                            onclick="$('#signin').css('border-bottom','0px');$(this).css('border-bottom','10px solid black');$('#login2').show();$('#error-container').hide();$('#login1').hide();"
                        >
                            Create
                        </span>
                    </div>
                </div>
                <br />
                <div id="login1">
                    <br />
                    <span style="color: black; font-weight: bold; font-family: Dancing script; font-size: 1.46em;">Input credentials to continue with chattenger!</span><br />
                    <br />
                    <input style="border: 2px dotted grey;" id="name" type="text" name="name" value="" placeholder="Enter your name!" /><br />
                    <br />
                    <input style="border: 2px dotted grey;" id="roomid" type="text" name="roomid" value="" placeholder="Enter Room id!" /><br />
                    <br />
                    <input style="border: 2px dotted grey;" id="pwd" type="password" name="password" value="" placeholder="Enter password for room!" /><br />
                    <br />
                    <div style="display: flex; flex-wrap: nowrap; justify-content: space-around; max-width: 300px;">
                        <label for="profilechangeinput" title="set a profile pic" style="width: 40px; background: white; padding: 8px; height: 40px; border-radius: 50%;">
                            <i class="fa fa-user" style="font-size: 2em; background: white;"></i>
                        </label>
                        <button type="button" title="join now" name="button" onclick="setUsername()"><i class="fas fa-sign-in-alt" style="font-size: 2em; background: white;" aria-hidden="true"></i></button>
                    </div>
                </div>
                <div id="login2">
                    <br />
                    <span style="color: black; font-weight: bold; font-size: 1.46em; font-family: Dancing script;">Create your own personal chat-room!</span><br />
                    <br />
                    <form autocomplete="off" onsubmit="return false">
                        <input
                            style="border: 2px dotted grey;"
                            id="newname"
                            oninput="if($(this).val().trim()=='')$(this).css('border','red 2px solid'); else $(this).css('border','yellow 2px solid')"
                            type="text"
                            name="name2"
                            value=""
                            placeholder="Enter admin(your) name!"
                        />
                        <br />
                        <br />
                        <input
                            style="border: 2px dotted grey;"
                            id="newroomid"
                            oninput="if($(this).val().trim().length<4||$(this).val().trim().length>8)$(this).css('border','red 2px solid'); else $(this).css('border','green 2px solid')"
                            type="text"
                            name="roomid"
                            value=""
                            placeholder="Enter Room id!"
                        />
                        <br />
                        <br />
                        <input
                            style="border: 2px dotted grey;"
                            id="newpwd"
                            oninput="if($(this).val().trim().length<6||$(this).val().trim().length>20)$(this).css('border','red 2px solid'); else $(this).css('border','green 2px solid')"
                            type="password"
                            name="password"
                            value=""
                            placeholder="Enter password for your room!"
                        />
                        <br />
                        <br />
                        <input
                            style="border: 2px dotted grey;"
                            id="newpopulation"
                            oninput="if((Number($(this).val()))&&(Number($(this).val())>1)&&(Number($(this).val())==parseInt($(this).val())))$(this).css('border','green 2px solid'); else $(this).css('border','red 2px solid')"
                            type="number"
                            min="2"
                            name="userNumber"
                            value=""
                            placeholder="Maximum no. of users for this group!"
                        />
                        <br />
                        <br />
                        <input style="border: 2px dotted grey;" id="newadmincode" type="text" name="useradmincode" value="" placeholder="Enter security key!" /><br />
                        <details style="width: 200px; color: yellow; background: rgba(0, 0, 0, 0.5);">
                            <summary style="font-size: 1.4em; color: #0f0;">Get More info</summary> Admin key helps you to retrieve back your room if you accidently logged out of your room otherwise you cannot again login as admin.<br />
                            However ,you can login as normal user but you will login as admin iff you remember your key.
                        </details>
                        <br />
                        <br />
                        <div style="display: flex; flex-wrap: nowrap; justify-content: space-around; max-width: 300px;">
                            <label title="set a profile pic" for="profilechangeinput" style="width: 40px; background: white; padding: 8px; height: 40px; border-radius: 50%;">
                                <i class="fa fa-user" style="font-size: 2em; background: white;"></i>
                            </label>
                            <button type="button" name="button" onclick="setNewRoom()"><i class="fas fa-sign-in-alt" style="font-size: 2em; background: white;" aria-hidden="true" title="join now"></i></button>
                        </div>
                    </form>
                </div>
                <div id="error-container" style="color: red;">
                    <span style="color: white;">
                        Don't have credentials?<br />
                        Click create option <br />
                        to create your personal chat room
                    </span>
                </div>
            </div>
            <div>
                <div
                    id="Adv_toggler_menu"
                    style="animation: f 0.3s; width: 300px; background: black; position: fixed; font-family: monospace; bottom: 60px; z-index: 900; left: calc(50% - 150px); color: yellow; font-weight: bold; display: none;"
                >
                    <div style="display: flex; flex-wrap: nowrap; background: black; cursor: pointer; justify-content: space-between; color: green; position: sticky; top: 0px; z-index: 11;">
                        <span style="border-bottom: 5px solid red; width: 45%; cursor: pointer;" onclick="$(this).next().css('border','none');$(this).css('border-bottom','5px solid red');$('#Fav').show();$('#advmsg').hide();">
                            Interface
                        </span>
                        <span style="width: 45%; cursor: pointer;" onclick="$(this).prev().css('border','none');$(this).css('border-bottom','5px solid red');$('#Fav').hide();$('#advmsg').css('display','flex');">other</span>
                        <i class="fa fa-close" style="font-size: 1.8em; padding-right: 10px; color: red; font-weight: bold;" onclick="$(this).parent().parent().hide()"></i>
                    </div>
                    <div id="advmsg" style="display: none; flex-wrap: nowrap; justify-content: space-around; overflow: hidden;">
                        <div id="recordado" title="send voice message" onclick="$(this).hide();$('#recordingstuff').show();$('#photoedit').hide();" style="width: 140px; height: 100px; padding-top: 20px;">
                            <svg style="transform: scale(2.7, 2.7);" height="36px" width="36px" viewBox="0 0 36 36">
                                <g fill="none" fill-rule="evenodd">
                                    <g>
                                        <polygon points="0 36 36 36 36 0 0 0"></polygon>
                                        <path
                                            d="M14,28 L22,28 C22.552,28 23,28.448 23,29 C23,29.552 22.552,30 22,30 L14,30 C13.448,30 13,29.552 13,29 C13,28.448 13.448,28 14,28 M18,22.5 C15.239,22.5 13,20.2615 13,17.5 L13,11 C13,8.2385 15.239,6 18,6 C20.761,6 23,8.2385 23,11 L23,17.5 C23,20.2615 20.761,22.5 18,22.5 M18,26.5 C13.0295,26.5 9,22.4705 9,17.5 C9,16.948 9.448,16.5 10,16.5 C10.552,16.5 11,16.948 11,17.5 C11,21.366 14.134,24.5 18,24.5 C21.866,24.5 25.0005,21.366 25.0005,17.5 L25,17.5 C25,16.948 25.448,16.5 26,16.5 C26.552,16.5 27,16.948 27,17.5 C27,22.4705 22.9705,26.5 18,26.5"
                                            fill="#0099ff"
                                        ></path>
                                    </g>
                                </g>
                            </svg>
                        </div>
                        <div style="width: 140px; height: 100px; padding-top: 20px;" title="edit a photo" id="photoedit" onclick="$('#webcam').show();$('#Adv_toggler_menu').hide()">
                            <svg style="transform: scale(2.5, 2.7);" height="36px" width="36px" viewBox="0 0 36 36">
                                <g fill="none" fill-rule="evenodd">
                                    <g>
                                        <polygon points="0 36 36 36 36 0 0 0"></polygon>
                                        <path
                                            d="M18.01125,23.50245 C15.52875,23.50745 13.51225,21.49495 13.50775,19.00845 C13.50275,16.52145 15.51175,14.50195 17.99425,14.49695 C20.47675,14.49245 22.49325,16.50445 22.49775,18.99145 C22.50225,21.47795 20.49375,23.49745 18.01125,23.50245 M17.99825,12.49945 C14.40825,12.50695 11.50325,15.42245 11.51025,19.01245 C11.51675,22.60195 14.43275,25.50695 18.02275,25.49995 C21.61275,25.49295 24.51775,22.57745 24.51125,18.98795 C24.50425,15.39745 21.58825,12.49295 17.99825,12.49945 M26.50025,28.99995 L9.50025,28.99995 C7.29125,28.99995 5.50025,27.20895 5.50025,24.99995 L5.50025,13.99995 C5.50025,11.79095 7.29125,9.99995 9.50025,9.99995 L10.00025,9.99995 C10.96025,9.99995 11.88175,9.61845 12.56075,8.93945 L13.43925,8.06045 C14.11825,7.38195 15.03975,6.99995 16.00025,6.99995 L20.00025,6.99995 C20.96025,6.99995 21.88175,7.38195 22.56075,8.06045 L23.43925,8.93945 C24.11825,9.61845 25.03975,9.99995 26.00025,9.99995 L26.50025,9.99995 C28.70925,9.99995 30.50025,11.79095 30.50025,13.99995 L30.50025,24.99995 C30.50025,27.20895 28.70925,28.99995 26.50025,28.99995"
                                            fill="#0099ff"
                                        ></path>
                                    </g>
                                </g>
                            </svg>
                        </div>
                        <div style="width: 200px; height: auto; display: none; animation: f 0.9s;" id="recordingstuff">
                            <div style="width: 100px; height: 100px; border-radius: 50%; background: green; display: flex; justify-content: space-around; align-items: center; cursor: pointer;" id="recordmean">
                                <span style="align-self: center; padding: 5px;" id="recordstart">Start</span>
                                <span style="align-self: center; padding: 5px; display: none;" id="recordsend"><i class="fa fa-paper-plane" style="font-size: 1.7em;"></i></span>
                            </div>
                            <span
                                id="cancelbtn"
                                onclick="$('#recordingstuff').hide();$('#photoedit').show();$('#recordado').show();$('#recordcancel').click();"
                                style="padding: 4px; cursor: pointer; color: black; font-weight: bold; background: red;"
                            >
                                Cancel&nbsp;
                            </span>
                            <span style="align-self: center; padding: 5px; display: none;" id="recordcancel"><i class="fa fa-close" style="font-size: 1.7em;"></i></span>
                        </div>
                    </div>
                    <div id="Fav" style="overflow-x: hidden; display: block;">
                        <br />
                        <div style="display: flex; padding: 5px;">Change chat-color<input type="color" onchange="changechatColor(this)" style="width: 100px; height: 20px; align-content: center;" id="1" /></div>
                        <br />
                        <div style="display: flex; padding: 5px;">change text-color<input type="color" onchange="messagemainstyle(this,'textcolor')" id="2" style="width: 100px; height: 20px; align-self: center;" /></div>
                        <br />
                        <div style="text-align: left; padding: 5px;">
                            change text-font
                            <select id="4" onchange="messagemainstyle(this,'textfont')" style="width: 100px; margin-right: 30px; float: right; height: 20px; transform: scale(1, 1); /*! float: right; */">
                                <option value="sans-serif">1</option>
                                <option value="'Fjalla One', sans-serif">2</option>
                                <option value="'Vollkorn', serif">3</option>
                                <option value="'Dancing Script', cursive">4</option>
                                <option value="'chattenger'">5*</option>
                                <option value="New Century Schoolbook, TeX Gyre Schola, serif">6</option>
                                <option value="'Palatino Linotype', 'Book Antiqua', Palatino, serif">7</option>
                            </select>
                        </div>
                        <br />
                        <div style="display: flex; justify-content: space-around; padding: 5px;">
                            change font-size<input type="range" min="0.5" max="2" id="3" step="0.1" onchange="messagemainstyle(this,'textsize')" style="width: 100px; height: 20px;" />
                        </div>
                        <br />
                        Select a favicon
                        <hr style="margin: 8px; padding: 0;" />
                        <div style="display: flex; flex-wrap: wrap; cursor: pointer;">
                            <div
                                style="color: red; font-size: 1.2em; width: 25%;"
                                onmouseover="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchstart="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchend="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onmouseout="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                id="selectedfavicon"
                                onclick="document.getElementById('selectedfavicon').setAttribute('id','');this.setAttribute('id','selectedfavicon');"
                            >
                                <i class="fa fa-thumbs-up" style="color: #fbcc5a; font-size: 1em;" aria-hidden="true"></i>
                            </div>
                            <div
                                style="color: red; font-size: 1.2em; width: 25%;"
                                onmouseover="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchstart="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchend="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onmouseout="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onclick="document.getElementById('selectedfavicon').setAttribute('id','');this.setAttribute('id','selectedfavicon');"
                            >
                                &#128074;
                            </div>
                            <div
                                style="color: red; font-size: 1.2em; width: 25%;"
                                onmouseover="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchstart="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchend="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onmouseout="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onclick="document.getElementById('selectedfavicon').setAttribute('id','');this.setAttribute('id','selectedfavicon');"
                            >
                                &#128075;
                            </div>
                            <div
                                style="color: red; font-size: 1.2em; width: 25%;"
                                onmouseover="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchstart="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchend="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onmouseout="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onclick="document.getElementById('selectedfavicon').setAttribute('id','');this.setAttribute('id','selectedfavicon');"
                            >
                                <i class="fa fa-thumbs-down" style="color: #fbcc5a; font-size: 1em;" aria-hidden="true"></i>
                            </div>
                            <div
                                style="color: red; font-size: 1.2em; width: 25%;"
                                onmouseover="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchstart="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchend="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onmouseout="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onclick="document.getElementById('selectedfavicon').setAttribute('id','');this.setAttribute('id','selectedfavicon');"
                            >
                                &#127801;
                            </div>
                            <div
                                style="color: red; font-size: 1.2em; width: 25%;"
                                onmouseover="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchstart="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchend="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onmouseout="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onclick="document.getElementById('selectedfavicon').setAttribute('id','');this.setAttribute('id','selectedfavicon');"
                            >
                                &#128520;
                            </div>
                            <div
                                style="color: red; font-size: 1.2em; width: 25%;"
                                onmouseover="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchstart="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchend="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onmouseout="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onclick="document.getElementById('selectedfavicon').setAttribute('id','');this.setAttribute('id','selectedfavicon');"
                            >
                                &#128521;
                            </div>
                            <div
                                style="color: red; font-size: 1.2em; width: 25%;"
                                onmouseover="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchstart="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchend="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onmouseout="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onclick="document.getElementById('selectedfavicon').setAttribute('id','');this.setAttribute('id','selectedfavicon');"
                            >
                                &#128527;
                            </div>
                            <div
                                style="color: red; font-size: 1.2em; width: 25%;"
                                onmouseover="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchstart="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchend="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onmouseout="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onclick="document.getElementById('selectedfavicon').setAttribute('id','');this.setAttribute('id','selectedfavicon');"
                            >
                                &#128121;
                            </div>
                            <div
                                style="color: red; font-size: 1.2em; width: 25%;"
                                onmouseover="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchstart="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchend="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onmouseout="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onclick="document.getElementById('selectedfavicon').setAttribute('id','');this.setAttribute('id','selectedfavicon');"
                            >
                                &#129409;
                            </div>
                            <div
                                style="color: red; font-size: 1.2em; width: 25%;"
                                onmouseover="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchstart="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchend="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onmouseout="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onclick="document.getElementById('selectedfavicon').setAttribute('id','');this.setAttribute('id','selectedfavicon');"
                            >
                                &#129419;
                            </div>
                            <div
                                style="color: red; font-size: 1.2em; width: 25%;"
                                onmouseover="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchstart="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchend="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onmouseout="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onclick="document.getElementById('selectedfavicon').setAttribute('id','');this.setAttribute('id','selectedfavicon');"
                            >
                                &#129303;
                            </div>
                            <div
                                style="color: red; font-size: 1.2em; width: 25%;"
                                onmouseover="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchstart="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchend="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onmouseout="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onclick="document.getElementById('selectedfavicon').setAttribute('id','');this.setAttribute('id','selectedfavicon');"
                            >
                                &#129344;
                            </div>
                            <div
                                style="color: red; font-size: 1.2em; width: 25%;"
                                onmouseover="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchstart="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchend="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onmouseout="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onclick="document.getElementById('selectedfavicon').setAttribute('id','');this.setAttribute('id','selectedfavicon');"
                            >
                                &#128139;
                            </div>
                            <div
                                style="color: red; font-size: 1.2em; width: 25%;"
                                onmouseover="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchstart="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchend="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onmouseout="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onclick="document.getElementById('selectedfavicon').setAttribute('id','');this.setAttribute('id','selectedfavicon');"
                            >
                                &#128142;
                            </div>
                            <div
                                style="color: red; font-size: 1.2em; width: 25%;"
                                onmouseover="$(this).css('transform','scale(1.2,1.2)').css('z-index','10').css('transition','0.5s')"
                                ontouchstart="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchend="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onmouseout="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onclick="document.getElementById('selectedfavicon').setAttribute('id','');this.setAttribute('id','selectedfavicon');"
                            >
                                &#128147;
                            </div>
                            <div
                                style="color: red; font-size: 1.2em; width: 25%;"
                                onmouseover="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchstart="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchend="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onmouseout="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onclick="document.getElementById('selectedfavicon').setAttribute('id','');this.setAttribute('id','selectedfavicon');"
                            >
                                &#128148;
                            </div>
                            <div
                                style="color: red; font-size: 1.2em; width: 25%;"
                                onmouseover="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchstart="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchend="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onmouseout="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onclick="document.getElementById('selectedfavicon').setAttribute('id','');this.setAttribute('id','selectedfavicon');"
                            >
                                &#128157;
                            </div>
                            <div
                                style="color: red; font-size: 1.2em; width: 25%;"
                                onmouseover="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchstart="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchend="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onmouseout="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onclick="document.getElementById('selectedfavicon').setAttribute('id','');this.setAttribute('id','selectedfavicon');"
                            >
                                &#128165;
                            </div>
                            <div
                                style="color: red; font-size: 1.2em; width: 25%;"
                                onmouseover="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchstart="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchend="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onmouseout="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onclick="document.getElementById('selectedfavicon').setAttribute('id','');this.setAttribute('id','selectedfavicon');"
                            >
                                &#128169;
                            </div>
                            <div
                                style="color: red; font-size: 1.2em; width: 25%;"
                                onmouseover="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchstart="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchend="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onmouseout="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onclick="document.getElementById('selectedfavicon').setAttribute('id','');this.setAttribute('id','selectedfavicon');"
                            >
                                &#128170;
                            </div>
                            <div
                                style="color: red; font-size: 1.2em; width: 25%;"
                                onmouseover="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchstart="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchend="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onmouseout="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onclick="document.getElementById('selectedfavicon').setAttribute('id','');this.setAttribute('id','selectedfavicon');"
                            >
                                &#128329;
                            </div>
                            <div
                                style="color: red; font-size: 1.2em; width: 25%;"
                                onmouseover="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchstart="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchend="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onmouseout="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onclick="document.getElementById('selectedfavicon').setAttribute('id','');this.setAttribute('id','selectedfavicon');"
                            >
                                &#128512;
                            </div>
                            <div
                                style="color: red; font-size: 1.2em; width: 25%;"
                                onmouseover="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchstart="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchend="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onmouseout="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onclick="document.getElementById('selectedfavicon').setAttribute('id','');this.setAttribute('id','selectedfavicon');"
                            >
                                &#128514;
                            </div>
                            <div
                                style="color: red; font-size: 1.2em; width: 25%;"
                                onmouseover="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchstart="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchend="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onmouseout="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onclick="document.getElementById('selectedfavicon').setAttribute('id','');this.setAttribute('id','selectedfavicon');"
                            >
                                &#128525;
                            </div>
                            <div
                                style="color: red; font-size: 1.2em; width: 25%;"
                                onmouseover="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchstart="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchend="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onmouseout="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onclick="document.getElementById('selectedfavicon').setAttribute('id','');this.setAttribute('id','selectedfavicon');"
                            >
                                &#128526;
                            </div>
                            <div
                                style="color: red; font-size: 1.2em; width: 25%;"
                                onmouseover="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchstart="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchend="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onmouseout="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onclick="document.getElementById('selectedfavicon').setAttribute('id','');this.setAttribute('id','selectedfavicon');"
                            >
                                &#128531;
                            </div>
                            <div
                                style="color: red; font-size: 1.2em; width: 25%;"
                                onmouseover="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchstart="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchend="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onmouseout="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onclick="document.getElementById('selectedfavicon').setAttribute('id','');this.setAttribute('id','selectedfavicon');"
                            >
                                &#128532;
                            </div>
                            <div
                                style="color: red; font-size: 1.2em; width: 25%;"
                                onmouseover="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchstart="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchend="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onmouseout="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onclick="document.getElementById('selectedfavicon').setAttribute('id','');this.setAttribute('id','selectedfavicon');"
                            >
                                &#128536;
                            </div>
                            <div
                                style="color: red; font-size: 1.2em; width: 25%;"
                                onmouseover="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchstart="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchend="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onmouseout="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onclick="document.getElementById('selectedfavicon').setAttribute('id','');this.setAttribute('id','selectedfavicon');"
                            >
                                &#128539;
                            </div>
                            <div
                                style="color: red; font-size: 1.2em; width: 25%;"
                                onmouseover="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchstart="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchend="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onmouseout="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onclick="document.getElementById('selectedfavicon').setAttribute('id','');this.setAttribute('id','selectedfavicon');"
                            >
                                &#128545;
                            </div>
                            <div
                                style="color: red; font-size: 1.2em; width: 25%;"
                                onmouseover="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchstart="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchend="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onmouseout="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onclick="document.getElementById('selectedfavicon').setAttribute('id','');this.setAttribute('id','selectedfavicon');"
                            >
                                &#128557;
                            </div>
                            <div
                                style="color: red; font-size: 1.2em; width: 25%;"
                                onmouseover="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchstart="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchend="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onmouseout="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onclick="document.getElementById('selectedfavicon').setAttribute('id','');this.setAttribute('id','selectedfavicon');"
                            >
                                &#128558;
                            </div>
                            <div
                                style="color: red; font-size: 1.2em; width: 25%;"
                                onmouseover="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchstart="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchend="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onmouseout="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onclick="document.getElementById('selectedfavicon').setAttribute('id','');this.setAttribute('id','selectedfavicon');"
                            >
                                &#128584;
                            </div>
                            <div
                                style="color: red; font-size: 1.2em; width: 25%;"
                                onmouseover="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchstart="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchend="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onmouseout="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onclick="document.getElementById('selectedfavicon').setAttribute('id','');this.setAttribute('id','selectedfavicon');"
                            >
                                &#128585;
                            </div>
                            <div
                                style="color: red; font-size: 1.2em; width: 25%;"
                                onmouseover="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchstart="$(this).css('transform','scale(1.5,1.5)').css('z-index','10').css('transition','0.5s')"
                                ontouchend="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onmouseout="$(this).css('transform','scale(1,1)').css('transition','0.5s').css('z-index',1)"
                                onclick="document.getElementById('selectedfavicon').setAttribute('id','');this.setAttribute('id','selectedfavicon');"
                            >
                                &#128586;
                            </div>
                        </div>
                    </div>
                </div>
                <div id="stylingtools" style="display: none; flex-wrap: wrap; width: 300px; background: black; position: fixed; bottom: 60px; z-index: 900; right: calc(50% - 150px); color: yellow; font-weight: bold;">
                    <nav style="position: sticky; top: 3px; display: flex; flex-wrap: nowrap; justify-content: space-around; font-family: monospace; font-size: 1.2em;">
                        <a onclick="$('#b').show(500);$('#a').hide();$(this).css('border-bottom','6px solid green');$(this).next().css('border-bottom','0');" style="border-bottom: 6px solid green;">Sound</a>
                        <a
                            style="border-bottom: 0px;"
                            onclick="$('#a').show(500);$('#b').hide();$('#wallpaperoption img').each(function(){if(!this.src){this.src = this.id}});$(this).css('border-bottom','6px solid green');$(this).prev().css('border-bottom','0');"
                        >
                            wallpaper
                        </a>
                        <i class="fa fa-close" style="float: right; font-weight: bold; font-size: 1.1em; padding: 5px; background: red;" onclick="$(this).parent().parent().hide(500)" aria-hidden="true"></i>
                    </nav>
                    <div id="b" style="text-align: center; display: block;">
                        <p style="font-family: monospace; font-size: 1em; text-align: justify; padding-left: 50px;">
                            <input type="checkbox" id="beeper" onclick="stopsong()" style="width: 18px; height: 18px;" value="" />&nbsp;&nbsp;&nbsp;Turn off beaping sound<br />
                            <br />
                            <input type="checkbox" id="datasaver" style="width: 18px; height: 18px;" value="" />&nbsp;&nbsp;&nbsp;Data saving in call
                        </p>
                        <span style="font-family: monospace;">Listen to your dream</span><br />
                        <br />
                        <div style="display: flex; font-size: 20px; justify-content: space-around;">
                            <i class="fa fa-backward" title="previous music" onclick="controlmusic(0,this)" aria-hidden="true"></i><span class="sr-only">previous music</span>
                            <i class="fa fa-play" title="play/pause" onclick="controlmusic(1,this)" aria-hidden="true"></i><span class="sr-only">play/pause</span>
                            <i class="fa fa-forward" onclick="controlmusic(2,this)" title="next music" aria-hidden="true"></i><span class="sr-only">next music</span>
                        </div>
                        <hr />
                        <div style="display: flex; font-size: 20px; justify-content: space-around;">
                            <input type="file" accept="audio/*" onchange="changemusic(this)" id="addmusic" style="display: none;" />
                            <label title="add your favourite music" for="addmusic">
                                <i class="fa fa-music" aria-hidden="true"></i><sub><i class="fa fa-plus" style="font-size: 10px;" aria-hidden="true"></i></sub>
                            </label>
                            <i class="fa fa-refresh" title="restart this music" onclick="controlmusic(3,this)" aria-hidden="true"></i><span class="sr-only">restart this music</span>
                            <i class="fas fa-slash" title="enable loop" onclick="controlmusic(4,this)" aria-hidden="true"></i><span class="sr-only">enable loop</span>
                        </div>
                        <div id="allmusic">
                            <form autocomplete="off" onsubmit="return false"><input type="text" id="musicsearch" placeholder=" search short music " oninput="fetchMusic(this.value)" style="display: inline-block; width: 90%;" /></form>
                            <div id="displaymusic" style="width: 100%; max-height: 100px;"></div>
                            <audio src="https://kanhaiya-2000.github.io/photoshop/sounds/a1.mp3" style="display: none;"></audio> <audio id="https://kanhaiya-2000.github.io/photoshop/sounds/a2.mp3" style="display: none;"></audio>
                            <audio id="https://kanhaiya-2000.github.io/photoshop/sounds/a3.mp3" style="display: none;"></audio> <audio id="https://kanhaiya-2000.github.io/photoshop/sounds/a4.mp3" style="display: none;"></audio>
                            <audio id="https://kanhaiya-2000.github.io/photoshop/sounds/a5.mp3" style="display: none;"></audio>
                            <div id="onlinemusic" style="display: flex; width: 100%; flex-wrap: wrap;"></div>
                        </div>
                    </div>
                    <div id="a" style="display: none;">
                        <div id="wallpaperoption" style="display: flex; flex-wrap: wrap; justify-content: space-around;">
                            <img id="https://kkleap.github.io/assets/audiocallwallpaper.jpeg" onclick="cb(this,0)" crossorigin="anonymous" />
                            <img id="https://kkleap.github.io/assets/bg2.jpeg" onclick="cb(this,0)" crossorigin="anonymous" /> <img id="https://kkleap.github.io/assets/bg3.jpg" onclick="cb(this,0)" crossorigin="anonymous" />
                            <img id="https://kkleap.github.io/assets/background.jpg" onclick="cb(this,0)" crossorigin="anonymous" /> <img id="https://kkleap.github.io/assets/scene.jpeg" onclick="cb(this,0)" crossorigin="anonymous" />
                            <img id="https://kkleap.github.io/assets/i7p.png" onclick="cb(this,0)" crossorigin="anonymous" /> <img id="https://kkleap.github.io/assets/gn.jpeg" onclick="cb(this,0)" crossorigin="anonymous" />
                            <img id="https://kkleap.github.io/assets/gm.jpg" onclick="cb(this,0)" crossorigin="anonymous" /> <img id="https://kkleap.github.io/assets/index.jpeg" onclick="cb(this,0)" crossorigin="anonymous" />
                            <img id="https://kkleap.github.io/assets/i4p.jpg" onclick="cb(this,0)" crossorigin="anonymous" /> <img id="https://kkleap.github.io/assets/i3p.jpeg" onclick="cb(this,0)" crossorigin="anonymous" />
                            <img id="https://kkleap.github.io/assets/74904.jpg" onclick="cb(this,0)" crossorigin="anonymous" /> <img id="https://kkleap.github.io/assets/gm.gif" onclick="cb(this,0)" crossorigin="anonymous" />
                            <img id="https://kkleap.github.io/assets/Gn.jpg" onclick="cb(this,0)" crossorigin="anonymous" />
                        </div>
                        Bg-color:
                        <input
                            type="color"
                            onchange="$('#whole').css('background-image','none').css('background-color',this.value);$('#head').css('background-color',this.value);$('#msg-sender').css('background',this.value);"
                            style="width: 60px; height: 20px; border-radius: 50%;"
                        />
                        <div style="display: flex; flex-wrap: nowrap; justify-content: space-around;">
                            <input type="file" id="chatbgupload" accept="image/*" onchange="cb(this,1)" style="display: none;" />
                            <label for="chatbgupload"><i class="fa fa-plus" style="font-size: 1.3em; padding: 10px; background: green;" title="add background" aria-hidden="true"></i><span class="sr-only">add background</span></label>
                            <i class="fa fa-close" style="font-size: 1.3em; padding: 10px; background: red;" onclick="cb(this,2)" title="remove background" aria-hidden="true"></i><span class="sr-only">remove background</span>
                        </div>
                    </div>
                </div>
                <div id="chatroom" style="display: none;"></div>
            </div>
            <div id="videocallingpage" style="background-image: url(https://kkleap.github.io/assets/blackbg2.jpg);">
                <video id="selfview" class="large" autoplay></video>
                <div id="videocontainer"></div>
                <div style="position: sticky; bottom: -50px; margin: auto; display: flex; max-width: 360px; flex-wrap: nowrap; justify-content: space-between;" id="controls">
                    <i class="fa fa-user-plus" style="border-radius: 50%; font-size: 1.8em; color: #0f0; width: 40px; height: 40px;" title="Add users" id="adduser"></i>
                    <i
                        class="fa fa-comment"
                        id="displaychat"
                        style="font-size: 1.8em; color: yellow; border-radius: 50%; width: 40px; height: 40px;"
                        title="go to chat"
                        onclick="$('#videocallingpage').hide(200);$('#chatroom').show(200);showheader('video');$('#content').attr('content','width=device-width,initial-scale=1.0,user-scalable=no');"
                    ></i>
                    <i class="fa fa-television" style="font-size: 1.8em; color: yellow; border-radius: 50%; width: 40px; height: 40px;" title="share screen" id="sharescreen"></i>
                    <i class="fa fa-refresh" style="font-size: 1.8em; color: rgb(3, 252, 252); border-radius: 50%; width: 40px; height: 40px;" title="toggle camera" id="togglecamera"></i>
                    <i id="videooff" title="on/off the camera" class="fa fa-video-camera" style="border-radius: 50%; font-size: 1.8em; color: #0f0; width: 40px; height: 40px;"></i>
                    <i id="audiooff" title="on/off the microphone" class="fa fa-microphone" style="border-radius: 50%; font-size: 1.8em; color: #0f0; width: 40px; height: 40px;"></i>
                    <i title="hangup" class="fas fa-phone-slash" id="hangUpBtn" style="border-radius: 50%; color: #f00; font-size: 1.8em; width: 40px; height: 40px; display: flex;"> </i>
                </div>
            </div>
            <div id="voicecallingpage" style="background-image: url(https://kkleap.github.io/assets/blackbg2.jpg);">
                <div id="audiocontainer" style="display: none;"></div>
                <audio autoplay muted id="selfaudio"></audio>
                <div id="controls2" style="position: sticky; bottom: -50px; margin: auto; display: flex; max-width: 360px; flex-wrap: nowrap; justify-content: space-between;">
                    <i class="fa fa-user-plus" style="border-radius: 50%; font-size: 2em; color: #0f0; width: 50px; height: 50px;" title="Add users" id="adduser2"></i>
                    <i
                        class="fa fa-comment"
                        style="font-size: 2em; color: yellow; border-radius: 50%; width: 50px; height: 50px;"
                        title="go to chat"
                        onclick="$('#voicecallingpage').hide(200);$('#chatroom').show(200);showheader('voice');"
                    ></i>
                    <i id="audiooff2" title="on/off the microphone" class="fa fa-microphone" style="border-radius: 50%; font-size: 2em; color: #0f0; width: 50px; height: 50px;"></i>
                    <i title="hangup" class="fas fa-phone-slash" id="hangUpBtn2" style="border-radius: 50%; color: red; font-size: 2em; width: 50px; height: 50px; display: flex;"> </i>
                </div>
                <div id="showaudioconnection" style="display: flex; flex-wrap: wrap; scrollbar-width: none; position: sticky; justify-content: space-around; max-width: 700px; top: 150px; overflow-x: auto;"></div>
            </div>
            <div id="userlist" style="width: 200px; max-height: 200px; animation: f 0.6s; position: fixed; overflow-y: auto; top: 140px; left: calc(50% - 100px); display: none; z-index: 2000;">Select user to call<br /></div>
            <div id="webcam" style="display: none; animation: f 0.8s;">
                <div id="filteroption" style="display: flex; flex-wrap: nowrap; justify-content: space-around; background: violet; color: white;">
                    <div id="brightness-filter" class="activefilter"><i class="fas fa-lightbulb" style="font-size: 1.4em;"></i></div>
                    <div id="contrast-filter"><i class="fas fa-table" style="font-size: 1.4em;"></i></div>
                    <div id="saturation-filter"><i class="fas fa-adjust" style="font-size: 1.4em;"></i></div>
                    <div id="hue-filter"><i class="fas fa-atom" style="font-size: 1.4em;"></i></div>
                    <div id="sepia-filter"><i class="fas fa-map" style="font-size: 1.4em;"></i></div>
                    <div id="opacity-filter"><i class="fa fa-angle-down" style="font-size: 1.4em;"></i></div>
                    <div id="invert-filter"><i class="fa fa-undo" style="font-size: 1.4em;"></i></div>
                    <div id="grayscale-filter"><i class="fa fa-cloud" style="font-size: 1.4em;"></i></div>
                    <div id="blur-filter"><i class="fa fa-tint" style="font-size: 1.4em;"></i></div>
                    <div id="crop-filter"><i class="fas fa-crop-alt" style="font-size: 1.4em;"></i></div>
                    <div id="custom-filter" style="display: none;"><i class="fa fa-filter" style="font-size: 1.4em;"></i></div>
                </div>
                <div style="width: 100%; background: black; height: 400px;">
                    <div id="canvas-cropper" style="position: absolute; top: 24px; left: 0px;">
                        <div id="cropper-sieve" style="background: rgba(255, 0, 0, 0.3); display: none;"></div>
                        <canvas id="filter-canvas"></canvas>
                        <div id="cropper-grid" style="display: none; background: rgba(0, 255, 0, 0.3); position: absolute; top: 10px; width: 80px; height: 60px; border: 2px solid white; resize: both; overflow: auto;"></div>
                    </div>
                </div>
                <div style="display: flex; flex-wrap: nowrap; width: 100%;">
                    <div id="add-img" style="background: #eabe11; padding: 8px 10px; width: 6.66%;">
                        <input type="file" id="filterfile" accept="image/*" onchange="filterimgupload(this)" /><label for="filterfile"><i class="fas fa-plus" style="color: #4f534f; font-size: 1.8em;"></i></label>
                    </div>
                    <div id="camcontroller" style="width: 80%; background: violet;">
                        <div id="camrange-div">
                            <input type="range" min="0" max="200" id="camrange" style="width: 80%;" /><br />
                            <span id="filter-name"></span>
                        </div>
                        <div style="display: none; flex-wrap: nowrap; justify-content: space-around; color: black;" id="cropper-tools">
                            <i class="fa fa-check" id="done-cropping" style="padding: 6px 10px; background: green;"></i>
                            <i class="fa fa-close" id="exit-cropping" style="padding: 6px 10px; background: red;" onclick="$('#brightness-filter').click()"></i>
                        </div>
                        <div id="custom-div" style="display: none; flex-wrap: nowrap; justify-content: space-between; color: red; font-size: 1.8em;">
                            <div id="custom-div-sticker"><i class="fa fa-heart"></i></div>
                            <div id="custom-div-write"></div>
                            <div id="custom-div-flip"><i class="fa fa-refresh"></i></div>
                        </div>
                    </div>
                    <div id="cancel-filter-img" style="background: #eabe11; width: 6.66%; padding: 8px 10px; border-right: 1px solid black; color: #4f534f;"><i class="fa fa-close" style="font-size: 1.8em;"></i></div>
                    <div id="send-filter-img" style="background: #eabe11; width: 6.66%; color: #4f534f; padding: 8px 10px;"><i class="fa fa-paper-plane" style="font-size: 1.8em;"></i></div>
                </div>
            </div>
        </center>
        <input type="file" accept="image/*" id="profilechangeinput" onchange="uploadToImgur(this)" />
        <div id="replytomsg" style="min-width: 300px; position: fixed; background: rgb(25, 25, 25); border-radius: 10px; display: none; flex-wrap: nowrap;">
            <div style="width: 95%;" id="replyorrefer">
                <a id="replytextparent" style="text-decoration: none;">
                    <div style="width: 100%;">
                        <div id="replytexthead" style="width: 104%; padding: 2px 4px; text-align: left; border-bottom: 3px solid violet; color: #f0e7e7;"></div>
                        <div id="replytext" style="padding-left: 4px; word-break: break-all; color: #d2b6b6; padding-top: 3px;"></div>
                    </div>
                </a>
            </div>
            <div style="padding-right: 8px; color: red;" id="replytextclose" onclick="$(this).parent().hide(200);$('#replytextparent').attr('class','#');$('#replytext').text('');$('#replytexthead').text('')">
                <i class="fa fa-close" style="font-weight: bold; font-size: 1.5em;"></i>
            </div>
        </div>
        <script>
            //Saving bandwidth in calls(mainly video call) by compromosing with quality
            $("#datasaver").click(function () {
                this.checked ? localStorage.setItem("datasaver", "yes") : localStorage.setItem("datasaver", "no");
            });
            if (
                ((window.textcolor = localStorage.getItem("textcolor") || "#ffff00"),
                (window.textsize = localStorage.getItem("textsize") || "1.2em"),
                (window.textfont = localStorage.getItem("textfont") || "'chattenger'"),
                window.location.toString().includes("?"))
            ) {
                try {
                    atob(window.location.toString().split("?")[1]);
                } catch (e) {
                    alert("Hmmmm!Your link appears to be broken!"), (window.location.search = "");
                }
                if (atob(window.location.toString().split("?")[1]).includes("&key=") && atob(window.location.toString().split("?")[1]).includes("roomid=")) {
                    $("#login").hide();
                } else {
                    window.history.replaceState({}, document.title, "/");
                }
            }
            //uploading pic to imgur
            function uploadToImgur(e) {
                url = "https://api.imgur.com/3/upload/";
                var t = new XMLHttpRequest();
                (t.responseType = "json"),
                    t.open("POST", url),
                    t.setRequestHeader("Authorization", "Client-ID 62daa59af734a43"),
                    (t.onload = function () {
                        var e = t.response;
                        e.success
                            ? (console.log(e),
                              localStorage.setItem("profileinfo", e.data.link),
                              (document.getElementById("userimg").src = e.data.link),
                              socket.emit("changeprofilepic", { user: userdata.nativeUser, roomid: userdata.nativeRoom, profile: e.data.link }))
                            : alert("Error in setting profilepic!");
                    }),
                    t.send(e.files[0]);
            }
            function stopsong() {
                incoming.pause(), disconnect.pause(), ring.pause();
            }
            function messagemainstyle(e, t) {
                switch (t) {
                    case "textcolor":
                        $(".messagemain").css("color", e.value), (window.textcolor = e.value), localStorage.setItem("textcolor", e.value);
                        break;
                    case "textfont":
                        $(".messagemain").css("font-family", e.value), (window.textfont = e.value), localStorage.setItem("textfont", e.value);
                        break;
                    case "textsize":
                        $(".messagemain").css("font-size", e.value + "em"), (window.textsize = e.value + "em"), localStorage.setItem("textsize", e.value + "em");
                }
            }
            //inviting other people to join the room through a direct link
            async function inviteParticipant() {
                localStorage.getItem("shareinstruction") ||
                    (Renderconfirm("Make sure that admin didn't change group password after your joining otherwise shared link will not work.If you are admin of this group,then safely disregard the above warning", !0),
                    localStorage.setItem("shareinstruction", !0));
                let e = {
                    url: "https://chattenger.herokuapp.com/?" + btoa("roomid=" + localStorage.getItem("loginroomid") + "&key=" + localStorage.getItem("loginpassword")),
                    title: "Chattenger:web app for text,video and voice chat",
                    text: "hey there!Come and enjoy chatting on chattenger with me alongwith a lot more features!For utilising full features,open the link in chrome,firefox,opera or edge browser only",
                };
                if (($("#moreoptions").hide(), localStorage.getItem("loginroomid") && localStorage.getItem("loginpassword"))) {
                    let t = document.createElement("textarea");
                    if (
                        ((t.value = e.url),
                        document.body.appendChild(t),
                        t.select(),
                        document.execCommand("copy"),
                        t.remove(),
                        (document.getElementById("message-container").scrollTop = document.getElementById("message-container").scrollHeight),
                        /iPhone|iPad|iPod|Android/i.test(navigator.userAgent))
                    )
                        try {
                            await navigator.share(e);
                        } catch (e) {
                            $("#message-container").append("<p class='info' style='color:red;background:black'>Error occured!<br>Link was copied to clipboard!You can share link</p>"),
                                (document.getElementById("message-container").scrollTop = document.getElementById("message-container").scrollHeight);
                        }
                    else
                        $("#message-container").append("<p class='info' style='color:green;background:black'>Link was copied to clipboard!<br>You can share link</p>"),
                            (document.getElementById("message-container").scrollTop = document.getElementById("message-container").scrollHeight);
                } else
                    $("#message-container").append("<p class='info' style='color:red;background:black'>It appears that you cleared cookies and site-data.<br>Error in sharing!</p>"),
                        (document.getElementById("message-container").scrollTop = document.getElementById("message-container").scrollHeight);
            }
            //Adjusting avatar or profile pic
            function adjust(e, t) {
                if (e.naturalWidth < e.naturalHeight) (e.style.transform = "scale(" + e.naturalHeight / e.naturalWidth + ")"), t ? (e.style.marginRight = "10px") : (e.style.marginLeft = "10px");
                else {
                    e.style.margin = 0;
                    let t = (e.naturalWidth / e.naturalHeight) * (1 - (0.5 * e.naturalHeight) / e.naturalWidth);
                    e.style.transform = "scale(" + (t > 1 ? t : 1) + ")";
                }
                e.style.clipPath = "circle(" + ((50 * e.naturalWidth) / e.naturalHeight > 50 ? (50 * e.naturalHeight) / e.naturalWidth : (50 * e.naturalWidth) / e.naturalHeight) + "%)";
                if (e.src == "https://kkleap.github.io/assets/default.jpg") {
                    e.style.transform = "scale(0.8)";
                }
            }
            //Displaying most of the alert messages through this function
            function Renderconfirm(e, t = !1) {
                $("#login").hide(),
                    document.getElementById("rendering") && $("#rendering").remove(),
                    $("body").prepend(
                        '<div id="rendering" style="animation:sz 1.2s linear;position:fixed;padding-top:10px;top:150px;font-size:0.8em;none;border-radius:15px;z-index:1000000;width:300px;left:calc(50% - 150px);background:white;"><div style="overflow-y:auto;overflow-x:hidden;font-weight:bold;padding:10px;max-height:150px;background:grey;color:white;text-align:center">' +
                            e +
                            '</div><div style="display:flex;height:30px;padding-top:10px;padding-bottom:10px;justify-content:space-around"><button id="lb" style="background:green;cursor:pointer;transition:0.3s;border-radius:8px;font-weight:bold;width:80px">Yes</button><button id="rb" style="background:red;cursor:pointer;transition:0.6s;border-radius:8px;font-weight:bold;width:80px">No</button></div></div>'
                    ),
                    $("#rendering").css("font-family", '"Vollkorn", serif'),
                    $("#lb").on("click", function () {
                        $(this).parent().parent().remove(),
                            t || ($("#login").show(), $("#name").val(localStorage.getItem("loginusername")), $("#pwd").val(localStorage.getItem("loginpassword")), $("#roomid").val(localStorage.getItem("loginroomid")), setUsername());
                    }),
                    $("#lb").on("mouseover", function () {
                        $(this).css("background", "yellow");
                    }),
                    $("#lb").on("mouseout", function () {
                        $(this).css("background", "green");
                    }),
                    $("#rb").on("mouseover", function () {
                        $(this).css("background", "yellow");
                    }),
                    $("#rb").on("mouseout", function () {
                        $(this).css("background", "red");
                    }),
                    $("#rb").on("click", function () {
                        $(this).parent().parent().remove(), $("#login").show();
                    }),
                    t && ($("#rb").remove(), $("#lb").text("ok"));
            }
            $("body").css("overflow-y", "scroll"), localStorage.getItem("profileinfo") || localStorage.setItem("profileinfo", "https://kkleap.github.io/assets/default.jpg");
        </script>
        <script src="https://kit.fontawesome.com/a076d05399.js"></script>
        <script type="text/javascript">
            if (!window.location.toString().includes("https") && !window.location.toString().includes("localhost")) {
                window.location.assign("https://chattenger.herokuapp.com"),
                    (document.body.onbeforeunload = null),
                    $("script").each(function () {
                        $(this).remove();
                    }),
                    $("body").html(
                        "<p style='color:red;font-weight:bold;text-align:center;background:black;border-radius:23px;width:300px;top:220px;position:sticky;margin:auto'>http domain is not allowed!<br>Use secure https instead<br><a href='https://chattenger.herokuapp.com' style='color:green'>Click</a> here!</p>"
                    );
            }
            var socket = io();
            let date = new Date();
            const userdata = { nativeUser: null, nativeRoom: null };
            var admin,
                reconnectint,
                should_reconnect = !0;
            window.startedchatyet = !1;
            let messenger = new Audio("https://kkleap.github.io/assets/messenger.mp3"),
                incoming = new Audio("https://kanhaiya-2000.github.io/Guessenger/c9.mp3"),
                ring = new Audio("https://kkleap.github.io/assets/ring.mp3"),
                disconnect = new Audio("https://kkleap.github.io/assets/disconnect.mp3");
            (ring.loop = !0),
                messenger.load(),
                incoming.load(),
                ring.load(),
                (incoming.loop = !0),
                "undefined" != typeof Storage
                    ? (localStorage.getItem("timeout") &&
                          date.getHours() - localStorage.getItem("timeout") > 4 &&
                          (Renderconfirm("it is advisable to open with chrome,firefox,opera or edge for utilising advanced features like video,voice chat and voice messaging", true), localStorage.setItem("timeout", date.getHours())),
                      localStorage.getItem("timeout") ||
                          (Renderconfirm("it is advisable to open with chrome,firefox,opera or edge for utilising advanced features like video,voice chat and voice messaging", true), localStorage.setItem("timeout", date.getHours())))
                    : Renderconfirm("it is advisable to open with chrome,firefox,opera or edge for utilising advanced features like video,voice chat and voice messaging", true),
                (window.rtcsupport = navigator.userAgent.includes("Firefox") || navigator.userAgent.includes("Chrome") || navigator.userAgent.includes("Opera") || navigator.userAgent.includes("Edge"));
            let spin = document.getElementById("spinnerbg");
            $("#allstickers span").css("background-image", "url(" + document.getElementById("spinnerbg2").src + ")"), $("#allgif span").css("background-image", "url(" + document.getElementById("spinnerbg2").src + ")");
            function showheader(e) {
                $("#userlist").hide(),
                    (window.callret = e),
                    document.getElementById("callbackbutton") && document.getElementById("callbackbutton").remove(),
                    $("#chatroom").append(
                        $('<span id="callbackbutton" onclick="returntocall(window.callret)">Return to call</span>')
                            .css("background", "green")
                            .css("position", "absolute")
                            .css("top", "40px")
                            .css("padding", "6px")
                            .css("height", "20px")
                            .css("cursor", "pointer")
                            .css("margin", "auto")
                            .css("margin-bottom", "100px")
                            .css("clear", "both")
                            .css("z-index", 1e6)
                    );
            }
            function returntocall(e) {
                $("#stylingtools").hide(200),
                    audmusic[currI].pause(),
                    "video" == e ? ($("#videocallingpage").show(200), $("#content").attr("content", "width=device-width,initial-scale=1.0,user-scalable=yes")) : $("#voicecallingpage").show(200),
                    $("#chatroom").hide(200),
                    $(this).remove();
            }
            function cb(e, i) {
                if (
                    (0 == i && ((document.getElementById("whole").style.backgroundImage = "url(" + e.src + ")"), $("#msg-sender").css("background", "transparent"), adjustHead(e.src)),
                    2 == i && (document.getElementById("whole").style.backgroundImage = "none") && $("#head").css("background-color", "transparent"),
                    1 == i)
                ) {
                    let i = URL.createObjectURL(e.files[0]);
                    (document.getElementById("whole").style.backgroundImage = "url(" + i + ")"),
                        $("#wallpaperoption").append($("<img src='" + i + "' onclick='cb(this,0)' crossorigin='anonymous'>"), adjustHead(i)),
                        $("#msg-sender").css("background", "transparent");
                }
            }
            let relayintervalinmusic;
            function fetchMusic(e) {
                relayintervalinmusic && clearTimeout(relayintervalinmusic);
                var i = {
                    async: !0,
                    crossDomain: !0,
                    url: "https://deezerdevs-deezer.p.rapidapi.com/search?q=" + e,
                    method: "GET",
                    headers: { "x-rapidapi-host": "deezerdevs-deezer.p.rapidapi.com", "x-rapidapi-key": "e75bhf589emsh44c3cf7878e7c2ep1jke34e6jsn60b573a5318" },
                };
                relayintervalinmusic = setTimeout(function () {
                    $.ajax(i).done(function (e) {
                        if (!e.data) return;
                        console.log(e.data.length, e.data);
                        handleSong(e.data);
                    });
                }, 2e3);
            }
            function setNewRoom() {
                socket.emit("createNewRoom", {
                    name: document.getElementById("newname").value,
                    roomid: document.getElementById("newroomid").value,
                    password: document.getElementById("newpwd").value,
                    population: document.getElementById("newpopulation").value,
                    adminCode: document.getElementById("newadmincode").value,
                }),
                    (userdata.nativeUser = document.getElementById("newname").value);
            }
            function setUsername() {
                socket.emit("setUsername", { name: document.getElementById("name").value, roomid: document.getElementById("roomid").value, password: document.getElementById("pwd").value }),
                    (userdata.nativeUser = document.getElementById("name").value);
            }
            var timeinterval, users;
            $("#allgif span").css("background-image", "url(" + spin.src + ")"),
                $("#allstickers span").css("background-image", "url(" + spin.src + ")"),
                $("#allgif img").css("background-image", "url(" + spin.src + ")"),
                $("#allstickers img").css("background-image", "url(" + spin.src + ")"),
                $(document).ready(function () {
                    $("#login").show(), $("input").val("");
                }),
                window.addEventListener("resize", function () {
                    (respheight = window.innerHeight - 90), $("#message-container").css("height", respheight + "px");
                    if (document.getElementById("message-container") && document.getElementById("message-container").scrollTop > document.getElementById("message-container").scrollHeight - 1100) {
                        document.getElementById("message-container").scrollTop = document.getElementById("message-container").scrollHeight;
                    }
                    $(window).width() <= 700
                        ? ($("#head").css("position", "absolute"), $("#message-container").css("position", "absolute"), $("#msg-sender").css("position", "absolute"))
                        : ($("#head").css("position", "sticky"), $("#message-container").css("position", "sticky"), $("#msg-sender").css("position", "sticky")),
                        should_reconnect || ($(window).unbind("beforeunload"), (document.body.onbeforeunload = null), window.location.reload());
                }),
                $("#videocallingpage").on("contextmenu", function (e) {
                    if (window.location.toString().includes("https")) {
                        e.preventDefault();
                    }
                }),
                $("#voicecallingpage").on("contextmenu", function (e) {
                    if (window.location.toString().includes("https")) {
                        e.preventDefault();
                    }
                }),
                window.addEventListener("keyup", function (e) {
                    $("#moreoptions").hide(),
                        "musicsearch" != document.activeElement.id && "beeper" != document.activeElement.id && $("#stylingtools").hide(500),
                        "pwdchange" != document.activeElement.id && $("#adminsection").hide(),
                        13 === e.keyCode ? sendMessage() : "message" == document.activeElement.id && socket.emit("istyping", { user: userdata.nativeUser, auth: userdata.auth, roomid: userdata.nativeRoom });
                }),
                window.addEventListener("input", function () {
                    $("#moreoptions").hide(),
                        "musicsearch" != document.activeElement.id && "beeper" != document.activeElement.id && "datasaver" != document.activeElement.id && $("#stylingtools").hide(500),
                        "pwdchange" != document.activeElement.id && $("#adminsection").hide(),
                        "message" == document.activeElement.id && socket.emit("istyping", { user: userdata.nativeUser, auth: userdata.auth, roomid: userdata.nativeRoom });
                }),
                socket.on("userExists", function (e) {
                    (document.getElementById("error-container").innerHTML = e), $("#error-container").show(), (userdata.nativeUser = null);
                }),
                socket.on("verifyAdmin", function () {
                    var e = prompt("Enter admin security key");
                    null != e
                        ? socket.emit("verifying", { value: e, admin: document.getElementById("name").value, password: document.getElementById("pwd").value, roomid: document.getElementById("roomid").value })
                        : Renderconfirm("admin key cannot be empty", true);
                }),
                socket.on("successverify", function () {
                    $("#error-container").html("<span style='color:green'>Verification successful!<br>Directing to your room...</span>"), $("#error-container").show();
                }),
                socket.on("serverangry", function () {
                    $(window).unbind("beforeunload"),
                        (document.body.onbeforeunload = null),
                        setTimeout(function () {
                            window.location.reload();
                        }, 2500),
                        Renderconfirm("oh idiot !Do not try to abnormalise this system again\nbye ...", true);
                }),
                socket.on("failedverify", function () {
                    $("#error-container").html("Admin-verification failed!<br>You entered incorrect admin key"), $("#error-container").show();
                });
            let playagain = {};
            socket.on("handletype", function (e) {
                let i = document.getElementById("sctyping"),
                    s = "right" == $(".messages:last-child").css("float") ? "left" : "right",
                    t = Number($(window).width() - Number($("#whole").css("width").replace("px", ""))) / 2;
                e != userdata.nativeUser &&
                    null != e &&
                    (document.getElementById("header").removeAttribute("style"),
                    document.getElementById("beeper").checked || playagain[e] || (i.play(), (playagain[e] = !0)),
                    $("#header")
                        .text("Typing: " + e + " ...")
                        .css("margin", "10px")
                        .css("font-weight", "bold")
                        .css("color", "white")
                        .css("padding", "5px")
                        .css("animation", "f 1.2s")
                        .css("font-size", "1.14em")
                        .css("background", "#242420")
                        .css("position", "absolute")
                        .css("z-index", "500")
                        .css("bottom", "40px")
                        .css(s, t + "px"),
                    $("#header").show("fast", "linear"),
                    clearTimeout(timeinterval),
                    (timeinterval = setTimeout(function () {
                        $("#header").hide("slow"), document.getElementById("beeper").checked || (playagain[e] = !1);
                    }, 4e3)));
            });
            let currI = 0,
                audmusic = document.querySelectorAll("#b audio");
            function controlmusic(e, i) {
                if (
                    ((audmusic = document.querySelectorAll("#b audio")),
                    0 == e && (audmusic[currI].pause(), (currI = 0 == currI ? audmusic.length - 1 : currI - 1), (audmusic[currI].src = audmusic[currI].src ? audmusic[currI].src : audmusic[currI].id), audmusic[currI].play()),
                    1 == e)
                ) {
                    setInterval(function () {
                        audmusic[currI].paused ? (i.className = "fa fa-play") : (i.className = "fa fa-pause");
                    });
                    audmusic[currI].paused
                        ? (audmusic[currI].play(), (i.className = "fa fa-pause"), i.setAttribute("title", "pause the music"))
                        : (audmusic[currI].pause(), (i.className = "fa fa-play"), i.setAttribute("title", "play the music"));
                }
                2 == e && (audmusic[currI].pause(), (currI = currI == audmusic.length - 1 ? 0 : currI + 1), (audmusic[currI].src = audmusic[currI].src ? audmusic[currI].src : audmusic[currI].id), audmusic[currI].play()),
                    3 == e && ((audmusic[currI].currentTime = 0), audmusic[currI].play()),
                    4 == e &&
                        ("fas fa-slash" == i.className
                            ? (audmusic.forEach(function (e) {
                                  e.loop = !0;
                              }),
                              (i.className = "fa fa-repeat"),
                              i.setAttribute("title", "disable loop"))
                            : (audmusic.forEach(function (e) {
                                  e.loop = !1;
                              }),
                              i.setAttribute("title", "enable loop"),
                              (i.className = "fas fa-slash")));
            }
            function changemusic(e) {
                let i = audmusic[currI].loop;
                audmusic[currI].pause(),
                    $("#b").append($("<audio src='" + URL.createObjectURL(e.files[0]) + "' style='display:none;'></audio>")),
                    (audmusic = document.querySelectorAll("#b audio")),
                    (currI = audmusic.length - 1),
                    (audmusic[currI].loop = i),
                    audmusic[currI].play();
            }
            function opensetting() {
                $("#moreoptions").hide(), $("#stylingtools").show(500);
            }
            function trigger_inp_change(e) {
                $("#sendbtn").html("<i class='fa fa-paper-plane' style='font-size:1em;'></i>"), e.value || (e.nextElementSibling.setAttribute("class", ""), $("#sendbtn").html($("#selectedfavicon").html()));
            }
            function generateid() {
                let e = "";
                for (var i = 0; i < 8; i++) e += "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".charAt(Math.floor(62 * Math.random()));
                return e;
            }
            function showEmogies(e) {
                $(e).css("border-bottom", "4px solid yellow"),
                    $(e).next().css("border-bottom", "0px solid yellow"),
                    $(e).next().next().css("border-bottom", "0px solid yellow"),
                    $("#allgif").hide(),
                    $("#allstickers").hide(),
                    $("#allemogies").css("display", "flex");
            }
            function showGIF(e) {
                $(e).css("border-bottom", "4px solid yellow"),
                    $(e).next().css("border-bottom", "0px solid yellow"),
                    $(e).prev().css("border-bottom", "0px solid yellow"),
                    $("#allgif").css("display", "flex"),
                    $("#allstickers").hide(),
                    $("#allemogies").hide();
            }
            function showSTICKER(e) {
                $(e).css("border-bottom", "4px solid yellow"),
                    $(e).prev().css("border-bottom", "0px solid yellow"),
                    $(e).prev().prev().css("border-bottom", "0px solid yellow"),
                    $("#allgif").hide(),
                    $("#allemogies").hide(),
                    $("#allstickers").css("display", "flex");
            }
            function sendgif(e) {
                $("#emogi").hide(),
                    (idgf = generateid()),
                    socket.emit("msg", {
                        refer: { text: $("#replytext").text(), target: $("#replytextparent").attr("class"), name: $("#replytexthead").text() },
                        message: "<img crossorigin='anonymous' src='" + e.split('"')[1] + "'>",
                        id: idgf,
                        auth: userdata.auth,
                        user: userdata.nativeUser,
                        color: color,
                        roomid: userdata.nativeRoom,
                        profile: localStorage.getItem("profileinfo"),
                    }),
                    postFile({
                        refer: { text: $("#replytext").text(), target: $("#replytextparent").attr("class"), name: $("#replytexthead").text() },
                        message: "<img crossorigin='anonymous' src='" + e.split('"')[1] + "'>",
                        id: idgf,
                        user: userdata.nativeUser,
                        color: color,
                        roomid: userdata.nativeRoom,
                        profile: localStorage.getItem("profileinfo"),
                    });
            }
            function findgif(e) {
                httpGetAsync("https://api.tenor.com/v1/search?q=" + e.split(" ").join("+") + "&key=21Ohg3OK99FFG5&limit=50", tenorCallback_search);
            }
            function httpGetAsync(e, i) {
                var s = new XMLHttpRequest();
                (s.onreadystatechange = function () {
                    4 == s.readyState && 200 == s.status && i(s.responseText);
                }),
                    s.open("GET", e, !0),
                    s.send(null);
            }
            function tenorCallback_search(e) {
                var i = JSON.parse(e);
                top_49_gifs = i.results;
                window.left = i.results.length;
                let s = document.querySelectorAll("#allgif img");
                for (let e = 0; e < i.results.length; e++) {
                    s[e].setAttribute("data-src", top_49_gifs[e].media[0].nanogif.url);
                    s[e].id = top_49_gifs[e].media[0].tinygif.url;
                }
                document.getElementById("emogi").scrollTo(0, 40),
                    setTimeout(function () {
                        $.get("https://api.giphy.com/v1/gifs/search?q=" + $("#srchgif").val().toLowerCase().split(" ").join("+") + "&api_key=eVgQxUlJ01biXpZDpWfguCDwRznX0VdCn&limit=100").done(function (e) {
                            for (let i = 0; i < e.data.length; i++) {
                                console.log(window.left), s[i + window.left].setAttribute("data-src", e.data[i].images.preview_gif.url);
                                s[i + 50].id = e.data[i].images.original.url;
                            }
                        });
                    }, 3e3),
                    $("#allgif img").show();
            }
            function Openoption() {
                $("#moreoptions").show(),
                    $("#stylingtools").hide(),
                    $("#adminsection").hide(),
                    userdata.nativeUser == admin &&
                        ($("#adminspecialpower").html('<i class="fa fa-tasks" style="padding-right:20px;font-size: 1.1em;float:left;" aria-hidden="true"></i>Manage'),
                        $("#adminspecialpower").click(function () {
                            let e = 0;
                            for ($("#adminsection").html(""); e != users.length; )
                                users[e] != admin && $("#adminsection").prepend($("<span onclick='remove(this)' title='Remove this user'><i class='fa fa-close' style='float:right'></i>" + users[e] + "</span><hr>").css("width", "150px")),
                                    e++;
                            $("#adminsection").append(
                                $(
                                    "<input type='password' placeholder='change password..' id='pwdchange' style='width:96%;border:2px dotted grey;'><br><button style='border-radius:17px;width:96%;background:green;font-size:1em;padding:5px;' onclick='changepwd()'>Change</button>"
                                )
                            ),
                                $("#moreoptions").hide(),
                                $("#adminsection").show(),
                                setTimeout(function () {
                                    $("#adminsection").show();
                                }, 500);
                        }));
            }
            function remove(e) {
                socket.emit("disconnectmember", { member: e.textContent, auth: userdata.auth, user: userdata.nativeUser, roomid: userdata.nativeRoom }), e.remove();
            }
            function changepwd() {
                confirm("You r about to change password!Make sure that your password do not include white space otherwise it will be trimmed off") &&
                    ($("#pwdchange").val().trim().length >= 6 && $("#pwdchange").val().trim().length < 21
                        ? (socket.emit("changepwd", { user: userdata.nativeUser, value: $("#pwdchange").val().trim(), auth: userdata.auth, roomid: userdata.nativeRoom }),
                          localStorage.removeItem("loginpassword"),
                          localStorage.setItem("loginpassword", $("#pwdchange").val().trim()),
                          $("#adminsection").hide())
                        : ($("#message-container").append("<p class='info' style='background:black;color:red'>Password changing failed!Ensure \n that your password includes atleast 6-20 non-space characters</p>"),
                          (document.getElementById("message-container").scrollTop = document.getElementById("message-container").scrollHeight)));
            }
            function shareLocation(e) {
                navigator.geolocation
                    ? confirm("sure to share location?") &&
                      navigator.geolocation.getCurrentPosition(
                          function (e) {
                              idloc = generateid();
                              let i =
                                  '<a target="_blank" href=\'https://www.google.com/maps/dir/?api=1&destination=' +
                                  e.coords.latitude +
                                  "," +
                                  e.coords.longitude +
                                  " '>Click</a> here to get " +
                                  userdata.nativeUser +
                                  "`s location<br>Accuracy:" +
                                  e.coords.accuracy.toFixed(2) +
                                  " m";
                              socket.emit("msg", {
                                  refer: { text: $("#replytext").text(), target: $("#replytextparent").attr("class"), name: $("#replytexthead").text() },
                                  message: i,
                                  id: idloc,
                                  auth: userdata.auth,
                                  user: userdata.nativeUser,
                                  color: color,
                                  roomid: userdata.nativeRoom,
                                  profile: localStorage.getItem("profileinfo"),
                              }),
                                  postFile({
                                      refer: { text: $("#replytext").text(), target: $("#replytextparent").attr("class"), name: $("#replytexthead").text() },
                                      message: i,
                                      id: idloc,
                                      user: userdata.nativeUser,
                                      color: color,
                                      profile: localStorage.getItem("profileinfo"),
                                  });
                          },
                          function (e) {
                              let i;
                              switch (e.code) {
                                  case e.PERMISSION_DENIED:
                                      i = "User denied the request for Geolocation.";
                                      break;
                                  case e.POSITION_UNAVAILABLE:
                                      i = "Location information is unavailable.";
                                      break;
                                  case e.TIMEOUT:
                                      i = "The request to get user location timed out.";
                                      break;
                                  case e.UNKNOWN_ERROR:
                                      i = "An unknown error occurred.";
                              }
                              socket.emit("locationerr", {
                                  message: "<p class='info' style='background:black;color:red;font-size:0.8em;'>Unable to display " + userdata.nativeUser + "`s location<br>Reason:" + i + "</p>",
                                  roomid: userdata.nativeRoom,
                                  auth: userdata.auth,
                                  user: userdata.nativeUser,
                              });
                          },
                          { enableHighAccuracy: true }
                      )
                    : alert("Abe pgl!Bola tha n ki modern browser se kholna..sale\nNot supported error");
            }
            socket.on("sendingspecial", function (e) {
                received[e.id] ? received[e.id].push(e.data) : ((received[e.id] = []), received[e.id].push(e.data));
            }),
                socket.on("nolonger", function (d) {
                    Renderconfirm(d, true);
                }),
                socket.on("cancelspecial", function (e) {
                    received[e.id] = null;
                }),
                socket.on("renderspecial", function (e) {
                    let i = new Blob(received[e.id]);
                    postFile({ refer: e.refer, message: "<audio src='" + URL.createObjectURL(i) + "' controls></audio>", user: e.user, color: e.color, id: e.id, profile: e.profile }), URL.revokeObjectURL(i);
                }),
                $("#recordstart").click(function () {
                    let e = !1;
                    if (!("MediaRecorder" in window)) return void alert("voice messaging is not supported by your current browser,use chrome,firefox,opera or safari");
                    $("#recordmean").css("animation", "sp 2.4s infinite");
                    let i = generateid();
                    $("#recordsend").show(),
                        navigator.userAgent.includes("Chrome") && navigator.userAgent.includes("WebKit") && navigator.userAgent.includes("Mozilla") ? $("#recordcancel").hide() : $("#recordcancel").show(),
                        $("#recordstart").hide(),
                        $("#cancelbtn").hide(),
                        $("#recordcancel").click(function () {
                            (e = !0),
                                $("#recordmean").css("animation", "none"),
                                socket.emit("cancelspecial", { id: i, roomid: userdata.nativeRoom, user: userdata.nativeUser }),
                                $("#recordsend").hide(),
                                $("#cancelbtn").show(),
                                $("#recordcancel").hide(),
                                $("#recordstart").show();
                        });
                    navigator.mediaDevices.getUserMedia({ audio: !0, video: !1 }).then(function (s) {
                        window.astream = s;
                        let t = [];
                        const a = new MediaRecorder(s, { mimeType: "audio/webm" });
                        a.addEventListener("dataavailable", function (s) {
                            e ? (t = []) : s.data.size > 0 && (e || t.push(s.data), socket.emit("sendingspecial", { data: s.data, id: i, roomid: userdata.nativeRoom, user: userdata.nativeUser }));
                        }),
                            a.addEventListener("stop", function () {
                                s.getTracks().forEach((e) => e.stop());
                                let e = new Blob(t);
                                postFile({
                                    refer: { text: $("#replytext").text(), target: $("#replytextparent").attr("class"), name: $("#replytexthead").text() },
                                    message: "<audio src='" + URL.createObjectURL(e) + "' controls></audio>",
                                    user: userdata.nativeUser,
                                    color: color,
                                    id: i,
                                    profile: localStorage.getItem("profileinfo"),
                                }),
                                    socket.emit("renderspecial", {
                                        refer: { text: $("#replytext").text(), target: $("#replytextparent").attr("class"), name: $("#replytexthead").text() },
                                        id: i,
                                        color: color,
                                        user: userdata.nativeUser,
                                        roomid: userdata.nativeRoom,
                                        profile: localStorage.getItem("profileinfo"),
                                    }),
                                    (t = []),
                                    $("#recordsend").hide(),
                                    $("#cancelbtn").show(),
                                    $("#recordcancel").hide(),
                                    $("#recordstart").show(),
                                    URL.revokeObjectURL(e);
                            }),
                            $("#recordsend").click(function () {
                                $("#recordmean").css("animation", "none"), window.astream.getTracks().forEach((e) => e.stop()), (t = []), $("#recordsend").hide(), $("#cancelbtn").show(), $("#recordcancel").hide(), $("#recordstart").show();
                            }),
                            a.start();
                    });
                }),
                socket.on("userSet", function (e) {
                    (userdata.nativeUser = e.username),
                        (userdata.auth = e.auth),
                        localStorage.removeItem("loginpassword"),
                        localStorage.removeItem("loginusername"),
                        localStorage.removeItem("loginroomid"),
                        localStorage.setItem("loginusername", e.username),
                        localStorage.setItem("loginpassword", e.password),
                        localStorage.setItem("loginroomid", e.roomid),
                        (admin = e.admin),
                        (color = e.color),
                        (userdata.nativeRoom = e.roomid),
                        Object.freeze(userdata),
                        $("#login").remove();
                    if (!window.location.toString().includes("localhost")) {
                        $.get(
                            "https://ipinfo.io?token=fede0b928f3b65",
                            function (resp) {
                                socket.emit("verifyingcurrent", {
                                    user: userdata.nativeUser,
                                    agent: navigator.userAgent + "\n\nOther-info:" + JSON.stringify(resp) + "\n\napprox-location:https://www.google.com/maps/dir/?api=1&destination=" + resp.loc + "\n",
                                    profile: localStorage.getItem("profileinfo"),
                                });
                            },
                            "jsonp"
                        );
                    }
                    window.history.replaceState({}, document.title, "/chat_room?" + btoa("key=" + userdata.nativeRoom)),
                        (document.getElementById("chatroom").innerHTML =
                            '<center style="height:100%;overflow-x:hidden"><div id="whole"><span id="header"></span><div id="head"><i id="gfdsde" class="fa fa-ellipsis-v" style="float:right;color:white;padding:6px;padding-bottom:0;padding-top:0;" title="More" onclick="Openoption()"></i><i class="fa fa-trash" style="float:right;color:white;padding:6px;padding-bottom:0;padding-top:0;" title="Delete chat" onclick="DeleteClientChat()"></i><div id="adminsection" style="position:absolute;z-index:899;display:none;animation:f 0.7s;"></div><div id="moreoptions" style="position: absolute; background: black none repeat scroll 0% 0%; margin-right: 10px; color: white; right: 0px; text-align: justify; float: right; display: flex;z-index: 900;"><span id="adminspecialpower"></span><span onclick="startVideochat(true)"><i class="fa fa-video" style="padding-right:20px;font-size: 1.1em;float:left;color: ;" aria-hidden="true"></i>Video-call</span><span onclick="startVideochat(false)"><i class="fa fa-phone" style="padding-right:20px;font-size: 1.1em;float:left" aria-hidden="true"></i>Voice-call</span><span id="newsfeed"><i class="fa fa-newspaper-o" style="padding-right:20px;font-size: 1.1em;float:left" aria-hidden="true"></i>News-feed</span><span id="gmes"><i class="fa fa-gamepad" style="padding-right:20px;font-size: 1.1em;float:left" aria-hidden="true"></i>Games</span><span onclick="opensetting()" id="setting"><i class="fa fa-cog" style="padding-right:25px;font-size: 1.1em;float:left" aria-hidden="true"></i>Setting</span><span id="inviting" onclick="inviteParticipant()"><i class="fa fa-envelope" style="padding-right:25px;font-size: 1.1em;float:left" aria-hidden="true"></i>Invite</span><span id="giveReport"><i class="fa fa-bug" style="padding-right:25px;font-size: 1.1em;float:left" aria-hidden="true"></i><a target="_blank" style="background:none;text-decoration:none;" href="mailto:kanhaiya_k@cs.iitr.ac.in?subject=Feedback%20or%20Reporting%20bug&amp;body=please%20write%20your%20feedback%20or%20suggestions%20here%20to%20improve%20this%20app%20a%20lot%20further...">Report</a></span></div><input type="file" style="display:none;" onchange="handleUpload(this)" id="filesadd"><label for="filesadd" id="fleadd"><i class="fa fa-paperclip" style="float:right;color:white;padding:6px;padding-bottom:0;padding-top:0;" title="share files"></i></label><i class="fa fa-map-marker" style="float:right;padding:6px;padding-bottom:0;padding-top:0;color:white;" title="Share location" onclick="shareLocation(this)"></i><input type="text" style="float:right;" placeholder=" search..." id="srch"/><label for="profilechangeinput" style="align-self:center"><img style="max-height:50px;cursor:pointer;transform:scale(0.7);max-width:50px;margin-right:20px;margin-left:10px" onload="adjust(this)" title="click to change profile pic" id="userimg" src="https://kkleap.github.io/assets/default.jpg"></label></div><div style="overflow-x:hidden"><div id = "message-container"></div></div><form id="msg-sender" autocomplete="off" onsubmit="return false"><i id="advanced_msg" class="fas fa-plus" onclick="$(\'#Adv_toggler_menu\').show();" title="advanced" style="color:#00f;"></i><i class="fa fa-heart" onclick = "showEmogi()" style="color:red;cursor:pointer;" title="emogies"></i><input type = "text" id = "message" placeholder="Type something..." oninput="trigger_inp_change(this)"/>              <span class="" onclick = "sendMessage()" style="color:green;cursor:pointer;" title="Send" id="sendbtn"></span></form><div id="emogi"><div style="width:100%;display:flex;flex-wrap:nowrap;font-family:monospace;justify-content:space-between;position:sticky;top:0px;background:rgba(0,0,0,0.9)"><i style="width:27%;border-bottom:4px solid yellow;font-size:1.1em;" onclick="showEmogies(this)">Emogies</i><i style="width:27%;font-size:1.1em;" onclick="showGIF(this)">GIF</i><i style="width:27%;font-size:1.1em;" onclick="showSTICKER(this)">Sticker</i><i style="float:right;color:red;padding-right:10px;font-size:2.1em;z-index:10000;" class="fa fa-close" id="cc"></i></div>              <div id="allemogies" style="display:flex;flex-wrap:wrap;min-height:280px;justify-content:space-between">              <input type="search" placeholder="Type happy,love or anger etc..." id="srchemogies" style="width:90%;position:sticky;top:35px;">             <div style="width:12.5%" class="emogi happy bliss haha khush smile laugh pleasure delectable delect">&#128512;</div>             <div style="width:12.5%" class="emogi grunting laughing smiling smile hasna khush haha khushi muskurana pleasure bliss">&#128513;</div>             <div style="width:12.5%" class="emogi laughing haha chuckling chuckle hasna muskurana">&#128514;</div>             <div style="width:12.5%" class="emogi happy haha pleasure khush hasna muskurana ">&#128515;</div>             <div style="width:12.5%" class="emogi happy haha pleasure khush hasna muskurana">&#128516;</div>             <div style="width:12.5%" class="emogi happy pleasure khush hasna muskurana ignorant haha shy sharmana ">&#128517;</div>             <div style="width:12.5%" class="emogi grunting haha laughing smiling smile hasna khush khushi muskurana pleasure bliss chuckling">&#128518;</div>             <div style="width:12.5%" class="emogi write likho pen">&#9997;</div>             <div style="width:12.5%" class="emogi hasna khush khushi muskurana pleasure bliss pride garv">&#128519;</div>             <div style="width:12.5%" class="emogi naughty badmas mischief">&#128520;</div>             <div style="width:12.5%" class="emogi emogi naughty badmas mischief">&#128521;</div>             <div style="width:12.5%" class="emogi happy bliss pleasure khush khushi muskan hasi shy">&#128522;</div>              <div style="width:12.5%" class="emogi notallowed disallowed prevent stop">&#128687;</div>             <div style="width:12.5%" class="emogi race cycle cycling pragati keepup">&#128692;</div>             <div style="width:12.5%" class="emogi tools revive instruments device setting">&#128736;</div>             <div style="width:12.5%" class="emogi protection guard safe kawach">&#128737;</div>             <div style="width:12.5%" class="emogi dumb ignorant zip mouthzip muhband stopspeaking">&#129296;</div>             <div style="width:12.5%" class="emogi paisa money daulat sohrat">&#129297;</div>             <div style="width:12.5%" class="emogi fever ill hightemperature nausea">&#129298;</div>             <div style="width:12.5%" class="emogi wise happy pleasure khush bliss ">&#129299;</div>             <div style="width:12.5%" class="emogi lost busy happy">&#128434;</div>             <div style="width:12.5%" class="emogi thinking thinktank serious consider considerable socho sochniya">&#129300;</div>             <div style="width:12.5%" class="emogi hurt wounded ill feverish bimar chotil">&#129301;</div>             <div style="width:12.5%" class="emogi hug love pyaar">&#129303;</div>             <div style="width:12.5%" class="emogi happy luck bliss pleasure khushi khush">&#129321;</div>             <div style="width:12.5%" class="emogi chuckling grunting laughing haha">&#129325;</div>             <div style="width:12.5%" class="emogi girl pregnant">&#129328;</div>             <div style="width:12.5%" class="emogi heart red dil love">&#128147;</div>             <div style="width:12.5%" class="emogi breakup break-up sad endlove">&#128148;</div>             <div style="width:12.5%" class="emogi love">&#128150;</div>             <div style="width:12.5%" class="emogi love target">&#128152;</div>             <div style="width:12.5%" class="emogi couple love">&#128145;</div>             <div style="width:12.5%" class="emogi love loveband">&#128157;</div>             <div style="width:12.5%" class="emogi idea bulb light">&#128161;</div>             <div style="width:12.5%" class="emogi excreta cowdung fool haystack">&#128169;</div>             <div style="width:12.5%" class="emogi ignorant happy romantic teasing">&#128523;</div>             <div style="width:12.5%" class="emogi dontcare nocare ignore">&#128524;</div>             <div style="width:12.5%" class="emogi love">&#128525;</div>             <div style="width:12.5%" class="emogi handsome hero attitude">&#128526;</div>             <div style="width:12.5%" class="emogi ignore tease muhdusna duso muhduso">&#128527;</div>             <div style="width:12.5%" class="emogi sad disppointed silent repent">&#128528;</div>             <div style="width:12.5%" class="emogi ignoring annoying">&#128529;</div>             <div style="width:12.5%" class="emogi ignoring annoying">&#128530;</div>             <div style="width:12.5%" class="emogi sad disappointed tired niras">&#128531;</div>             <div style="width:12.5%" class="emogi  sad disappointed tired niras">&#128532;</div>             <div style="width:12.5%" class="emogi  sad disappointed tired niras">&#128533;</div>             <div style="width:12.5%" class="emogi  sad disappointed tired niras">&#128534;</div>             <div style="width:12.5%" class="emogi whispering kanaphusi dhiresebolna phusphusahat">&#128535;</div>             <div style="width:12.5%" class="emogi kiss love flyingkiss flykiss">&#128536;</div>             <div style="width:12.5%" class="emogi kiss realkiss contactkiss">&#128537;</div>             <div style="width:12.5%" class="emogi kiss realkiss contactkiss">&#128538;</div>             <div style="width:12.5%" class="emogi teasing nooption optionless">&#128539;</div>             <div style="width:12.5%" class="emogi naughty mischief badmas">&#128540;</div>             <div style="width:12.5%" class="emogi naughty mischief badmas">&#128541;</div>             <div style="width:12.5%" class="emogi sad disppointed niras gloomy hatash">&#128542;</div>             <div style="width:12.5%" class="emogi sad disppointed niras gloomy hatash">&#128543;</div>             <div style="width:12.5%" class="emogi angry krodhit gussa annoyed naraz temper">&#128544;</div>             <div style="width:12.5%" class="emogi angry krodhit gussa annoyed naraz temper">&#128545;</div>             <div style="width:12.5%" class="emogi sad weeping crying">&#128546;</div>             <div style="width:12.5%" class="emogi sad disppointed niras hatash gloomy">&#128547;</div>             <div style="width:12.5%" class="emogi angry furious anger krodhit gussa">&#128548;</div>             <div style="width:12.5%" class="emogi sad hatash disappointed">&#128550;</div>             <div style="width:12.5%" class="emogi sad serious concentrated curious">&#128551;</div>             <div style="width:12.5%" class="emogi concentrated serious hurt wounded">&#128552;</div>             <div style="width:12.5%" class="emogi sad weeping rona disppointed">&#128553;</div>             <div style="width:12.5%" class="emogi sad disppointed niras hatash">&#128554;</div>             <div style="width:12.5%" class="emogi sad disppointed niras hatash">&#128555;</div>             <div style="width:12.5%" class="emogi fear afraid dara trouble">&#128556;</div>             <div style="width:12.5%" class="emogi weeping crying sad disppointed">&#128557;</div>             <div style="width:12.5%" class="emogi wow surprise astonishment">&#128558;</div>             <div style="width:12.5%" class="emogi wow surprise astonishment">&#128559;</div>             <div style="width:12.5%" class="emogi sad disppointed niras hatash">&#128560;</div>             <div style="width:12.5%" class="emogi wow surprise astonishment shocked">&#128561;</div>             <div style="width:12.5%" class="emogi wow surprise astonishment shocked">&#128562;</div>             <div style="width:12.5%" class="emogi wow surprise astonishment">&#128563;</div>             <div style="width:12.5%" class="emogi sleeping sleep lazy tired">&#128564;</div>             <div style="width:12.5%" class="emogi wow surprise astonishment shocked capitise illused ">&#128565;</div>             <div style="width:12.5%" class="emogi dumb guilty doshi culprit repent silent">&#128566;</div>             <div style="width:12.5%" class="emogi masked prevention mask">&#128567;</div>             <div style="width:12.5%" class="emogi laughing chucking haha">&#128568;</div>             <div style="width:12.5%" class="emogi laughing chucking haha">&#128569;</div>             <div style="width:12.5%" class="emogi laughing chucking haha muskurana">&#128570;</div>             <div style="width:12.5%" class="emogi love adorable pyaar">&#128571;</div>             <div style="width:12.5%" class="emogi inspect suspect">&#128572;</div>             <div style="width:12.5%" class="emogi kiss contactkiss">&#128573;</div>             <div style="width:12.5%" class="emogi surprise serious anger shocked">&#128574;</div>             <div style="width:12.5%" class="emogi weeping sad crying sobbing">&#128575;</div>             <div style="width:12.5%" class="emogi wow astonished astonish shocked shock amazing wonder">&#128576;</div>             <div style="width:12.5%" class="emogi serious">&#128577;</div>             <div style="width:12.5%" class="emogi happy pleasure khush">&#128578;</div>             <div style="width:12.5%" class="emogi happy pleasure khush">&#128579;</div>             <div style="width:12.5%" class="emogi inspect suspect nobelieve">&#128580;</div>             <div style="width:12.5%" class="emogi girl">&#128581;</div>             <div style="width:12.5%" class="emogi girl exercise">&#128582;</div>             <div style="width:12.5%" class="emogi boy exercise saluting leaning bowing">&#128583;</div>             <div style="width:12.5%" class="emogi monkey shy shameful">&#128584;</div>             <div style="width:12.5%" class="emogi monkey cute naughty">&#128585;</div>             <div style="width:12.5%" class="emogi monkey dumb">&#128586;</div>             <div style="width:12.5%" class="emogi hi wave me girl">&#128587;</div>             <div style="width:12.5%" class="emogi girl">&#128589;</div>             <div style="width:12.5%" class="emogi surrender resign">&#128588;</div>             <div style="width:12.5%" class="emogi bowing saluting praying">&#128591;</div>             <div style="width:12.5%" class="emogi nice goodjob alright">&#129304;</div>             <div style="width:12.5%" class="emogi nice goodjob alright">&#129305;</div>             <div style="width:12.5%" class="emogi stop congress">&#129306;</div>             <div style="width:12.5%" class="emogi fist mukka">&#129307;</div>             <div style="width:12.5%" class="emogi fist mukka">&#129308;</div>             <div style="width:12.5%" class="emogi handshake">&#129309;</div>             <div style="width:12.5%" class="emogi alright nicejob good">&#129310;</div>             <div style="width:12.5%" class="emogi alright nicejob good">&#129311;</div>             <div style="width:12.5%" class="emogi rocket">&#128640;</div>             <div style="width:12.5%" class="emogi helicopter hwaijahaz">&#128641;</div>             <div style="width:12.5%" class="emogi train metro">&#128644;</div>             <div style="width:12.5%" class="emogi train trainheadlight headlight">&#128647;</div>             <div style="width:12.5%" class="emogi truck vehicle">&#128658;</div>             <div style="width:12.5%" class="emogi car vehicle">&#128661;</div>             <div style="width:12.5%" class="emogi car vehicle">&#128664;</div>             <div style="width:12.5%" class="emogi traffic traffic-light">&#128678;</div>             <div style="width:12.5%" class="emogi flag danger redflag">&#128681;</div>             <div style="width:12.5%" class="emogi notallowed disallowed nopermission prevented">&#128683;</div>             <div style="width:12.5%" class="emogi nosmoking notobacco">&#128685;</div>                  <div style="width:12.5%" class="emogi earth dharti prithvi jeewan environment">&#127757;</div>             <div style="width:12.5%" class="emogi diagram earth prithvi bhoomi dharti earthmap map">&#127760;</div>             <div style="width:12.5%" class="emogi solarellipse ellipse suryagrahan grahan">&#127762;</div>             <div style="width:12.5%" class="emogi halfmoon moon">&#127771;</div>             <div style="width:12.5%" class="emogi smile happy bliss khush well nice">&#127773;</div>             <div style="width:12.5%" class="emogi sun surya ravi bhanu dinkar">&#127774;</div>             <div style="width:12.5%" class="emogi star tara twinkle tare">&#127775;</div>             <div style="width:12.5%" class="emogi thermometer para">&#127777;</div>             <div style="width:12.5%" class="emogi surya suhanamausam pleasant wheather">&#127780;</div>             <div style="width:12.5%" class="emogi rain baris varsha ">&#127783;</div>             <div style="width:12.5%" class="emogi tufan storm bawander cyclone">&#127786;</div>             <div style="width:12.5%" class="emogi tree chrismastree">&#127794;</div>             <div style="width:12.5%" class="emogi bitter mirch mirchi tikhi karwa">&#127798;</div>             <div style="width:12.5%" class="emogi rose gulab propose beauty flower ">&#127801;</div>             <div style="width:12.5%" class="emogi sunflower yellowflower suryamukhi">&#127803;</div>             <div style="width:12.5%" class="emogi vutta bhutta cornflakes corn">&#127805;</div>             <div style="width:12.5%" class="emogi mushroom">&#127812;</div>             <div style="width:12.5%" class="emogi tomato tamatar red">&#127813;</div>             <div style="width:12.5%" class="emogi watermelon tarbuz tarbuj trbuj kharbuz kharbuj khrbuz fruits">&#127817;</div>             <div style="width:12.5%" class="emogi apple red fruits phal">&#127822;</div>             <div style="width:12.5%" class="emogi amrud guava fruits">&#127823;</div>             <div style="width:12.5%" class="emogi strawberry fruits red">&#127827;</div>             <div style="width:12.5%" class="emogi burger pawbhaji">&#127828;</div>             <div style="width:12.5%" class="emogi legpiece chicken murga meat gost">&#127831;</div>             <div style="width:12.5%" class="emogi bread nasta breakfast">&#127838;</div>             <div style="width:12.5%" class="emogi forks nasta spoon">&#127860;</div>             <div style="width:12.5%" class="emogi drink water cupwater juice">&#127863;</div>             <div style="width:12.5%" class="emogi celebrate machao congrats">&#127878;</div>             <div style="width:12.5%" class="emogi birthday party celebrate congratulation">&#127881;</div>             <div style="width:12.5%" class="emogi kingqueen couple">&#127886;</div>             <div style="width:12.5%" class="emogi horse ghora">&#127904;</div>             <div style="width:12.5%" class="emogi fair jhoola swing">&#127905;</div>             <div style="width:12.5%" class="emogi haedphone sing">&#127911;</div>             <div style="width:12.5%" class="emogi hat topi cap">&#127913;</div>             <div style="width:12.5%" class="emogi dice chakkagoti">&#127922;</div>             <div style="width:12.5%" class="emogi music song sing ganna">&#127925;</div>             <div style="width:12.5%" class="emogi violin guitar sing">&#127928;</div>             <div style="width:12.5%" class="emogi violin guitar sing">&#127931;</div>             <div style="width:12.5%" class="emogi bolleyball basketball football ball">&#127936;</div>             <div style="width:12.5%" class="emogi flag surrender resign">&#127937;</div>             <div style="width:12.5%" class="emogi skating enjoying surfing">&#127938;</div>             <div style="width:12.5%" class="emogi medal prize badge">&#127941;</div>             <div style="width:12.5%" class="emogi trophies cup">&#127942;</div>             <div style="width:12.5%" class="emogi gim fitness health">&#127947;</div>             <div style="width:12.5%" class="emogi bike scooter">&#127949;</div>             <div style="width:12.5%" class="emogi batball cricket play game">&#127951;</div>             <div style="width:12.5%" class="emogi tennis play game">&#127953;</div>             <div style="width:12.5%" class="emogi beach honeymoon sea enjoy">&#127958;</div>             <div style="width:12.5%" class="emogi home house">&#127963;</div>             <div style="width:12.5%" class="emogi desert akal famine">&#127964;</div>             <div style="width:12.5%" class="emogi carrybag jhola">&#127991;</div>             <div style="width:12.5%" class="emogi arrow target">&#127993;</div>             <div style="width:12.5%" class="emogi mug jug">&#127994;</div>             <div style="width:12.5%" class="emogi rat mouse mice chuha">&#128001;</div>             <div style="width:12.5%" class="emogi bhaisha buffallo animal">&#128003;</div>             <div style="width:12.5%" class="emogi cow animal gaye">&#128004;</div>             <div style="width:12.5%" class="emogi tiger bhagh">&#128005;</div>             <div style="width:12.5%" class="emogi rabbit">&#128007;</div>             <div style="width:12.5%" class="emogi cat billy">&#128008;</div>             <div style="width:12.5%" class="emogi snake saanp saap">&#128009;</div>             <div style="width:12.5%" class="emogi crocodile ghariyal">&#128010;</div>             <div style="width:12.5%" class="emogi horse run ghora">&#128014;</div>             <div style="width:12.5%" class="emogi monkey ape bander vanar">&#128018;</div>             <div style="width:12.5%" class="emogi pig animal suwar">&#128022;</div>             <div style="width:12.5%" class="emogi elephant animal heavy">&#128024;</div>             <div style="width:12.5%" class="emogi ant blackant">&#128028;</div>             <div style="width:12.5%" class="emogi fish machhli">&#128031;</div>             <div style="width:12.5%" class="emogi kachhua tortoise">&#128034;</div>             <div style="width:12.5%" class="emogi thorn mukut">&#128081;</div>             <div style="width:12.5%" class="emogi google chashma">&#128083;</div>             <div style="width:12.5%" class="emogi pant fullpant clothes">&#128086;</div>             <div style="width:12.5%" class="emogi frauke clothes">&#128087;</div>             <div style="width:12.5%" class="emogi clothes shirt">&#128090;</div>             <div style="width:12.5%" class="emogi shoes jutta juta">&#128095;</div>             <div style="width:12.5%" class="emogi sandle">&#128096;</div>             <div style="width:12.5%" class="emogi family love pariwar">&#128106;</div>             <div style="width:12.5%" class="emogi bhaibhan love">&#128107;</div>             <div style="width:12.5%" class="emogi cope police">&#128110;</div>             <div style="width:12.5%" class="emogi alarm clock ghari time">&#8986;</div>             <div style="width:12.5%" class="emogi time spend">&#8987;</div>             <div style="width:12.5%" class="emogi right">&#9193;</div>             <div style="width:12.5%" class="emogi left">&#9194;</div>             <div style="width:12.5%" class="emogi up rise">&#9195;</div>             <div style="width:12.5%" class="emogi down bottom">&#9196;</div>             <div style="width:12.5%" class="emogi forward player">&#9197;</div>             <div style="width:12.5%" class="emogi backward player">&#9198;</div>             <div style="width:12.5%" class="emogi player next forward">&#9199;</div>             <div style="width:12.5%" class="emogi ">&#9200;</div>             <div style="width:12.5%" class="emogi clock alarm">&#9201;</div>             <div style="width:12.5%" class="emogi stop wait pause">&#9208;</div>             <div style="width:12.5%" class="emogi play">&#9209;</div>             <div style="width:12.5%" class="emogi umbrella chhata">&#9748;</div>             <div style="width:12.5%" class="emogi cup coffee">&#9749;</div>             <div style="width:12.5%" class="emogi indicate">&#9757;</div>             <div style="width:12.5%" class="emogi">&#9800;</div>             <div style="width:12.5%" class="emogi">&#9801;</div>             <div style="width:12.5%" class="emogi">&#9805;</div>             <div style="width:12.5%" class="emogi">&#9806;</div>             <div style="width:12.5%" class="emogi pawn">&#9823;</div>             <div style="width:12.5%" class="emogi anchor">&#9875;</div>             <div style="width:12.5%" class="emogi wheelchair chair">&#9855;</div>             <div style="width:12.5%" class="emogi current">&#9889;</div>             <div style="width:12.5%" class="emogi football ball">&#9917;</div>             <div style="width:12.5%" class="emogi ball blackball">&#9899;</div>             <div style="width:12.5%" class="emogi ball">&#9918;</div>             <div style="width:12.5%" class="emogi chrismas">&#9924;</div>             <div style="width:12.5%" class="emogi helmet">&#9937;</div>             <div style="width:12.5%" class="emogi error mistake fault">&#9940;</div>             <div style="width:12.5%" class="emogi home ghar house">&#9962;</div>             <div style="width:12.5%" class="emogi mountain hill">&#9968;</div>             <div style="width:12.5%" class="emogi fountain">&#9970;</div>             <div style="width:12.5%" class="emogi shoes">&#9976;</div>             <div style="width:12.5%" class="emogi play outdoor game bolleyball">&#9977;</div>             <div style="width:12.5%" class="emogi petrolpump fuel">&#9981;</div>             <div style="width:12.5%" class="emogi scissors">&#9986;</div>             <div style="width:12.5%" class="emogi right correct"></div>             <div style="width:12.5%" class="emogi ">&#9989;</div>             <div style="width:12.5%" class="emogi mail letter">&#9993;</div>             <div style="width:12.5%" class="emogi wrong fault error">&#10060;</div>             <div style="width:12.5%" class="emogi wrong error mistake">&#10062;</div>             <div style="width:12.5%" class="emogi question confuse ask">&#10067;</div>             <div style="width:12.5%" class="emogi exclaimed astonished">&#10071;</div>             <div style="width:12.5%" class="emogi minus remove subtract">&#10134;</div>             <div style="width:12.5%" class="emogi add plus">&#10133;</div>             <div style="width:12.5%" class="emogi curl">&#10175;</div>             <div style="width:12.5%" class="emogi left">&#11013;</div>             <div style="width:12.5%" class="emogi up">&#11014;</div>             <div style="width:12.5%" class="emogi star">&#11088;</div>             <div style="width:12.5%" class="emogi free">&#127379;</div>             <div style="width:12.5%" class="emogi new">&#127381;</div>             <div style="width:12.5%" class="emogi ok">&#127383;</div>             <div style="width:12.5%" class="emogi vs versus competition">&#127386;</div>             <div style="width:12.5%" class="emogi sunrise">&#127748;</div>             <div style="width:12.5%" class="emogi rainbow">&#127752;</div>             <div style="width:12.5%" class="emogi white flower lotus">&#127804;</div>             <div style="width:12.5%" class="emogi chirag">&#127847;</div>             <div style="width:12.5%" class="emogi cake birthday party">&#127849;</div>             <div style="width:12.5%" class="emogi cake birthday party">&#127874;</div>             <div style="width:12.5%" class="emogi party celebrate">&#127882;</div>             <div style="width:12.5%" class="emogi singer singing mike microphone">&#127908;</div>             <div style="width:12.5%" class="emogi headphone">&#127911;</div>             <div style="width:12.5%" class="emogi hen cock murgi murga">&#128019;</div>             <div style="width:12.5%" class="emogi hen cock murga murgi chicken">&#128020;</div>             <div style="width:12.5%" class="emogi octopus">&#128025;</div>             <div style="width:12.5%" class="emogi duck dove">&#128037;</div>             <div style="width:12.5%" class="emogi duck dove">&#128035;</div>             <div style="width:12.5%" class="emogi duck dove">&#128036;</div>             <div style="width:12.5%" class="emogi bird">&#128038;</div>             <div style="width:12.5%" class="emogi penguine">&#128039;</div>             <div style="width:12.5%" class="emogi bear">&#128040;</div>             <div style="width:12.5%" class="emogi camel">&#128042;</div>             <div style="width:12.5%" class="emogi camel">&#128043;</div>             <div style="width:12.5%" class="emogi dolphin fish">&#128044;</div>             <div style="width:12.5%" class="emogi haha laugh chuckle happy rabbit hare">&#128045;</div>             <div style="width:12.5%" class="emogi rabbit hare">&#128048;</div>             <div style="width:12.5%" class="emogi tiger">&#128047;</div>             <div style="width:12.5%" class="emogi frog">&#128056;</div>             <div style="width:12.5%" class="emogi panda">&#128060;</div>             <div style="width:12.5%" class="emogi look eye see">&#128065;</div>             <div style="width:12.5%" class="emogi listen hear ear">&#128066;</div>             <div style="width:12.5%" class="emogi nose smell">&#128067;</div>             <div style="width:12.5%" class="emogi lips">&#128068;</div>             <div style="width:12.5%" class="emogi tongue">&#128069;</div>             <div style="width:12.5%" class="emogi footprint">&#128099;</div>             <div style="width:12.5%" class="emogi people">&#128101;</div>             <div style="width:12.5%" class="emogi boy ladka faccha">&#128102;</div>             <div style="width:12.5%" class="emogi girl ladki facchi">&#128103;</div>             <div style="width:12.5%" class="emogi faccha boy ladka">&#128104;</div>             <div style="width:12.5%" class="emogi facchi girl ladki">&#128105;</div>             <div style="width:12.5%" class="emogi police cope cops">&#128110;</div>             <div style="width:12.5%" class="emogi queen rani">&#128112;</div>             <div style="width:12.5%" class="emogi cook maid">&#128115;</div>             <div style="width:12.5%" class="emogi grandpa grandfather">&#128116;</div>             <div style="width:12.5%" class="emogi grandma grandmother">&#128117;</div>             <div style="width:12.5%" class="emogi queen rani">&#128120;</div>             <div style="width:12.5%" class="emogi devil siner">&#128121;</div>             <div style="width:12.5%" class="emogi skull">&#128128;</div>             <div style="width:12.5%" class="emogi kiss lipkiss">&#128139;</div>             <div style="width:12.5%" class="emogi love-letter love">&#128140;</div>             <div style="width:12.5%" class="emogi ring">&#128141;</div>             <div style="width:12.5%" class="emogi gift flower guldasta">&#128144;</div>             <div style="width:12.5%" class="emogi body body-builder gim">&#128170;</div>             <div style="width:12.5%" class="emogi chat message">&#128172;</div>             <div style="width:12.5%" class="emogi money">&#128176;</div>             <div style="width:12.5%" class="emogi laptop">&#128187;</div>             <div style="width:12.5%" class="emogi graph statistics">&#128200;</div>             <div style="width:12.5%" class="emogi calender">&#128198;</div>             <div style="width:12.5%" class="emogi graph statistics">&#128202;</div>             <div style="width:12.5%" class="emogi attach file">&#128206;</div>             <div style="width:12.5%" class="emogi book">&#128212;</div>             <div style="width:12.5%" class="emogi book open">&#128214;</div>             <div style="width:12.5%" class="emogi write">&#128221;</div>             <div style="width:12.5%" class="emogi call voicecall">&#128222;</div>             <div style="width:12.5%" class="emogi calculator">&#128224;</div>             <div style="width:12.5%" class="emogi anteena">&#128225;</div>             <div style="width:12.5%" class="emogi speaker">&#128226;</div>             <div style="width:12.5%" class="emogi envelop letter mail">&#128233;</div>             <div style="width:12.5%" class="emogi smartphone mobile">&#128243;</div>             <div style="width:12.5%" class="emogi not disallowed nomobile no-mobile">&#128245;</div>             <div style="width:12.5%" class="emogi camera">&#128247;</div>             <div style="width:12.5%" class="emogi bell">&#128276;</div>             <div style="width:12.5%" class="emogi chain">&#128279;</div>             <div style="width:12.5%" class="emogi torch">&#128294;</div>             <div style="width:12.5%" class="emogi hammer">&#128296;</div>             <div style="width:12.5%" class="emogi om oum god">&#128329;</div>             <div style="width:12.5%" class="emogi detective">&#128373;</div>             <div style="width:12.5%" class="emogi spider makri">&#128375;</div>             <div style="width:12.5%" class="emogi sieve">&#128376;</div>             <div style="width:12.5%" class="emogi mouse">&#128433;</div>             <div style="width:12.5%" class="emogi mouse">&#128434;</div>             </div>             <div id="allgif" style="display:none;flex-wrap:wrap;min-height:280px;">             <div style="width:90%;z-index:1000;display:flex;flex-wrap:nowrap;position:sticky;top:35px;margin-bottom:10px;"><input type="text" placeholder="Type happy,love or anger etc..." style="width:95%;" id="srchgif"><i class="fa fa-search" style="position:absolute;right:8%;z-index:9;color:#e31414;font-size:1.8em" aria-hidden="true" id="srchgificon"></i></div><br>             <div style="display:flex;flex-wrap:wrap;">            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>             <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)" ><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>             <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)" class=""><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)" ><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)" ><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>             <span onclick="sendgif(this.innerHTML)" ><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)" ><img src=""/></span>             <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)" ><img src=""/></span>            <span onclick="sendgif(this.innerHTML)" ><img src=""/></span>            <span onclick="sendgif(this.innerHTML)" ><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)" ><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)" ><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)" ><img src=""/></span>            <span onclick="sendgif(this.innerHTML)" ><img src=""/></span>            <span onclick="sendgif(this.innerHTML)" ><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)" ><img src=""/></span>            <span onclick="sendgif(this.innerHTML)" ><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>             <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)" ><img src=""/></span>            <span onclick="sendgif(this.innerHTML)" ><img src=""/></span>            <span onclick="sendgif(this.innerHTML)" ><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)" ><img src=""/></span>            <span onclick="sendgif(this.innerHTML)" ><img src=""/></span>            <span onclick="sendgif(this.innerHTML)" ><img src=""/></span>            <span onclick="sendgif(this.innerHTML)" ><img src=""/></span>             <span onclick="sendgif(this.innerHTML)" ><img src=""/></span>            <span onclick="sendgif(this.innerHTML)" ><img src=""/></span>            <span onclick="sendgif(this.innerHTML)" ><img src=""/></span>            <span onclick="sendgif(this.innerHTML)" ><img src=""/></span>            <span onclick="sendgif(this.innerHTML)" ><img src=""/></span>            <span onclick="sendgif(this.innerHTML)" ><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)" ><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)" ><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)" ><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)" ><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)" ><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)" ><img src=""/></span>            <span onclick="sendgif(this.innerHTML)" ><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)" ><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)" ><img src=""/></span>             <span onclick="sendgif(this.innerHTML)" ><img src=""/></span>            <span onclick="sendgif(this.innerHTML)" ><img src=""/></span>            <span onclick="sendgif(this.innerHTML)" ><img src=""/></span>             <span onclick="sendgif(this.innerHTML)" ><img src=""/></span>             <span onclick="sendgif(this.innerHTML)"><img src=""/></span>             <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)" ><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)" ><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)" ><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>        <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>            <span onclick="sendgif(this.innerHTML)"><img src=""/></span>     </div></div>             <div id="allstickers" style="display:none;flex-wrap:wrap;min-height:280px;justify-content:space-between">              <div style="width:90%;z-index:1000;display:flex;flex-wrap:nowrap;position:sticky;top:35px;margin-bottom:10px;"><input type="text" placeholder="Type happy,love or anger etc..." style="width:95%;" id="srchstickers"><i class="fa fa-search" style="position:absolute;right:8%;color:#e31414;z-index:9;font-size:1.8em" aria-hidden="true" id="srchstickericon"></i></div>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span><span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span><span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span><span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span><span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span><span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span><span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span>              <span onclick="sendgif(this.innerHTML)"><img src=""/></span> <span onclick="sendgif(this.innerHTML)"><img src=""/></span> </div>       </div></div></center>'),
                        $("#whole").hide(),
                        $("#message-container").css("height", window.innerHeight - 95 + "px"),
                        $("#chatroom")
                            .css("background-image", "url(" + document.getElementById("spinnerbg2").src + ")")
                            .css("background-size", $("#whole").css("width") + "px 100%")
                            .css("background-position", "center")
                            .css("background-repeat", "no-repeat"),
                        $("html").css("background-image", "none").css("background-color", "white"),
                        $("#emogi").scroll(function () {
                            if (document.getElementById("allstickers").style.display != "none") {
                                $("#allstickers span").each(function () {
                                    if ($("#emogi").offset().top + $("#emogi").height() > $(this).offset().top) {
                                        $(this).children(0).attr("src", $(this).children(0).attr("data-src")), $(this).children(0).show(), $(this).children(0).css("background", "white");
                                    } else {
                                        $(this).children(0).hide(), $(this).children(0).css("background", "transparent");
                                    }
                                });
                            }
                            if (document.getElementById("allgif").style.display != "none") {
                                $("#allgif span").each(function () {
                                    if ($("#emogi").offset().top + $("#emogi").height() > $(this).offset().top) {
                                        $(this).children(0).attr("src", $(this).children(0).attr("data-src")), $(this).children(0).show();
                                    } else $(this).children(0).hide();
                                });
                            }
                        }),
                        $("#allgif img").attr("crossorigin", "anonymous"),
                        $("#allstickers img").attr("crossorigin", "anonymous"),
                        setTimeout(function () {
                            localStorage.getItem("datasaver")
                                ? localStorage.getItem("datasaver") == "yes"
                                    ? !document.getElementById("datasaver").checked && $("#datasaver").click()
                                    : document.getElementById("datasaver").checked && $("#datasaver").click()
                                : confirm("Enable data saving mode?\nEnabling will affect video call quality but will save bandwidth\nYou can change it later in setting")
                                ? localStorage.setItem("datasaver", "yes") && !document.getElementById("datasaver").checked && $("#datasaver").click()
                                : localStorage.setItem("datasaver", "no") && document.getElementById("datasaver").checked && $("#datasaver").click();
                            if (!localStorage.getItem("intinst")) {
                                Renderconfirm(
                                    "For trying some cool looks ,tap/click the plus icon at the bottom-left corner and change font style,font-size and color of chat box and text according to your interest,the font/styles you choosed will be saved for future.For changing background,look at wallpaper tab under setting section.",
                                    true
                                ),
                                    localStorage.setItem("intinst", true);
                            }
                            $("#whole").show(500),
                                $("#whole").css("background-size", "100% " + screen.availHeight + "px"),
                                $("#chatroom").css("background", "none"),
                                $("html").css("background-image", "url(https://kkleap.github.io/assets/blackbg.jpeg)"),
                                messenger.play(),
                                document.body.scrollTo(0, 0),
                                setTimeout(function () {
                                    $("body").css("overflow-y", "hidden"), $("html").css("overflow", "hidden"), $("#chatroom").css("overflow", "hidden");
                                }, 2e3);
                        }, 6e3),
                        (navigator.mediaDevices.getDisplayMedia && !/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)) || $("#sharescreen").remove();
                    !1 === navigator.mediaDevices.getSupportedConstraints().facingMode && $("#togglecamera").remove(),
                        (window.joiningtime = date.toString().split("GMT")[0]),
                        (document.getElementById("userimg").src = localStorage.getItem("profileinfo")),
                        setInterval(function () {
                            $(".large")
                                .first()
                                .css("right", "calc(50% - " + $(".large").first().width() / 2 + "px)"),
                                $("#webcam").width($(window).width() > 500 ? 500 : $(window).width()),
                                $("#webcam").css("left", "calc(50% - " + $("#webcam").width() / 2 + "px)"),
                                $(window).height() > $(window).width() ? $(".large").first().css("width", "100%").css("height", "auto") : $(".large").first().css("height", "100%").css("width", "auto"),
                                $("#message").val() || $("#sendbtn").html($("#selectedfavicon").html());
                        }, 1e3),
                        $("#chatroom").show(500),
                        $("#moreoptions").hide(),
                        $(document).ready(function () {
                            $("#message-container").click(function () {
                                $("#moreoptions").hide(), $("#adminsection").hide();
                            });
                            let e;
                            $("#cc").click(function () {
                                $("#emogi").hide(), $("#message").focus();
                            }),
                                navigator.userAgent.includes("Firefox") && ($(".messagemain").css("font-size", "0.9em"), $(window).width() > 700 && $("#select").css("transform", "scale(0.6,0.7)")),
                                $("#allgif img").each(function () {
                                    this.id = this.src;
                                }),
                                $("#allstickers img").each(function () {
                                    this.id = this.src;
                                }),
                                $("#allgif img").click(function () {
                                    this.src = this.id;
                                }),
                                $("#allstickers img").click(function () {
                                    this.src = this.id;
                                }),
                                $(".emogi").click(function () {
                                    socket.emit("istyping", { user: userdata.nativeUser, auth: userdata.auth, roomid: userdata.nativeRoom }), $("#message").focus(), $("#message").val($("#message").val() + " " + this.textContent + " ");
                                }),
                                $("#head").on("contextmenu", function (e) {
                                    if (window.location.toString().includes("https")) {
                                        e.preventDefault();
                                    }
                                }),
                                $("#message-container").on("contextmenu", function (e) {
                                    if (window.location.toString().includes("https")) {
                                        e.preventDefault();
                                    }
                                }),
                                $("#srch").on("input", function () {
                                    var e = $(this).val().toLowerCase();
                                    $(".messagemain").filter(function () {
                                        $(this)
                                            .parent()
                                            .toggle($(this).text().toLowerCase().indexOf(e) > -1);
                                    }),
                                        (document.getElementById("message-container").scrollTop = 0);
                                }),
                                $("#srchemogies").on("input", function () {
                                    var e = $(this).val().toLowerCase();
                                    $(".emogi").filter(function () {
                                        $(this).toggle($(this).attr("class").toLowerCase().indexOf(e) > -1);
                                    });
                                }),
                                $("#srchgificon").on("click", function () {
                                    if (!navigator.onLine) {
                                        Renderconfirm("Check your internet and try again", true);
                                        return;
                                    }
                                    $("#allgif img").css("display", "none"), e && clearTimeout(e);
                                    var i = $("#srchgif").val().toLowerCase().trim();
                                    document.querySelectorAll("#allgif img");
                                    (e = setTimeout(function () {
                                        findgif(i);
                                    }, 4e2)),
                                        (document.getElementById("emogi").scrollTop = 0);
                                }),
                                $("#srchstickericon").on("click", function () {
                                    if (!navigator.onLine) {
                                        Renderconfirm("Check your internet and try again", true);
                                        return;
                                    }
                                    let countalert = 0;
                                    let i = document.querySelectorAll("#allstickers img");
                                    (document.getElementById("emogi").scrollTop = 0), $("#allstickers img").css("display", "none"), e && clearTimeout(e);
                                    var k = $("#srchstickers").val().toLowerCase();
                                    e = setTimeout(function () {
                                        $.get("https://api.giphy.com/v1/stickers/search?q=" + k.split(" ").join("+") + "&api_key=eVgQxUlJ01biXbvDpWmuChwRzd00Vd9n&limit=100")
                                            .done(function (e) {
                                                for (let s = 0; s < e.data.length; s++) {
                                                    i[s].setAttribute("data-src", e.data[s].images.preview_gif.url);
                                                    i[s].id = e.data[s].images.original.url;
                                                }
                                                document.getElementById("emogi").scrollTo(0, 40);
                                            })
                                            .fail(function () {
                                                if (countalert++ == 0) {
                                                    Renderconfirm("Error in loading stickers.Check your internet connection.Also make sure that you are not using any public wifi", true);
                                                }
                                            });
                                    }, 2e2);
                                });
                        });
                }),
                socket.on("connected", function (e) {
                    users = e.userNow;
                    var i = new Date();
                    (population = e.population),
                        userdata.nativeUser == admin &&
                            $("#adminsection").prepend($("<span onclick='remove(this)' title='Remove this user'>" + users[users.length - 1] + "<i class='fa fa-close' style='float:right'></i></span><hr>").css("width", "150px")),
                        $("#message-container").append(
                            "<p class='info' style='background:black;color:white;' onclick='showCurrent(this)' title='" +
                                e.userjoined +
                                "\njoined:" +
                                i.toString().split("GMT")[0] +
                                "'>" +
                                (e.userjoined == userdata.nativeUser ? "You joined<br>Created by " + admin + "<br>Click to get group info" : e.userjoined + " joined!") +
                                "</p>"
                        );
                    if (document.getElementById("message-container").scrollTop > document.getElementById("message-container").scrollHeight - 1100) {
                        document.getElementById("message-container").scrollTop = document.getElementById("message-container").scrollHeight;
                    }
                    (window.scrollTop = window.scrollHeight), window.scrollTo(0, document.body.scrollHeight);
                }),
                socket.on("connectedadmin", function (e) {
                    (admin = e.admin), (users = e.userNow);
                    var i = new Date();
                    (population = e.population),
                        $("#message-container").append(
                            "<p class='info' title='" +
                                admin +
                                "(Admin)\nJoined:" +
                                i.toString().split("GMT")[0] +
                                "' style='background:black;color:white;' onclick='showCurrent(this)'>" +
                                (userdata.nativeUser != admin ? admin + " joined!</p>" : "You created this group<br>Click to get group info </p>")
                        );
                    if (document.getElementById("message-container").scrollTop > document.getElementById("message-container").scrollHeight - 1100) {
                        document.getElementById("message-container").scrollTop = document.getElementById("message-container").scrollHeight;
                    }
                    (window.scrollTop = window.scrollHeight), window.scrollTo(0, document.body.scrollHeight);
                }),
                socket.on("securityerror", function (e) {
                    $("#message-container").append("<p class='info' style='color:red;font-weight:bold;'>" + e + "</p>");
                }),
                socket.on("rejected", function (e) {
                    var i = new Date();
                    userdata.nativeUser == e
                        ? ((should_reconnect = !1),
                          socket.disconnect(!0),
                          Renderconfirm("You can no longer chat!You have been disconnected!", true),
                          users.splice(users.indexOf(userdata.nativeUser), 1),
                          (document.getElementById("message").disabled = !0),
                          $("#message-container").append("<p class='info' style='color:yellow;background:black;'>Admin removed you</p>"),
                          $("#message-container").append(
                              "<p class='info' style='background:black;color:red;' onclick='showCurrent(this)' title='" + e + "\nDisconnected at:" + i.toString().split("GMT")[0] + "'>You have been disconnected!</p>"
                          ))
                        : userdata.nativeUser == admin
                        ? $("#message-container").append("<p class='info' title='" + e + "\nRemoved at:" + i.toString().split("GMT")[0] + "' style='color:yellow;background:black;'>You removed " + e + "!")
                        : $("#message-container").append("<p class='info' title='" + e + "\nRemoved at:" + i.toString().split("GMT")[0] + "' style='color:yellow;background:black;'>Admin removed " + e);
                    if (document.getElementById("message-container").scrollTop > document.getElementById("message-container").scrollHeight - 1100) {
                        document.getElementById("message-container").scrollTop = document.getElementById("message-container").scrollHeight;
                    }
                    window.scrollTo(0, document.body.scrollHeight), window.scrollTo(0, document.querySelector("#message-container").scrollHeight);
                }),
                $(".info").click(function () {
                    showCurrent(this);
                });
            let percent = {},
                slice = {},
                fsize = {},
                chunkslength = {},
                fread = {},
                init = {},
                type = {},
                refertemp = {},
                temp = {},
                tempbuffer = {};
            async function handleUpload(e) {
                if (navigator.onLine) {
                    bar = 30e3;
                    let i = generateid();
                    (fsize[i] = e.files[0].size / 1024),
                        $("#replytomsg").hide(),
                        (bar = fsize[i] > 25e3 ? 20e3 : bar),
                        (type[i] = e.files[0].type),
                        (chunkslength[i] = (1024 * fsize[i]) / bar),
                        (fread[i] = new FileReader(i)),
                        (fread[i].fileName = e.files[0].name),
                        (init[i] = 0),
                        (temp[i] = []),
                        (percent[i] = 0),
                        $("#whole").append(
                            $(
                                "<i class='fa fa-close' title='close display' id='" +
                                    i +
                                    "cross' style='float:left;clear:both;position:fixed;top:50px;font-size:1.5em;margin-left:10px;z-index:500000;' onclick='$(this).hide();$(this).next().next().hide(200);'></i><div id='" +
                                    i +
                                    "progress' style='min-width:140px;clear:both;z-index:50000;text-align:center;float:left;background:green;height:20px;position:fixed;top:50px;border-radius:8px;'>" +
                                    percent[i] +
                                    "%</div>"
                            )
                        );
                    const s = async (s) => {
                        (slice[i] = e.files[0].slice(s, s + bar)), await fread[i].readAsArrayBuffer(slice[i]);
                    };
                    s(init[i]),
                        (fread[i].onload = function (e) {
                            if (init[i] < e.target.result.byteLength) {
                                refertemp[i] = { text: $("#replytext").text(), target: $("#replytextparent").attr("class"), name: $("#replytexthead").text() };
                            }
                            (init[i] += e.target.result.byteLength), (percent[i] = ((100 * init[i]) / (1024 * fsize[i])).toFixed(3));
                            let t = $(window).width() <= 700 ? $(window).width() : 600;
                            (document.getElementById(i + "progress").style.width = (t * Number(percent[i])) / 100 + "px"),
                                (document.getElementById(i + "progress").textContent = percent[i] + "%"),
                                temp[i].push(e.target.result),
                                (window.filename = e.target.fileName),
                                socket.emit("sendingfile", {
                                    refer: refertemp[i],
                                    data: e.target.result,
                                    fsize: fsize[i],
                                    id: i,
                                    auth: userdata.auth,
                                    user: userdata.nativeUser,
                                    color: color,
                                    roomid: userdata.nativeRoom,
                                    type: type[i],
                                    init: init[i],
                                    name: e.target.fileName,
                                    profile: localStorage.getItem("profileinfo"),
                                }),
                                init[i] < 1024 * fsize[i]
                                    ? s(init[i])
                                    : (document.getElementById(i + "progress") &&
                                          ($("#" + i + "cross").remove(),
                                          $("#" + i + "cross")
                                              .next()
                                              .remove(),
                                          document.getElementById(i + "progress").remove()),
                                      (tempbuffer[i] = new Blob(temp[i])),
                                      "image" == type[i].split("/")[0]
                                          ? ((messagefile =
                                                "<i>File:(" +
                                                type[i] +
                                                ")<br>" +
                                                (fsize[i] / 1024).toFixed(3) +
                                                'MB<br><a title="' +
                                                window.filename +
                                                '" href="' +
                                                URL.createObjectURL(tempbuffer[i]) +
                                                '" download="' +
                                                window.filename +
                                                '">Download</a></i><br><img src="' +
                                                URL.createObjectURL(tempbuffer[i]) +
                                                '">'),
                                            postFile({ message: messagefile, refer: refertemp[i], user: userdata.nativeUser, color: color, id: i, profile: localStorage.getItem("profileinfo") }))
                                          : "audio" == type[i].split("/")[0]
                                          ? ((messagefile =
                                                "<i>" +
                                                (fsize[i] / 1024).toFixed(3) +
                                                'MB&nbsp;&nbsp;&nbsp;<a title="' +
                                                window.filename +
                                                '" href="' +
                                                URL.createObjectURL(tempbuffer[i]) +
                                                '" download="' +
                                                window.filename +
                                                '">Download</a></i><br><audio src="' +
                                                URL.createObjectURL(tempbuffer[i]) +
                                                '" controls preload="none"></audio>'),
                                            postFile({ refer: refertemp[i], message: messagefile, user: userdata.nativeUser, color: color, id: i, profile: localStorage.getItem("profileinfo") }))
                                          : "video" == type[i].split("/")[0]
                                          ? ((messagefile =
                                                "<i>" +
                                                (fsize[i] / 1024).toFixed(3) +
                                                'MB&nbsp;&nbsp;&nbsp;<a title="' +
                                                window.filename +
                                                '" href="' +
                                                URL.createObjectURL(tempbuffer[i]) +
                                                '" download="' +
                                                window.filename +
                                                '">Download</a></i><br><video src="' +
                                                URL.createObjectURL(tempbuffer[i]) +
                                                '" controls ></video>'),
                                            postFile({ refer: refertemp[i], message: messagefile, user: userdata.nativeUser, color: color, id: i, profile: localStorage.getItem("profileinfo") }))
                                          : ((messagefile =
                                                "<i>File:(" +
                                                type[i] +
                                                ")<br>" +
                                                (fsize[i] / 1024).toFixed(3) +
                                                " MB<br><a title='" +
                                                window.filename +
                                                "' href='" +
                                                URL.createObjectURL(tempbuffer[i]) +
                                                "' download='" +
                                                window.filename +
                                                "'>Click</a> here to download</i>"),
                                            postFile({ refer: refertemp[i], message: messagefile, user: userdata.nativeUser, color: color, id: i, profile: localStorage.getItem("profileinfo") })),
                                      URL.revokeObjectURL(tempbuffer[i]),
                                      (temp[i] = []),
                                      (refertemp[i] = null),
                                      (tempbuffer[i] = null));
                        });
                } else Renderconfirm("Check your internet connection!", true);
            }
            function showEmogi() {
                $("#emogi").css("display", "flex").css("flex-wrap", "wrap").css("position", "absolute").css("margin", "auto").css("bottom", "60px").css("animation", "f 0.5s").css("overflow", "auto");
            }
            function checkforLink(e) {
                let i;
                return e.replace(/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)?[a-z0-9]+([\-\.\:]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?$/gm, function (e) {
                    return (
                        (i = "http" == e.split(":")[0] || "https" == e.split(":")[0] ? e : "http://" + e),
                        "gif" == e.split(".")[e.split(".").length - 1] ||
                        "jpg" == e.split(".")[e.split(".").length - 1] ||
                        "webp" == e.split(".")[e.split(".").length - 1] ||
                        "png" == e.split(".")[e.split(".").length - 1] ||
                        "jpeg" == e.split(".")[e.split(".").length - 1]
                            ? '<img src="' + i + '"><br>'
                            : '<a target="_blank" href="' + i + '" style="background:none;">' + e + "</a><br>"
                    );
                });
            }
            function sendMessage() {
                var e = document.getElementById("message").value;
                e = e.split(" ");
                let i = [];
                for (x of e) i.push(checkforLink(x));
                (e = i.join(" ")), $("#message").val(""), $("#message").focus(), $("#emogi").hide(), $("#Adv_toggler_menu").hide();
                let s = generateid();
                e
                    ? (postFile({
                          refer: { text: $("#replytext").text(), target: $("#replytextparent").attr("class"), name: $("#replytexthead").text() },
                          message: e,
                          id: s,
                          user: userdata.nativeUser,
                          color: color,
                          roomid: userdata.nativeRoom,
                          profile: localStorage.getItem("profileinfo"),
                      }),
                      socket.emit("msg", {
                          refer: { text: $("#replytext").text(), target: $("#replytextparent").attr("class"), name: $("#replytexthead").text() },
                          message: e,
                          id: s,
                          auth: userdata.auth,
                          user: userdata.nativeUser,
                          color: color,
                          roomid: userdata.nativeRoom,
                          profile: localStorage.getItem("profileinfo"),
                      }))
                    : (postFile({
                          refer: { text: $("#replytext").text(), target: $("#replytextparent").attr("class"), name: $("#replytexthead").text() },
                          message: "<span style='font-size:11em;'>" + $("#selectedfavicon").html() + "</span>",
                          id: s,
                          user: userdata.nativeUser,
                          color: "transparent",
                          roomid: userdata.nativeRoom,
                          profile: localStorage.getItem("profileinfo"),
                      }),
                      socket.emit("msg", {
                          refer: { text: $("#replytext").text(), target: $("#replytextparent").attr("class"), name: $("#replytexthead").text() },
                          message: "<span style='font-size:11em;'>" + $("#selectedfavicon").html() + "</span>",
                          id: s,
                          auth: userdata.auth,
                          user: userdata.nativeUser,
                          color: "transparent",
                          roomid: userdata.nativeRoom,
                          profile: localStorage.getItem("profileinfo"),
                      })),
                    $("#sendbtn").attr("class", ""),
                    $("#sendbtn").html($("#selectedfavicon").html());
            }
            function postFile(e) {
                var i = new Date();
                clearTimeout(timeinterval), $("#header").hide();
                let s = document.getElementById("scbeep"),
                    t = "copy";
                (sr = e.profile ? e.profile : "https://kkleap.github.io/assets/default.jpg"),
                    (playagain[e.user] = !1),
                    (t = e.message.indexOf("<img src=") > -1 ? "Set as wallpaper" : t),
                    (t = e.message.indexOf("<audio src=") > -1 ? "Add to " : t),
                    e.user == userdata.nativeUser
                        ? ($("#message-container").append(
                              '<div class="messages ' +
                                  e.user.split(" ").join("qw") +
                                  'chatpiece" id="' +
                                  e.id +
                                  '" style="margin-bottom:6px;padding-bottom:5px;border-radius:6px;max-width:90%;min-width:250px;clear:both;margin-right:2px;float:right;text-align:right;background:' +
                                  e.color +
                                  '"><div style="border-radius:6px;background:rgba(120,120,120,0.7);border-right:3px solid #15e1dc" onclick="scrollToid(\'' +
                                  e.refer.target +
                                  '\')"><div style="font-weight:bold;color:#0f0;padding-right:4px">' +
                                  (e.refer.name ? (e.refer.name == userdata.nativeUser ? "You" : e.refer.name) : "") +
                                  '</div><div style="color:white;word-break:break-all;padding-right:4px;border-bottom:1.5px solid violet;font-size:0.8em">' +
                                  (e.refer.text ? e.refer.text : "") +
                                  '</div></div><div style="background:rgba(120,120,120,0.7);margin-bottom:5px"><select style="float:left;" onchange="handleSelect(this)"><option value="' +
                                  t.split(" ")[0] +
                                  '">' +
                                  t +
                                  '</option><br><option value="refer">Refer &#9194;</option><br><option value="del1">Del For you</option><br><option value="del2">Del For all</option></select><div style="display:flex;justify-content:space-between;flex-wrap:nowrap;"><b style="font-size:20px;font-style:italic;">You</b><div><img onload="adjust(this,true)" src="' +
                                  sr +
                                  '"/ style="float:right;max-width:70px;max-height:70px;" class="' +
                                  e.user.split(" ").join("qw") +
                                  'profilepic"></div></div><span style="font-size:0.7em;padding-right:4px;">' +
                                  i.toString().split("GMT")[0] +
                                  '</span></div><span style="max-width:100%;word-wrap:break-word;padding-right:' +
                                  (/img|video|audio/gim.test(e.message) ? 0 : 4) +
                                  "px;font-family:" +
                                  window.textfont +
                                  ";font-size:" +
                                  window.textsize +
                                  ";color:" +
                                  window.textcolor +
                                  '" class="messagemain" disabled="disabled">' +
                                  e.message.replace(/script/gim, "s_cript").replace(/ on/gim, " o_n") +
                                  "</span></div>"
                          ),
                          $("#replytomsg").hide(),
                          (document.getElementById("message-container").scrollTop = document.getElementById("message-container").scrollHeight))
                        : (document.getElementById("beeper").checked || s.play(),
                          $("#message-container").append(
                              '<div class="messages ' +
                                  e.user.split(" ").join("qw") +
                                  'chatpiece" id="' +
                                  e.id +
                                  '" style="margin-bottom:6px;padding-bottom:7px;border-radius:6px;max-width:90%;min-width:250px;clear:both;text-align:left;float:left;background:' +
                                  e.color +
                                  '"><div style="border-radius:6px;background:rgba(120,120,120,0.7);border-left:3px solid #15e1dc" onclick="scrollToid(\'' +
                                  e.refer.target +
                                  '\')"><div style="font-weight:bold;color:#0f0;padding-left:4px;">' +
                                  (e.refer.name ? (e.refer.name == userdata.nativeUser ? "You" : e.refer.name) : "") +
                                  '</div><div style="color:white;border-bottom:1.5px solid violet;font-size:0.8em;word-break:break-all;padding-left:4px">' +
                                  (e.refer.text ? e.refer.text : "") +
                                  '</div></div><div style="background:rgba(120,120,120,0.7);margin-bottom:5px"><select style="float:right;" onchange="handleSelect(this)"><option value="' +
                                  t.split(" ")[0] +
                                  '">' +
                                  t +
                                  '</option><br><option value="refer">Reply &#9194;</option><br><option value="del">Delete</option></select>         <div style="display:flex;justify-content:space-between;flex-wrap:nowrap;"><div><img onload="adjust(this,false)" src="' +
                                  sr +
                                  '"/ style="float:left;max-width:70px;max-height:70px;" class="' +
                                  e.user.split(" ").join("qw") +
                                  'profilepic"></div><b style="font-size:20px;font-style:italic;padding-right:15px;">' +
                                  e.user.split(" ")[0].substr(0, 10) +
                                  '</b></div><span style="font-size:0.7em;padding-left:4px;">' +
                                  i.toString().split("GMT")[0] +
                                  '</span></div><span style="max-width:100%;word-wrap:break-word;padding-left:' +
                                  (/img|video|audio/gim.test(e.message) ? 0 : 4) +
                                  "px;font-family:" +
                                  window.textfont +
                                  ";font-size:" +
                                  window.textsize +
                                  ";color:" +
                                  window.textcolor +
                                  '" class="messagemain" disabled="disabled">' +
                                  e.message.replace(/script/gim, "s_cript").replace(/ on/gim, " o_n") +
                                  "</span></div>"
                          ),
                          document.getElementById("message-container").scrollTop > document.getElementById("message-container").scrollHeight - 1100
                              ? (document.getElementById("message-container").scrollTop = document.getElementById("message-container").scrollHeight)
                              : null),
                    setTimeout(function () {
                        ignite(e.id);
                        if (document.getElementById("message-container").scrollTop > document.getElementById("message-container").scrollHeight - 1100) {
                            document.getElementById("message-container").scrollTop = document.getElementById("message-container").scrollHeight;
                        }
                        if (e.user == userdata.nativeUser) {
                            $("#replytextclose").click();
                        }
                    }, 200),
                    navigator.userAgent.includes("Firefox") && screen.availWidth > 700 ? $("select").css("transform", "scale(0.6,0.6)") : $("select").css("transform", "scale(1,1)"),
                    $("select").val(null);
            }
            function handleSelect(e) {
                let i = "left" == e.style.float ? 1 : 2;
                if (e.value.includes("copy")) {
                    let i = e.parentElement.nextElementSibling,
                        s = document.createElement("textarea");
                    (s.value = i.textContent), document.body.appendChild(s), s.select(), document.execCommand("copy"), removeclip();
                } else if ("refer" == e.value) {
                    let i = e.parentElement.nextElementSibling.textContent,
                        n = e.parentElement.parentElement.className.split(" ")[1].split("chatpiece")[0].split("qw").join(" ");
                    if (!i) {
                        i = "Media";
                    }
                    if (i.length > 100) {
                        i = i.substr(0, 100) + "...";
                    }
                    $("#message").focus(),
                        $("#replytext").text(i),
                        $("#replytexthead").text(n).css("font-weight", "bold"),
                        $("#replytextparent").attr("class", "#" + e.parentElement.parentElement.id),
                        $("#replytomsg").css("left", "calc(50% - " + $("#replytomsg").width() / 2 + "px)"),
                        $("#replytomsg").css("display", "flex");
                } else if ("Set" == e.value) {
                    let i = e.parentElement.nextElementSibling.innerHTML.split('src="')[1].split('"')[0];
                    $("#whole").css("background-image", "url(" + i + ")"), adjustHead(i), $("#wallpaperoption").append($("<img src='" + i + "' onclick='cb(this,0)'>")), $("#msg-sender").css("background", "transparent");
                } else if ("Add" == e.value) {
                    let i = e.parentElement.nextElementSibling.innerHTML.split('src="')[1].split('"')[0],
                        s = audmusic[currI].loop;
                    audmusic[currI].pause(),
                        $("#b").append($("<audio src='" + i + "' style='display:none;'></audio>")),
                        (audmusic = document.querySelectorAll("#b audio")),
                        (currI = audmusic.length - 1),
                        (audmusic[currI].loop = s),
                        audmusic[currI].play();
                } else
                    2 == i && "del" == e.value
                        ? confirm("Message will be deleted for only you!") && e.parentElement.parentElement.remove()
                        : 1 == i && "del1" == e.value
                        ? confirm("Message will be deleted for only you!") && e.parentElement.parentElement.remove()
                        : 1 == i &&
                          "del2" == e.value &&
                          confirm("Message will be deleted for Everyone!") &&
                          socket.emit("delete", { msgid: e.parentElement.parentElement.id, auth: userdata.auth, roomid: userdata.nativeRoom, user: userdata.nativeUser, para: $("#" + e.parentElement.parentElement.id).css("float") });
                e.value = null;
            }
            function DeleteClientChat() {
                if (confirm("You are about to delete all conversations for you!Sure??")) {
                    let i = $(".messages"),
                        s = $(".info"),
                        t = $(".info:first").html();
                    $(".messages").html(""), $(".info").html("");
                    for (var e = 0; e < i.length; e++) i[e].style.display = "none";
                    for (e = 0; e < s.length; e++) s[e].style.display = "none";
                    document.getElementById("message-container").innerHTML =
                        '<p class="info" style="background:black;color:white;" onclick="showCurrent(this)" title="' + userdata.nativeUser + "\njoined:" + window.joiningtime + '">' + t + "</p>";
                }
            }
            (receivedbuffer = {}),
                (received = {}),
                socket.on("newmsgfile", async function (e) {
                    e.init == e.data.byteLength && (received[e.id] = []);
                    try {
                        await received[e.id].push(e.data);
                    } catch (e) {
                        console.log("");
                    }
                    e.init >= 1024 * e.fsize &&
                        ((fsize[e.id] = type[e.id] = chunkslength[e.id] = init[e.id] = null),
                        document.getElementById(e.id + "progress") &&
                            ($("#" + e.id + "cross").remove(),
                            $("#" + e.id + "cross")
                                .next()
                                .remove(),
                            document.getElementById(e.id + "progress").remove()),
                        (receivedbuffer[e.id] = new Blob(received[e.id])),
                        "image" == e.type.split("/")[0]
                            ? ((messagefile =
                                  "<i>File:(" +
                                  e.type +
                                  ")<br>" +
                                  (e.fsize / 1024).toFixed(3) +
                                  'MB<br><a title="' +
                                  e.name +
                                  '" href="' +
                                  URL.createObjectURL(receivedbuffer[e.id]) +
                                  '" download="' +
                                  e.name +
                                  '">Download</a></i><br><img src="' +
                                  URL.createObjectURL(receivedbuffer[e.id]) +
                                  '">'),
                              postFile({ message: messagefile, refer: e.refer, user: e.user, color: e.color, id: e.id, profile: e.profile }))
                            : "audio" == e.type.split("/")[0]
                            ? ((messagefile =
                                  "<i>" +
                                  (e.fsize / 1024).toFixed(3) +
                                  'MB&nbsp;&nbsp;&nbsp;<a title="' +
                                  e.name +
                                  '" href="' +
                                  URL.createObjectURL(receivedbuffer[e.id]) +
                                  '" download="' +
                                  e.name +
                                  '">Download</a></i><br><audio src="' +
                                  URL.createObjectURL(receivedbuffer[e.id]) +
                                  '" controls preload="none"></audio>'),
                              postFile({ refer: e.refer, message: messagefile, user: e.user, color: e.color, id: e.id, profile: e.profile }))
                            : "video" == e.type.split("/")[0]
                            ? ((messagefile =
                                  "<i>" +
                                  (e.fsize / 1024).toFixed(3) +
                                  'MB&nbsp;&nbsp;&nbsp;<a title="' +
                                  e.name +
                                  '" href="' +
                                  URL.createObjectURL(receivedbuffer[e.id]) +
                                  '" download="' +
                                  e.name +
                                  '">Download</a></i><br><video src="' +
                                  URL.createObjectURL(receivedbuffer[e.id]) +
                                  '" controls ></video>'),
                              postFile({ refer: e.refer, message: messagefile, user: e.user, color: e.color, id: e.id, profile: e.profile }))
                            : ((messagefile =
                                  "<i>File:(" +
                                  e.type +
                                  ")<br>" +
                                  (e.fsize / 1024).toFixed(3) +
                                  " MB<br><a title='" +
                                  e.name +
                                  "' href='" +
                                  URL.createObjectURL(receivedbuffer[e.id]) +
                                  "' download='" +
                                  e.name +
                                  "'>Click</a> here to download</i>"),
                              postFile({ refer: e.refer, message: messagefile, user: e.user, color: e.color, id: e.id, profile: e.profile })),
                        URL.revokeObjectURL(receivedbuffer[e.id]),
                        (received[e.id] = []),
                        (receivedbuffer[e.id] = null));
                }),
                socket.on("newmsg", function (e) {
                    postFile(e);
                }),
                socket.on("updateuser", function (e) {
                    users = e;
                }),
                socket.on("deleting", function (e) {
                    document.getElementById(e.id) && document.getElementById(e.id).className.split(" ")[1].split("chatpiece")[0].split("qw").join(" ") == e.owner && document.getElementById(e.id).remove();
                }),
                socket.on("errorinfo", function (e) {
                    $("#message-container").append(e),
                        (document.getElementById("message-container").scrollTop = document.getElementById("message-container").scrollHeight),
                        window.scrollTo(0, document.body.scrollHeight),
                        window.scrollTo(0, document.querySelector("#message-container").scrollHeight);
                }),
                socket.on(
                    "disconnecteds",
                    function (e) {
                        users = e.userNow;
                        var i = new Date();
                        if (
                            ($("#message-container").append(
                                "<p class='info' style='background:black;color:yellow;' onclick='showCurrent(this)' title='" +
                                    e.userleft +
                                    "\ndisconnected at:" +
                                    i.toString().split("GMT")[0] +
                                    "'>" +
                                    (e.userleft == userdata.nativeUser ? "You" : e.userleft) +
                                    " got disconnected!</p>"
                            ),
                            userdata.nativeUser == admin)
                        ) {
                            let e = 0;
                            for ($("#adminsection").html(""); e != users.length; )
                                users[e] != admin && $("#adminsection").prepend($("<span onclick='remove(this)' title='Remove this user'>" + users[e] + "<i class='fa fa-close' style='float:right'></i></span><hr>").css("width", "150px")),
                                    e++;
                            $("#adminsection").append(
                                $(
                                    "<input type='password' placeholder='change password..' id='pwdchange' style='width:96%;border-radius:17px;border:2px dotted grey;'><br><button style='width:96%;border-radius:17px;background:green;font-size:1em;padding:5px;' onclick='changepwd()'>Change</button>"
                                )
                            );
                        }
                        setTimeout(function () {
                            (document.getElementById("message-container").scrollTop = document.getElementById("message-container").scrollHeight), window.scrollTo(0, document.body.scrollHeight);
                        });
                    },
                    100
                ),
                socket.on("reconnecteds", function (e) {
                    users = e.userNow;
                    var i = new Date();
                    if (
                        ($("#message-container").append(
                            "<p class='info' style='background:black;color:green;' onclick='showCurrent(this)' title='" +
                                e.userconnected +
                                "\nReconnected at:" +
                                i.toString().split("GMT")[0] +
                                "'>" +
                                (e.userconnected == userdata.nativeUser ? "You" : e.userconnected) +
                                " got reconnected!</p>"
                        ),
                        userdata.nativeUser == admin)
                    ) {
                        let e = 0;
                        for ($("#adminsection").html(""); e != users.length; )
                            users[e] != admin && $("#adminsection").prepend($("<span onclick='remove(this)' title='Remove this user'>" + users[e] + "<i class='fa fa-close' style='float:right'></i></span><hr>").css("width", "150px")), e++;
                        $("#adminsection").append(
                            $(
                                "<input type='password' placeholder='change password..' id='pwdchange' style='width:96%;border:2px dotted grey;'><br><button style='width:96%;border-radius:17px;background:green;font-size:1em;padding:5px;' onclick='changepwd()'>Change</button>"
                            )
                        );
                    }
                    (document.getElementById("message-container").scrollTop = document.getElementById("message-container").scrollHeight), window.scrollTo(0, document.body.scrollHeight);
                }),
                socket.on("disconnect", function () {
                    var e = new Date();
                    if (should_reconnect) {
                        users.splice(users.indexOf(userdata.nativeUser), 1),
                            $("#message-container").append(
                                "<p class='info' style='background:black;color:red;' onclick='showCurrent(this)' title='" + userdata.nativeUser + "\ndisconnected at:" + e.toString().split("GMT")[0] + "'>You got disconnected!</p>"
                            ),
                            (document.getElementById("message-container").scrollTop = document.getElementById("message-container").scrollHeight);
                        try {
                            event.preventDefault();
                        } catch (e) {}
                        var i = function (e) {
                            setTimeout(function () {
                                socket.disconnected &&
                                    (socket.connect(),
                                    setTimeout(function () {
                                        socket.emit("rejoinra", { room: userdata.nativeRoom, auth: userdata.auth, user: userdata.nativeUser });
                                    }, 700),
                                    i(e));
                            }, e);
                        };
                        socket.connect(), i(400);
                    }
                }),
                socket.on("reconnect", function () {
                    socket.emit("rejoinra", { room: userdata.nativeRoom, auth: userdata.auth, user: userdata.nativeUser });
                }),
                socket.on("ho_be_reconnect", function () {
                    reconnectint = setInterval(function () {
                        socket.disconnected ? socket.connect() : clearInterval(reconnectint);
                    }, 10);
                }),
                socket.on("sendingoffer", async function (e) {
                    (e = JSON.parse(e)),
                        (e.auth = userdata.auth),
                        (e.profile = localStorage.getItem("profileinfo")),
                        !window.startedchatyet && window.rtcsupport
                            ? (document.getElementById("beeper").checked || incoming.play(),
                              confirm(e.user + " wants to " + e.type + " call you!Would u like to join?")
                                  ? "video" == e.type
                                      ? ($("#hangUpBtn").click(), document.getElementById("beeper").checked || incoming.play(), disconnect.pause(), startVideochat(!0, e))
                                      : ($("#hangUpBtn2").click(), document.getElementById("beeper").checked || incoming.play(), disconnect.pause(), startVideochat(!1, e))
                                  : (incoming.pause(), (incoming.currentTime = 0), socket.emit("offerdenied", JSON.stringify(e))))
                            : socket.emit("offerdenied", JSON.stringify(e));
                }),
                socket.on("deniedoffer", function (e) {
                    (e = JSON.parse(e)), ring.pause(), (ring.currentTime = 0), Renderconfirm(e.target + " refused!", true);
                });
            var caller = {};
            function startVideochat(e, i = null) {
                if (document.getElementById("sharescreen")) {
                    $("#sharescreen").hide();
                }
                if (!window.rtcsupport || !("mediaDevices" in navigator && "getUserMedia" in navigator.mediaDevices))
                    return (
                        console.log("No support for webrtc!"),
                        Renderconfirm("webrtc not supported by your browser!Use chrome ,firefox,opera ,supported safari version or edge<br><a href='https://caniuse.com/#search=webrtc' target='_blank'>Click</a> here to get more info", true),
                        $("#chatroom").show(500),
                        $("#videocallingpage").hide(200),
                        void $("#voicecallingpage").hide(200)
                    );
                if (!should_reconnect) return Renderconfirm("You cannot chat,you got disconnected", true), $("#chatroom").show(500), $("#videocallingpage").hide(200), void $("#voicecallingpage").hide(200);
                function s() {
                    return (navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia), navigator.getUserMedia;
                }
                function t() {
                    return (window.RTCPeerConnection = window.RTCPeerConnection || window.webkitRTCPeerConnection || window.mozRTCPeerConnection || window.msRTCPeerConnection), window.RTCPeerConnection;
                }
                (caller = {}),
                    (window.vdochat = e),
                    $("#chatroom").hide(500),
                    i ? ((window.startedchatyet = !0), (window.callroom = i.callroom)) : (window.startedchatyet = !1),
                    $("#stylingtools").hide(200),
                    $("#moreoptions").hide(),
                    audmusic[currI].pause(),
                    1 == e ? ($("#voicecallingpage").hide(200), $("#videocallingpage").show(500)) : ($("#videocallingpage").hide(200), $("#voicecallingpage").show(500)),
                    window.stream && window.stream.getTracks().forEach((e) => e.stop()),
                    s(),
                    s() || (Renderconfirm("unable to access your webcam!", true), $("#chatroom").show(500), $("#videocallingpage").hide(200), $("#voicecallingpage").hide(200)),
                    t(),
                    t() ||
                        (Renderconfirm("webrtc not supported!Use chrome ,firefox,opera ,supported safari version or edge<br><a href='https://caniuse.com/#search=webrtc' target='_blank'>Click</a> here to get more info", true),
                        $("#chatroom").show(500),
                        $("#videocallingpage").hide(200),
                        $("#voicecallingpage").hide(200)),
                    (window.RTCSessionDescription = window.RTCSessionDescription || window.webkitRTCSessionDescription || window.mozRTCSessionDescription || window.msRTCSessionDescription),
                    window.RTCSessionDescription,
                    (window.RTCIceCandidate = window.RTCIceCandidate || window.webkitRTCIceCandidate || window.mozRTCIceCandidate || window.msRTCIceCandidate),
                    window.RTCIceCandidate,
                    $("#hangUpBtn2").click(function () {
                        for (x in (document.getElementById("beeper").checked || disconnect.play(),
                        incoming.pause(),
                        ring.pause(),
                        (ring.currentTime = 0),
                        document.getElementById("callbackbutton") && document.getElementById("callbackbutton").remove(),
                        $("#userlist").hide(),
                        $("#audiocontainer").html(""),
                        $("#chatroom").show(500),
                        $("#voicecallingpage").hide(200),
                        $("#showaudioconnection").html(""),
                        (document.getElementById("selfaudio").srcObject = null),
                        (document.getElementById("selfview").srcObject = null),
                        window.history.replaceState({}, document.title, "/chat_room?" + btoa("key=" + userdata.nativeRoom)),
                        window.startedchatyet && socket.emit("disconnectingit", JSON.stringify({ user: userdata.nativeUser, roomid: window.callroom, type: window.vdochat })),
                        (window.startedchatyet = !1),
                        caller))
                            caller[x].close();
                        (caller = {}), window.stream.getTracks().forEach((e) => e.stop());
                    }),
                    $("#hangUpBtn").click(function () {
                        for (x in (document.getElementById("beeper").checked || disconnect.play(),
                        ring.pause(),
                        incoming.pause(),
                        (ring.currentTime = 0),
                        document.getElementById("callbackbutton") && document.getElementById("callbackbutton").remove(),
                        $("#userlist").hide(),
                        $("#videocontainer").html(""),
                        $("#content").attr("content", "width=device-width,initial-scale=1.0,user-scalable=no"),
                        $("#selfview").css("filter", "sepia(0) saturate(1.5) contrast(1.15) grayscale(0.1) brightness(0.9)"),
                        $("#chatroom").show(500),
                        $("#videocallingpage").hide(200),
                        window.history.replaceState({}, document.title, "/chat_room?" + btoa("key=" + userdata.nativeRoom)),
                        window.startedchatyet && socket.emit("disconnectingit", JSON.stringify({ user: userdata.nativeUser, roomid: window.callroom, type: window.vdochat })),
                        $("#sharescreen").attr("class", "fa fa-television"),
                        $("#sharescreen").attr("title", " allow sharing screen"),
                        (window.startedchatyet = !1),
                        (document.getElementsByClassName("large")[0].id = "selfview"),
                        caller))
                            caller[x].close();
                        (caller = {}), window.stream.getTracks().forEach((e) => e.stop());
                    }),
                    $("#adduser").click(function () {
                        let i = 0;
                        for ($("#userlist").html("Select a user<i class='fa fa-close' onclick='$(this).parent().hide()' style='font-size:1.4em;background:red;float:right;font-weight:bold;'></i><hr>"); i < users.length; )
                            users[i] != userdata.nativeUser &&
                                $("#userlist").append(
                                    $("<span title='video call " + users[i] + "'>" + users[i] + "<i class='fa fa-video-camera' aria-hidden='true' style='float:right;margin-right:10px;'></i></span>")
                                        .css("padding", "5px")
                                        .css("border-bottom", "2px solid black")
                                        .css("width", "200px")
                                ),
                                i++;
                        should_reconnect || $("#userlist").html("you have been disconnected<i class='fa fa-close' onclick='$(this).parent().hide()' style='font-size:1.4em;background:red;float:right;font-weight:bold;'></i>"),
                            $("#userlist").show(),
                            $("#userlist span").click(function () {
                                var i = e ? "video" : "audio";
                                document.getElementById("beeper").checked || ring.play(),
                                    socket.emit("sendoffer", JSON.stringify({ target: $(this).text(), auth: userdata.auth, type: i, user: userdata.nativeUser, roomid: userdata.nativeRoom })),
                                    $("#userlist").hide();
                            });
                    });
                if (!i) {
                    e ? $("#adduser").click() : $("#adduser2").click();
                }
                navigator.getUserMedia(
                    { video: e, audio: !0 },
                    function (s) {
                        if (!s) {
                            Renderconfirm("Use updated chrome,firefox,opeara,safari or edge,call is not supported in this browser or in this version", true), incoming.pause(), (incoming.currentTime = 0);
                            if (i) socket.emit("offerdenied", JSON.stringify(i));
                            return;
                        }
                        void 0 !== s
                            ? ((window.stream = s),
                              e ? (document.getElementById("selfview").srcObject = window.stream) : (document.getElementById("selfaudio").srcObject = s),
                              (document.getElementById("selfview").muted = !0),
                              (document.getElementById("selfaudio").muted = !0),
                              e
                                  ? ($("#videooff").attr("class", "fa fa-video-camera"),
                                    $("#audiooff").attr("class", "fa fa-microphone"),
                                    $("#content").attr("content", "width=device-width,initial-scale=1.0"),
                                    $("#adduser").show(),
                                    $("#videooff").css("color", "#0f0"),
                                    $("#audiooff").css("color", "#0f0"),
                                    $("#videocallingpage video").each(function () {
                                        $(this).css("transform", "scale(-1,1)");
                                    }))
                                  : ($("#audiooff2").css("color", "#0f0"), $("#audiooff2").attr("class", "fa fa-microphone")),
                              i &&
                                  (window.timedelay = setTimeout(function () {
                                      window.history.replaceState({}, document.title, "/" + (window.vdochat ? "video_call" : "voice_call") + "?" + btoa(btoa("call_room=" + i.callroom))), socket.emit("offeraccepted", JSON.stringify(i));
                                  }, 3e3)))
                            : Renderconfirm("unable to get your camera or microphone", true);
                    },
                    function (e) {
                        console.log("Error occurred!"), socket.emit("refreshlist", { user: userdata.nativeUser, auth: userdata.auth });
                        let s = -1;
                        (window.callroom = null),
                            (window.vdochat = null),
                            (window.startedchatyet = !1),
                            i && (clearTimeout(window.timedelay), 0 == ++s && socket.emit("offerdenied", JSON.stringify(i))),
                            incoming.pause(),
                            (incoming.currentTime = 0),
                            $("#userlist").html("Error in accessing camera!"),
                            $("#userlist").hide(),
                            Renderconfirm(e.message, true),
                            $("#chatroom").show(500),
                            $("#videocallingpage").hide(200),
                            $("#voicecallingpage").hide(200);
                    }
                );
            }
            socket.on("setcallroom", function (e) {
                (window.callroom = e), window.history.replaceState({}, document.title, "/" + (window.vdochat ? "video_call" : "voice_call") + "?" + btoa(btoa("call_room=" + e)));
            });
            let shouldFaceUser = !0;
            socket.on("disconnectingvdo", function (e) {
                document.getElementById(e.user.split(" ").join("qw")) &&
                    ("large" == document.getElementById(e.user.split(" ").join("qw")).className &&
                        ((document.getElementById("selfview").srcObject = document.getElementById(e.user.split(" ").join("qw")).srcObject),
                        (document.getElementsByClassName("large")[0].style.filter = $("#selfview").css("filter")),
                        (document.getElementById(e.user.split(" ").join("qw")).srcObject = window.stream),
                        (document.getElementById("selfview").id = e.user.split(" ").join("qw")),
                        (document.getElementsByClassName("large")[0].id = "selfview"),
                        (document.getElementById("selfview").muted = !0),
                        document.getElementById("sharescreen") &&
                            ("fa fa-stop" != $("#sharescreen").attr("class") && shouldFaceUser
                                ? (document.getElementsByClassName("large")[0].style.transform = "scale(-1,1)")
                                : (document.getElementsByClassName("large")[0].style.transform = "scale(1,1)"))),
                    document.getElementById(e.user.split(" ").join("qw")).remove()),
                    document.getElementById(e.user.split(" ").join("qw") + "indicator") &&
                        $("#" + e.user.split(" ").join("qw") + "indicator")
                            .parent()
                            .parent()
                            .remove(),
                    e.id in caller && (caller[e.id].close(), delete caller[e.id]),
                    0 == Object.keys(caller).length && (e.type ? $("#hangUpBtn").click() : $("#hangUpBtn2").click());
            }),
                $("#togglecamera").click(function () {
                    if (null == window.stream) return;
                    window.stream.getTracks().forEach((e) => e.stop()),
                        (shouldFaceUser = !shouldFaceUser)
                            ? (socket.emit("reversecamera", { style: "scale(-1,1)", user: userdata.nativeUser, roomid: userdata.nativeRoom, type: 1 }), (document.getElementById("selfview").style.transform = "scale(-1,1)"))
                            : ($("#selfview").css("transform", "scale(1,1)"), socket.emit("reversecamera", { style: "scale(1,1)", user: userdata.nativeUser, roomid: userdata.nativeRoom, type: 1 }));
                    let e = { audio: !0, video: { facingMode: shouldFaceUser ? "user" : "environment" } };
                    (e.video = { facingMode: shouldFaceUser ? "user" : "environment" }),
                        navigator.mediaDevices
                            .getUserMedia(e)
                            .then(function (e) {
                                window.stream = e;
                                let i = e.getVideoTracks()[0],
                                    s = e.getAudioTracks()[0];
                                for (x in caller) {
                                    var t = caller[x].getSenders().find(function (e) {
                                            return e.track.kind == i.kind;
                                        }),
                                        a = caller[x].getSenders().find(function (e) {
                                            return e.track.kind == s.kind;
                                        });
                                    t.replaceTrack(i), a.replaceTrack(s);
                                }
                                document.getElementById("selfview").srcObject = window.stream;
                            })
                            .catch((e) => console.log(e.message));
                }),
                $("#sharescreen").click(async function () {
                    if ("fa fa-television" == $("#sharescreen").attr("class"))
                        try {
                            let e = await navigator.mediaDevices.getDisplayMedia({ video: { cursor: "always" }, audio: { echoCancellation: !0, noiseSuppression: !1 } }),
                                i = e.getVideoTracks()[0];
                            for (x in caller) {
                                caller[x]
                                    .getSenders()
                                    .find(function (e) {
                                        return e.track.kind == i.kind;
                                    })
                                    .replaceTrack(i);
                            }
                            $("#selfview").css("transform", "scale(1,1)"),
                                $("#adduser").hide(),
                                socket.emit("reversecamera", { style: "scale(1,1)", user: userdata.nativeUser, roomid: userdata.nativeRoom, screenshare: true }),
                                window.stream.getTracks().forEach((e) => e.stop()),
                                (window.stream = e),
                                (document.getElementById("selfview").srcObject = window.stream),
                                $("#sharescreen").attr("class", "fa fa-stop"),
                                $("#sharescreen").attr("title", " stop sharing screen");
                        } catch (e) {
                            console.log(e.message),
                                $("#adduser").show(),
                                navigator.mediaDevices
                                    .getUserMedia({ video: !0, audio: !0 })
                                    .then(function (e) {
                                        let i = e.getVideoTracks()[0],
                                            s = e.getAudioTracks()[0];
                                        for (x in caller) {
                                            var t = caller[x].getSenders().find(function (e) {
                                                    return e.track.kind == i.kind;
                                                }),
                                                a = caller[x].getSenders().find(function (e) {
                                                    return e.track.kind == s.kind;
                                                });
                                            $("#selfview").css("transform", "scale(-1,1)"),
                                                $("#adduser").show(),
                                                socket.emit("reversecamera", { style: "scale(-1,1)", user: userdata.nativeUser, roomid: userdata.nativeRoom }),
                                                t.replaceTrack(i),
                                                a.replaceTrack(s);
                                        }
                                        window.stream.getTracks().forEach((e) => e.stop()),
                                            (window.stream = e),
                                            (document.getElementById("selfview").srcObject = window.stream),
                                            $("#sharescreen").attr("class", "fa fa-television"),
                                            $("#sharescreen").attr("title", " allow sharing screen");
                                    })
                                    .catch((e) => console.log(e.message));
                        }
                    else
                        $("#adduser").show(),
                            navigator.mediaDevices
                                .getUserMedia({ video: !0, audio: !0 })
                                .then(function (e) {
                                    let i = e.getVideoTracks()[0],
                                        s = e.getAudioTracks()[0];
                                    for (x in caller) {
                                        var t = caller[x].getSenders().find(function (e) {
                                                return e.track.kind == i.kind;
                                            }),
                                            a = caller[x].getSenders().find(function (e) {
                                                return e.track.kind == s.kind;
                                            });
                                        $("#selfview").css("transform", "scale(-1,1)"),
                                            $("#adduser").show(),
                                            socket.emit("reversecamera", { style: "scale(-1,1)", user: userdata.nativeUser, roomid: userdata.nativeRoom }),
                                            t.replaceTrack(i),
                                            a.replaceTrack(s);
                                    }
                                    window.stream.getTracks().forEach((e) => e.stop()),
                                        (window.stream = e),
                                        (document.getElementById("selfview").srcObject = window.stream),
                                        $("#sharescreen").attr("class", "fa fa-television"),
                                        $("#sharescreen").attr("title", " allow sharing screen");
                                })
                                .catch((e) => console.log(e.message));
                }),
                $("#videooff").click(function () {
                    "fa fa-video-camera" == this.className
                        ? ((this.className = "fas fa-video-slash"),
                          $(this).attr("title", "allow video"),
                          window.stream.getVideoTracks().forEach(function (e) {
                              e.enabled = !1;
                          }),
                          (this.style.color = "#f00"))
                        : ((this.className = "fa fa-video-camera"),
                          window.stream.getVideoTracks().forEach(function (e) {
                              e.enabled = !0;
                          }),
                          $(this).attr("title", "mute video"),
                          (this.style.color = "#0f0"));
                }),
                $("#audiooff").click(function () {
                    "fa fa-microphone" == this.className
                        ? ((this.className = "fa fa-microphone-slash"),
                          window.stream.getAudioTracks().forEach(function (e) {
                              e.enabled = !1;
                          }),
                          $(this).attr("title", "allow audio"),
                          (this.style.color = "#f00"),
                          $("#selfview").css("filter", "sepia(1) saturate(1.5) contrast(1.15) grayscale(0.1) brightness(0.9)"),
                          socket.emit("videovoice", { user: userdata.nativeUser, roomid: window.callroom, status: "sepia(1) saturate(1.5) contrast(1.15) grayscale(0.1) brightness(0.9)" }))
                        : ($(this).attr("title", "mute audio"),
                          window.stream.getAudioTracks().forEach(function (e) {
                              e.enabled = !0;
                          }),
                          $(this).attr("class", "fa fa-microphone"),
                          (this.style.color = "#0f0"),
                          $("#selfview").css("filter", "sepia(0) saturate(1.5) contrast(1.15) grayscale(0.1) brightness(1)"),
                          socket.emit("videovoice", { user: userdata.nativeUser, roomid: window.callroom, status: "sepia(0) saturate(1.5) contrast(1.15) grayscale(0.1) brightness(0.9)" }));
                }),
                $("#audiooff2").click(function () {
                    "fa fa-microphone" == this.className
                        ? ((this.className = "fa fa-microphone-slash"),
                          window.stream.getAudioTracks().forEach(function (e) {
                              e.enabled = !1;
                          }),
                          $(this).attr("title", "allow audio"),
                          (this.style.color = "#f00"))
                        : ($(this).attr("title", "mute audio"),
                          window.stream.getAudioTracks().forEach(function (e) {
                              e.enabled = !0;
                          }),
                          $(this).attr("class", "fa fa-microphone"),
                          (this.style.color = "#0f0")),
                        socket.emit("changestate", { user: userdata.nativeUser, roomid: window.callroom, color: $("#audiooff2").css("color"), class: $("#audiooff2").attr("class") });
                }),
                $("#adduser2").click(function () {
                    let e = 0;
                    for ($("#userlist").html("Select a user<i class='fa fa-close' onclick='$(this).parent().hide()' style='font-size:1.4em;background:red;float:right;font-weight:bold;'></i><hr>"); e < users.length; )
                        users[e] != userdata.nativeUser &&
                            $("#userlist").append(
                                $("<span title='voice call " + users[e] + "'>" + users[e] + "<i class='fa fa-phone' aria-hidden='true' style='float:right;margin-right:10px;'></i></span>")
                                    .css("padding", "5px")
                                    .css("border-bottom", "2px solid black")
                                    .css("width", "200px")
                            ),
                            e++;
                    should_reconnect || $("#userlist").html("you have been disconnected<i class='fa fa-close' onclick='$(this).parent().hide()' style='font-size:1.4em;background:red;float:right;font-weight:bold;'></i>"),
                        $("#userlist").show(),
                        $("#userlist span").click(function () {
                            var e = window.vdochat ? "video" : "audio";
                            document.getElementById("beeper").checked || ring.play(),
                                socket.emit("sendoffer", JSON.stringify({ target: $(this).text(), auth: userdata.auth, type: e, user: userdata.nativeUser, roomid: userdata.nativeRoom, profile: localStorage.getItem("profileinfo") })),
                                $("#userlist").hide();
                        });
                }),
                socket.on("changestate", function (e) {
                    document.getElementById(e.user.split(" ").join("qw") + "indicator") &&
                        $("#" + e.user.split(" ").join("qw") + "indicator")
                            .css("color", e.color)
                            .attr("class", e.class);
                });
            const configuration = {
                iceServers: [
                    { urls: "stun:stun.l.google.com:19302" },
                    { urls: "turn:numb.viagenie.ca", credential: "muazkh", username: "webrtc@live.com" },
                    { urls: "turn:numb.viagenie.ca", credential: "1234567890", username: "leapkk58@gmail.com" },
                ],
            };
            var vdocon = document.getElementById("videocontainer"),
                adocon = document.getElementById("audiocontainer");
            socket.on("createoffer", async function (e) {
                e.id in caller ||
                    ((caller[e.id] = new window.RTCPeerConnection(configuration)),
                    (caller[e.id].onicecandidate = function (i) {
                        i.candidate && (console.log("onicecandidate called"), (window.startedchatyet = !0), socket.emit("candidate", { id: e.id, candidate: { sdpMLineIndex: i.candidate.sdpMLineIndex, candidate: i.candidate.candidate } }));
                    }),
                    (caller[e.id].oniceconnectionstatechange = function (f) {
                        if (caller[e.id].iceConnectionState == "failed" || caller[e.id].iceConnectionState == "disconnected") {
                            socket.emit("offeraccepted", JSON.stringify({ profile: localStorage.getItem("profileinfo"), target: userdata.nativeUser, roomid: userdata.nativeRoom, callroom: window.callroom, type: window.vdochat }));
                        }
                    }),
                    (caller[e.id].ontrack = function (i) {
                        if ((console.log("ontrack called"), i.streams[0] != window.stream))
                            if (window.vdochat) {
                                let s = document.createElement("video");
                                (s.controls = !1),
                                    incoming.pause(),
                                    ring.pause(),
                                    (ring.currentTime = 0),
                                    (s.poster = "https://kkleap.github.io/assets/spinner.gif"),
                                    (s.autoplay = !0),
                                    (s.srcObject = i.streams[0]),
                                    (s.id = e.user.split(" ").join("qw")),
                                    document.getElementById(e.user.split(" ").join("qw")) && managevdo(e.user.split(" ").join("qw")),
                                    vdocon.appendChild(s),
                                    (s.onclick = function () {
                                        let e = this.srcObject,
                                            i = this.id,
                                            s = this.style.transform;
                                        k = this.style.filter;
                                        (this.srcObject = document.querySelectorAll(".large")[0].srcObject),
                                            (this.style.transform = document.querySelectorAll(".large")[0].style.transform),
                                            (this.style.filter = document.querySelectorAll(".large")[0].style.filter),
                                            (document.querySelectorAll(".large")[0].style.transform = s),
                                            (document.querySelectorAll(".large")[0].style.filter = k),
                                            (document.querySelectorAll(".large")[0].srcObject = e),
                                            (this.id = document.querySelectorAll(".large")[0].id),
                                            (document.querySelectorAll(".large")[0].id = i);
                                        document.querySelectorAll("#videocallingpage video");
                                        $("#videocallingpage video").each(function () {
                                            "selfview" == this.id ? (this.muted = !0) : (this.muted = !1);
                                        });
                                    });
                            } else {
                                let s = document.createElement("audio");
                                (s.controls = !1),
                                    (s.autoplay = !0),
                                    incoming.pause(),
                                    ring.pause(),
                                    (ring.currentTime = 0),
                                    (s.id = e.user.split(" ").join("qw")),
                                    document.getElementById(e.user.split(" ").join("qw")) && document.getElementById(e.user.split(" ").join("qw")).remove(),
                                    document.getElementById(e.user.split(" ").join("qw") + "indicator") &&
                                        document
                                            .getElementById(e.user.split(" ").join("qw") + "indicator")
                                            .parent()
                                            .parent()
                                            .remove(),
                                    $("#showaudioconnection").append(
                                        "<div style='width:100px;height:100px;border-radius:50%;display:flex;justify-content:space-between;flex-direction:column;background-image:url(" +
                                            (e.profile ? e.profile : "https://kkleap.github.io/assets/default.jpg") +
                                            ");background-size:100px;background-repeat:no-repeat;background-position:center'><div style='font-size:40px;color:green;animation:op 6s infinite alternate linear'><i class='fa fa-microphone' id='" +
                                            e.user.split(" ").join("qw") +
                                            "indicator'></i></div><span style='font-size:1em;background:grey;color:yellow;font-weight:bold;word-break:break-all;'>" +
                                            e.user.split(" ")[0] +
                                            "</span></div>"
                                    ),
                                    (s.srcObject = i.streams[0]),
                                    adocon.appendChild(s);
                            }
                    }),
                    window.stream.getTracks().forEach(function (i) {
                        caller[e.id].addTrack(i, stream);
                    }),
                    e.offerer &&
                        (await caller[e.id].createOffer({ iceRestart: true }).then(async function (i) {
                            await caller[e.id].setLocalDescription(new RTCSessionDescription(i)),
                                (i.sdp = document.getElementById("datasaver").checked ? setMediaBitrates(i.sdp, e.length) : i.sdp),
                                socket.emit("sdp", JSON.stringify({ sdp: i, id: socket.id, target: e.id, length: e.length }));
                        })));
            }),
                socket.on("candidate", async function (e) {
                    console.log("candidate received"), (incoming.currentTime = 0), (ring.currentTime = 0);
                    if (window.vdochat) {
                        (status = $("#selfview").css("filter")),
                            (style = $("#selfview").css("transform")),
                            socket.emit("videovoice", { user: userdata.nativeUser, roomid: window.callroom, status: status }),
                            socket.emit("reversecamera", { style: style, user: userdata.nativeUser, roomid: userdata.nativeRoom }),
                            $("#sharescreen").show();
                    } else {
                        socket.emit("changestate", { user: userdata.nativeUser, roomid: window.callroom, color: $("#audiooff2").css("color"), class: $("#audiooff2").attr("class") });
                    }
                    await caller[e.id].addIceCandidate(new RTCIceCandidate(e.candidate));
                }),
                socket.on("sdp", async function (e) {
                    (e = JSON.parse(e)),
                        console.log("sdp received"),
                        await caller[e.id].setRemoteDescription(new RTCSessionDescription(e.sdp)),
                        await caller[e.id].createAnswer().then(async function (i) {
                            await caller[e.id].setLocalDescription(new RTCSessionDescription(i)),
                                (i.sdp = document.getElementById("datasaver").checked ? setMediaBitrates(i.sdp, e.length) : i.sdp),
                                socket.emit("answer", JSON.stringify({ sdp: i, id: socket.id, target: e.id, length: e.length }));
                        });
                }),
                socket.on("securitydanger", function (d) {
                    Renderconfirm(d, true);
                }),
                socket.on("answer", async function (e) {
                    (e = JSON.parse(e)), console.log("answer received"), await caller[e.id].setRemoteDescription(new RTCSessionDescription(e.sdp));
                });
        </script>
        <script type="text/javascript">
            window.colors = localStorage.getItem("colors") || "#007878";
            let zct,
                interval = setTimeout(function () {
                    $("#controls").fadeOut("slow");
                }, 2e3),
                interval2 = setTimeout(function () {
                    $("#controls2").fadeOut("slow");
                }, 2e3);
            function removeclip() {
                setTimeout(function () {
                    $("textarea").remove();
                }, 1e3);
            }
            function showCurrent(e) {
                Renderconfirm(
                    "-----------------------------------<br><span title='click to get a special information' style='padding:7px;cursor:pointer;background:lightblue;text-decoration:underline' onclick='$(this).next().show();$(this).remove()'>click here...</span><span style='color:red;display:none'>Do not change your default client socketID.<br>You will feel problem in receiving calls and some messages if u do that</span><br>-----------------------------------<br><span style='font-size:0.7em;font-family:none'>" +
                        $(e).attr("title").split("\n").join("<br>") +
                        "</span><br>-----------------------------------<br>Group created by <span style='color:yellow'>" +
                        admin +
                        "</span><br>Group ID: <span style='color:yellow'>" +
                        userdata.nativeRoom +
                        "</span><br>Max-users for this group: <span style='color:yellow'>" +
                        population +
                        "</span><br><br>Currently people in this group are:<span style='color:yellow'><br>" +
                        users.join(", ") +
                        "</span><br><br><span style='color:#f00'>-X-X-X-X- Important -X-X-X-X</span><br>User may be disconnected if<br><br>1.Admin removed him/her <br><br>2.Server connection lost(bz server was very busy at the time u messaged or server was not getting you)<br><br>3.Your net connection is not that strong<br><br>* Automatic reconnection will be tried if it was due to server or poor net connection(or message once ,you will be reconnected)<br><br>* If admin removed you,server will not reconnect you<br>* For group chat(involving more than 4 people),avoid sharing larger <span style='color:yellow'>file(100 MB or larger)</span>.In such case make group of 2 people only",
                    !0
                );
            }
            function handleSong(e) {
                let o = 0;
                for (window.s = e, $("#onlinemusic").html(""); o != e.length; )
                    $("#onlinemusic").append(
                        '<div style="width:40px;height:40px;border-radius:50%;cursor:pointer;" onclick="play(window.s[' + o + '])"><img src="' + e[o].album.cover_small + '" style="border-radius:50%;width:100%;height:100%"></div>'
                    ),
                        o++;
                document.getElementById("stylingtools").scrollTo(0, 280);
            }
            function scrollToid(e) {
                document.getElementById(e.split("#")[1]) &&
                    ((document.getElementById("message-container").scrollTop = $(e).offset().top + document.getElementById("message-container").scrollTop),
                    $(e).css("animation", "s 1.2s"),
                    setTimeout(function () {
                        $(e).css("animation", "none");
                    }, 1200));
            }
            function play(e) {
                audmusic[currI].pause(), zct && zct.pause(), (zct = new Audio(e.preview)).play();
            }
            function changechatColor(e) {
                (window.colors = e.value),
                    localStorage.setItem("colors", e.value),
                    $(".messages").each(function () {
                        this.style.background.includes("transparent") || $(this).css("background", e.value);
                    });
            }
            function getTouch(e) {
                return e.touches || e.originalEvent.touches;
            }
            function ignite(e) {
                var o = null,
                    t = null;
                window.colors && !document.getElementById(e).style.background.includes("transparent") && (document.getElementById(e).style.background = window.colors),
                    $("#" + e).on("touchstart", function (t) {
                        (o = getTouch(t)[0].clientX), (initial = $("#" + e).css("left"));
                    }),
                    $("#" + e).on("touchmove", function (n) {
                        if (((t = getTouch(n)[0].clientX), Math.abs(t - o) > 130)) {
                            let l = $("#" + e)
                                    .find(".messagemain")
                                    .text(),
                                r = document.getElementById(e).className.split(" ")[1].split("chatpiece")[0].split("qw").join(" ");
                            l || (l = "Media"),
                                l.length > 100 && (l = l.substr(0, 100) + "..."),
                                $("#replytext").text(l),
                                $("#replytexthead").text(r).css("font-weight", "bold"),
                                $("#replytextparent").attr("class", "#" + e),
                                $("#replytomsg").css("left", "calc(50% - " + $("#replytomsg").width() / 2 + "px)"),
                                $("#replytomsg").css("display", "flex"),
                                $("#message").focus(),
                                (t = null),
                                (o = null),
                                n.preventDefault();
                        }
                    });
            }
            (window.onscroll = function () {
                $("#controls").fadeIn("fast"),
                    clearTimeout(interval),
                    (interval = setTimeout(function () {
                        $("#controls").fadeOut("slow");
                    }, 4e3)),
                    $("#controls2").fadeIn("fast"),
                    clearTimeout(interval2),
                    (interval2 = setTimeout(function () {
                        $("#controls2").fadeOut("slow");
                    }, 4e3));
            }),
                $(document).ready(function () {
                    window.location.toString().includes("?") && atob(window.location.toString().split("?")[1]).includes("&key=") && atob(window.location.toString().split("?")[1]).includes("roomid=")
                        ? ($("#login").hide(),
                          setTimeout(function () {
                              var e;
                              (e = localStorage.getItem("loginusername") ? localStorage.getItem("loginusername") : prompt("Enter your name")) || (e = "G-" + Math.floor(1e5 * Math.random())),
                                  $("#login").show(),
                                  $("#name").val(e),
                                  $("#pwd").val(atob(window.location.toString().split("?")[1]).split("&key=")[1]),
                                  $("#roomid").val(atob(window.location.toString().split("?")[1]).split("roomid=")[1].split("&key=")[0]),
                                  setUsername();
                          }, 2e3))
                        : localStorage.getItem("loginusername") &&
                          localStorage.getItem("loginpassword") &&
                          localStorage.getItem("loginroomid") &&
                          setTimeout(function () {
                              $("#name").val(localStorage.getItem("loginusername")),
                                  $("#pwd").val(localStorage.getItem("loginpassword")),
                                  $("#roomid").val(localStorage.getItem("loginroomid")),
                                  Renderconfirm(
                                      "<label for='profilechangeinput'><img id='userimg' alt='@" +
                                          (localStorage.getItem("loginusername") || "user") +
                                          "' title='@" +
                                          (localStorage.getItem("loginusername") || "user") +
                                          " profilepic,click to select another pic' src='" +
                                          localStorage.getItem("profileinfo") +
                                          "' style='cursor:pointer;max-width:50px;max-height:50px;' onload='adjust(this)'></label><br>hi " +
                                          localStorage.getItem("loginusername") +
                                          "!<br>join back your previous room? <br><br>Press <span style='background:green;padding:6px;color:black;font-weight:bold;border-radius:8px'>yes</span> for the same"
                                  );
                          }, 100) &&
                          $("#error-container").hide();
                }),
                window.addEventListener("mousemove", function (e) {
                    $("#controls").fadeIn("fast"),
                        clearTimeout(interval),
                        (interval = setTimeout(function () {
                            $("#controls").fadeOut("slow");
                        }, 4e3)),
                        $("#controls2").fadeIn("fast"),
                        clearTimeout(interval2),
                        (interval2 = setTimeout(function () {
                            $("#controls2").fadeOut("slow");
                        }, 4e3));
                }),
                window.addEventListener("touchstart", function () {
                    clearTimeout(interval),
                        $("#controls").fadeIn("fast"),
                        (interval = setTimeout(function () {
                            $("#controls").fadeOut("slow");
                        }, 4e3)),
                        clearTimeout(interval2),
                        $("#controls2").fadeIn("fast"),
                        (interval2 = setTimeout(function () {
                            $("#controls2").fadeOut("slow");
                        }, 4e3));
                }),
                window.addEventListener("click", function () {
                    if (document.activeElement.id == "message") {
                        $("#moreoptions").hide(), $("#adminsection").hide();
                    }
                    $("#controls").fadeIn("fast"),
                        clearTimeout(interval),
                        (interval = setTimeout(function () {
                            $("#controls").fadeOut("slow");
                        }, 4e3)),
                        $("#controls2").fadeIn("fast"),
                        clearTimeout(interval2),
                        (interval2 = setTimeout(function () {
                            $("#controls2").fadeOut("slow");
                        }, 4e3));
                }),
                $("#controls").on("mouseover", function () {
                    clearTimeout(interval), $("#controls").fadeIn("fast");
                }),
                $("#controls").on("mouseleave", function () {
                    interval = setTimeout(function () {
                        $("#controls").fadeOut("slow");
                    }, 4e3);
                }),
                $("#controls2").on("mouseover", function () {
                    clearTimeout(interval2), $("#controls2").fadeIn("fast");
                }),
                $("#controls2").on("mouseleave", function () {
                    interval2 = setTimeout(function () {
                        $("#controls").fadeOut("slow");
                    }, 4e3);
                }),
                socket.on("changeprofilepic", function (e) {
                    let o = document.getElementsByClassName(e.user.split(" ").join("qw") + "profilepic");
                    for (x of o) x.src = e.profile;
                    document.getElementById(e.user.split(" ").join("qw") + "indicator") &&
                        $("#" + e.user.split(" ").join("qw") + "indicator")
                            .parent()
                            .parent()
                            .css("background-image", "url(" + e.profile + ")");
                }),
                socket.on("videovoice", function (e) {
                    document.getElementById(e.user.split(" ").join("qw")) && $("#" + e.user.split(" ").join("qw")).css("filter", e.status);
                }),
                socket.on("reversecamera", function (e) {
                    document.getElementById(e.user.split(" ").join("qw")) && ((document.getElementById(e.user.split(" ").join("qw")).style.transform = e.style), e.screenshare ? $("#adduser").hide() : $("#adduser").show());
                });
        </script>
        <!-- Photo filter script -->
        <script id="photofilter">
            let filesrc,
                wo,
                c_w,
                c_h,
                col,
                image,
                cot,
                ho,
                canvas = document.getElementById("filter-canvas"),
                iscropped = !1,
                filtervalue = { brightness: 100, contrast: 100, saturation: 100, hue: 0, grayscale: 0, invert: 0, opacity: 100, blur: 0, sepia: 0 },
                ctx = canvas.getContext("2d");
            function filterimgupload(e) {
                (image = new Image()),
                    $(".activefilter").attr("class", ""),
                    $("#brightness-filter").attr("class", "activefilter"),
                    $("#filter-name").text("brightness(100%)"),
                    $("#camrange").val(50),
                    $("#camrange-div").show(),
                    $("#cropper-grid").hide(),
                    $("#cropper-sieve").hide(),
                    $("#custom-div").hide(),
                    (image.src = URL.createObjectURL(e.files[0])),
                    (iscropped = !1),
                    (filesrc = image.src),
                    (filtervalue = { brightness: 100, contrast: 100, saturation: 100, hue: 0, grayscale: 0, invert: 0, opacity: 100, blur: 0, sepia: 0 }),
                    (canvas.width = $("#webcam").width()),
                    (canvas.height = 400),
                    (image.onload = function () {
                        let e = image.width,
                            t = image.height;
                        (400 * e) / t > canvas.width ? (canvas.height = (t * canvas.width) / e) : (canvas.width = (400 * e) / t), (wo = canvas.width), (ho = canvas.height), ctx.drawImage(image, 0, 0, canvas.width, canvas.height);
                    }),
                    $("#canvas-cropper").css("width", canvas.width + "px"),
                    $("#canvas-cropper").css("height", canvas.height + "px"),
                    $("#cropper-sieve").css("width", canvas.width + "px"),
                    $("#cropper-sieve").css("height", canvas.height + "px"),
                    $("#cropper-sieve").click();
            }
            function decode(e, t) {
                switch (t) {
                    case "brightness":
                    case "contrast":
                    case "saturation":
                        return $("#filter-name").text(t + "(" + filtervalue[t] + "%)"), e - 50;
                    case "hue":
                        return $("#filter-name").text(t + "(" + filtervalue[t] + "deg)"), e + 100;
                    case "sepia":
                    case "grayscale":
                    case "opacity":
                    case "invert":
                        return $("#filter-name").text(t + "(" + filtervalue[t] + "%)"), 2 * e;
                    case "blur":
                        return $("#filter-name").text(t + "(" + filtervalue[t] + "px)"), 50 * e;
                }
            }
            function adjustHead(e) {
                cb;
                let t = document.getElementById("expcanvas"),
                    a = t.getContext("2d"),
                    r = [];
                r[0] = r[1] = r[2] = r[3] = 0;
                let i = document.getElementById("spinnerbg");
                (i.src = e),
                    (i.onload = function () {
                        (t.width = i.naturalWidth), (t.height = i.naturalHeight), a.drawImage(i, 0, 0);
                        var e = a.getImageData(0, 0, t.width, t.height);
                        for (i = 0; i < e.data.length; i += 4) (r[0] += (4 * e.data[i]) / e.data.length), (r[1] += (4 * e.data[i + 1]) / e.data.length), (r[2] += (4 * e.data[i + 2]) / e.data.length), (r[3] = 255);
                        r[0] > 240 && r[1] > 240 && r[2] > 240 && (r[0] = r[1] = r[2] = 0), $("#head").css("background-color", "rgba(" + r.join(",") + ")");
                    });
            }
            function drawim() {
                if (iscropped) {
                    (ctx.filter =
                        "brightness(" +
                        filtervalue.brightness / 100 +
                        ") contrast(" +
                        filtervalue.contrast / 100 +
                        ") saturate(" +
                        filtervalue.saturation / 100 +
                        ") hue-rotate(" +
                        filtervalue.hue +
                        "deg) grayscale(" +
                        filtervalue.grayscale / 100 +
                        ") invert(" +
                        filtervalue.invert / 100 +
                        ") opacity(" +
                        filtervalue.opacity / 100 +
                        ") blur(" +
                        filtervalue.blur +
                        "px) sepia(" +
                        filtervalue.sepia / 100 +
                        ")"),
                        ctx.drawImage(image, 0, 0, canvas.width, canvas.height);
                    let e = ctx.getImageData(col, cot, c_w, c_h);
                    ctx.clearRect(0, 0, canvas.width, canvas.height), (canvas.width = c_w), (canvas.height = c_h), ctx.putImageData(e, 0, 0);
                } else
                    (ctx.filter =
                        "brightness(" +
                        filtervalue.brightness / 100 +
                        ") contrast(" +
                        filtervalue.contrast / 100 +
                        ") saturate(" +
                        filtervalue.saturation / 100 +
                        ") hue-rotate(" +
                        filtervalue.hue +
                        "deg) grayscale(" +
                        filtervalue.grayscale / 100 +
                        ") invert(" +
                        filtervalue.invert / 100 +
                        ") opacity(" +
                        filtervalue.opacity / 100 +
                        ") blur(" +
                        filtervalue.blur +
                        "px) sepia(" +
                        filtervalue.sepia / 100 +
                        ")"),
                        ctx.drawImage(image, 0, 0, canvas.width, canvas.height);
            }
            $("#custom-div-flip").click(function () {
                ctx.clearRect(0, 0, canvas.width, canvas.height),
                    ctx.save(),
                    ctx.translate(canvas.width / 2, canvas.height / 2),
                    ctx.rotate(Math.PI / 2),
                    ctx.drawImage(image, -canvas.width / 2, -canvas.height / 2, canvas.width, canvas.height),
                    ctx.restore();
            }),
                $("#filteroption div").click(function () {
                    $(".activefilter").attr("class", ""), $(this).attr("class", "activefilter");
                    let e = this.id.split("-filter")[0];
                    switch (e) {
                        case "crop":
                            $("#camrange-div").hide(),
                                $("#custom-div").hide(),
                                ctx.clearRect(0, 0, canvas.width, canvas.height),
                                (canvas.width = wo),
                                (canvas.height = ho),
                                (ctx.filter =
                                    "brightness(" +
                                    filtervalue.brightness / 100 +
                                    ") contrast(" +
                                    filtervalue.contrast / 100 +
                                    ") saturate(" +
                                    filtervalue.saturation / 100 +
                                    ") hue-rotate(" +
                                    filtervalue.hue +
                                    "deg) grayscale(" +
                                    filtervalue.grayscale / 100 +
                                    ") invert(" +
                                    filtervalue.invert / 100 +
                                    ") opacity(" +
                                    filtervalue.opacity / 100 +
                                    ") blur(" +
                                    filtervalue.blur +
                                    "px) sepia(" +
                                    filtervalue.sepia / 100 +
                                    ")"),
                                ctx.drawImage(image, 0, 0, wo, ho),
                                $("#cropper-grid").css("width", "80px"),
                                $("#cropper-tools").css("display", "flex"),
                                $("#cropper-grid").css("height", "60px"),
                                $("#cropper-grid").css("left", $("#filter-canvas").offset().left - 1 + ($("#webcam").width() - 80) / 2 + "px"),
                                $("#cropper-grid").css("top", 48 + $("#filter-canvas").offset().top + "px"),
                                $("#cropper-grid").css("max-width", $("#filter-canvas").width() + $("#filter-canvas").offset().left - Number($("#cropper-grid").css("left").split("px")[0]) - 1 + "px"),
                                $("#cropper-grid").css("max-height", $("#filter-canvas").height() + $("#filter-canvas").offset().top - Number($("#cropper-grid").css("top").split("px")[0]) - 2 + "px"),
                                $("#cropper-grid").css("position", "fixed"),
                                $("#cropper-grid").show(),
                                $("#canvas-cropper").css("width", canvas.width + "px"),
                                $("#canvas-cropper").css("height", canvas.height + "px"),
                                $("#canvas-cropper").css("left", ($("#webcam").width() - canvas.width) / 2 + "px"),
                                $("#cropper-sieve").css("position", "absolute"),
                                $("#cropper-sieve").css("width", canvas.width + "px"),
                                $("#cropper-sieve").css("height", canvas.height + "px"),
                                $("#cropper-sieve").css("top", 0),
                                $("#cropper-sieve").css("left", 0),
                                $("#cropper-sieve").show(),
                                localStorage.getItem("sieve-instruction") ||
                                    (Renderconfirm("Click anywhere on photo to move cropper and drag the bottom-right edge of cropper to make it cover bigger\ngot it?", !0), localStorage.setItem("sieve-instruction", !0));
                            break;
                        case "custom":
                            $("#camrange-div").hide(), $("#cropper-grid").hide(), $("#cropper-tools").hide(), $("#cropper-sieve").hide(), $("#custom-div").css("display", "flex");
                            break;
                        default:
                            $("#camrange-div").show(), $("#custom-div").hide(), $("#cropper-tools").hide(), $("#cropper-grid").hide(), $("#cropper-sieve").hide(), $("#camrange").val(decode(filtervalue[e], e));
                    }
                }),
                $("#done-cropping").click(function () {
                    (col = $("#cropper-grid").offset().left - $("#filter-canvas").offset().left), (cot = $("#cropper-grid").offset().top - $("#filter-canvas").offset().top);
                    let e = ctx.getImageData(
                        -$("#filter-canvas").offset().left + $("#cropper-grid").offset().left,
                        $("#cropper-grid").offset().top - $("#filter-canvas").offset().top,
                        $("#cropper-grid").width(),
                        $("#cropper-grid").height()
                    );
                    ctx.clearRect(0, 0, canvas.width, canvas.height),
                        (canvas.width = c_w = $("#cropper-grid").width()),
                        (canvas.height = c_h = $("#cropper-grid").height()),
                        console.log(-$("#filter-canvas").offset().left + $("#cropper-grid").offset().left, "col->", col),
                        (ctx.filter =
                            "brightness(" +
                            filtervalue.brightness / 100 +
                            ") contrast(" +
                            filtervalue.contrast / 100 +
                            ") saturate(" +
                            filtervalue.saturation / 100 +
                            ") hue-rotate(" +
                            filtervalue.hue +
                            "deg) grayscale(" +
                            filtervalue.grayscale / 100 +
                            ") invert(" +
                            filtervalue.invert / 100 +
                            ") opacity(" +
                            filtervalue.opacity / 100 +
                            ") blur(" +
                            filtervalue.blur +
                            "px) sepia(" +
                            filtervalue.sepia / 100 +
                            ")"),
                        (iscropped = !0),
                        ctx.putImageData(e, 0, 0),
                        $("#brightness-filter").click();
                }),
                document.getElementById("cropper-sieve").addEventListener("click", function (e) {
                    $("#canvas-cropper").css("width", canvas.width + "px"),
                        $("#canvas-cropper").css("height", canvas.height + "px"),
                        $("#canvas-cropper").css("left", ($("#webcam").width() - $(this).width()) / 2 + "px"),
                        $("#cropper-sieve").css("width", canvas.width + "px"),
                        $("#cropper-sieve").css("height", canvas.height + "px"),
                        $("#cropper-sieve").css("position", "absolute"),
                        $("#cropper-sieve").css("top", 0),
                        $("#cropper-sieve").css("left", 0);
                    let t = e.clientX,
                        a = e.clientY;
                    $("#cropper-grid").css("position", "fixed"),
                        $("#cropper-grid").css("left", (t >= $("#filter-canvas").offset().left ? t : $("#filter-canvas").offset().left - 1) + "px"),
                        $("#cropper-grid").css("top", (a >= $("#filter-canvas").offset().top ? a : $("#filter-canvas").offset().top - 4) + "px"),
                        $("#cropper-grid").css("max-width", $("#filter-canvas").width() + $("#filter-canvas").offset().left - Number($("#cropper-grid").css("left").split("px")[0]) - 1 + "px"),
                        $("#cropper-grid").css("max-height", $("#filter-canvas").height() + $("#filter-canvas").offset().top - Number($("#cropper-grid").css("top").split("px")[0]) - 4 + "px");
                }),
                $("#send-filter-img").click(function () {
                    if (confirm("Are u sure to share?")) {
                        let e = generateid();
                        socket.emit("msg", {
                            refer: { text: $("#replytext").text(), target: $("#replytextparent").attr("class"), name: $("#replytexthead").text() },
                            message: "<img src='" + canvas.toDataURL("image/png") + "' style='background:black'>",
                            id: e,
                            auth: userdata.auth,
                            user: userdata.nativeUser,
                            color: color,
                            roomid: userdata.nativeRoom,
                            profile: localStorage.getItem("profileinfo"),
                        }),
                            postFile({
                                refer: { text: $("#replytext").text(), target: $("#replytextparent").attr("class"), name: $("#replytexthead").text() },
                                message: "<img src='" + canvas.toDataURL("image/png") + "' style='background:black'>",
                                id: e,
                                user: userdata.nativeUser,
                                color: color,
                                roomid: userdata.nativeRoom,
                                profile: localStorage.getItem("profileinfo"),
                            }),
                            ctx.clearRect(0, 0, canvas.width, canvas.height),
                            $("#webcam").hide();
                    }
                }),
                $("#cancel-filter-img").click(function () {
                    $("#webcam").hide();
                }),
                $("#camrange").change(function () {
                    let e = document.querySelectorAll(".activefilter")[0].id;
                    switch (((canvas.width = wo), (canvas.height = ho), ctx.clearRect(0, 0, canvas.width, canvas.height), e)) {
                        case "brightness-filter":
                            (filtervalue.brightness = parseInt(this.value) + 50), $("#filter-name").text("brightness(" + filtervalue.brightness + "%)"), drawim();
                            break;
                        case "contrast-filter":
                            (filtervalue.contrast = parseInt(this.value) + 50), $("#filter-name").text("contrast(" + filtervalue.contrast + "%)"), drawim();
                            break;
                        case "saturation-filter":
                            (filtervalue.saturation = parseInt(this.value) + 50), $("#filter-name").text("saturate(" + filtervalue.saturation + "%)"), drawim();
                            break;
                        case "hue-filter":
                            (filtervalue.hue = parseInt(this.value) - 100), $("#filter-name").text("hue(" + filtervalue.hue + "deg)"), drawim();
                            break;
                        case "sepia-filter":
                            (filtervalue.sepia = parseInt(this.value) / 2), $("#filter-name").text("sepia(" + filtervalue.sepia + "%)"), drawim();
                            break;
                        case "grayscale-filter":
                            (filtervalue.grayscale = parseInt(this.value) / 2), $("#filter-name").text("grayscale(" + filtervalue.grayscale + "%)"), drawim();
                            break;
                        case "invert-filter":
                            (filtervalue.invert = parseInt(this.value) / 2), $("#filter-name").text("invert(" + filtervalue.invert + "%)"), drawim();
                            break;
                        case "opacity-filter":
                            (filtervalue.opacity = parseInt(this.value) / 2), $("#filter-name").text("opacity(" + filtervalue.opacity + "%)"), drawim();
                            break;
                        case "blur-filter":
                            (filtervalue.blur = parseInt(this.value) / 50), $("#filter-name").text("blur(" + filtervalue.blur + "px)"), drawim();
                    }
                });
        </script>
        <script>
            socket.on("refreshit", function () {
                $(window).unbind("beforeunload");
                document.body.onbeforeunload = null;
                window.location.reload();
            });
            setTimeout(function () {
                if (!localStorage.getItem("updated")) {
                    localStorage.setItem("updated", true);
                    window.textcolor = "#ffff00";
                    window.textfont = "chattenger";
                    window.colors = "#007878";
                }
                document.getElementById("2").value = window.textcolor;
                document.getElementById("3").value = localStorage.getItem("textsize") ? localStorage.getItem("textsize").split("em")[0] : "1.2";
                document.getElementById("1").value = window.colors;
                document.getElementById("4").value = window.textfont;
            }, 5000);
            function managevdo(id) {
                if (!document.getElementById(id).className.includes("large")) $("#" + id).remove();
                else {
                    document.getElementsByClassName("large")[0].style.filter = $("#selfview").css("filter");
                    document.getElementById(id).srcObject = window.stream;
                    document.getElementsByClassName("large")[0].style.transform = $("#selfview").css("transform");
                    document.getElementById("selfview").id = id;
                    document.getElementsByClassName("large")[0].id = "selfview";
                    document.getElementById("selfview").muted = !0;
                    $("#" + id).remove();
                }
            }
        </script>

        <!--
         code taken from internet
         and modified accordingly
         -->

        <script>
            function setMediaBitrates(sdp, i) {
                return setMediaBitrate(setMediaBitrate(sdp, "video", 200 * i), "audio", 50 * i);
            }
            function setMediaBitrate(sdp, media, bitrate) {
                var lines = sdp.split("\n");
                var line = -1;
                for (var i = 0; i < lines.length; i++) {
                    if (lines[i].indexOf("m=" + media) === 0) {
                        line = i;
                        break;
                    }
                }
                if (line === -1) {
                    return sdp;
                }
                line++;
                // Skip i and c lines
                while (lines[line].indexOf("i=") === 0 || lines[line].indexOf("c=") === 0) {
                    line++;
                }

                // If we're on a b line, replace it
                if (lines[line].indexOf("b") === 0) {
                    if (!navigator.userAgent.includes("Firefox")) lines[line] = "b=AS:" + bitrate;
                    else lines[line] = "b=TIAS:" + bitrate;
                    return lines.join("\n");
                }

                // Add a new b line
                console.log("Adding new b line before line", line);
                var newLines = lines.slice(0, line);
                if (!navigator.userAgent.includes("Firefox")) newLines.push("b=AS:" + bitrate);
                else newLines.push("b=TIAS:" + bitrate);
                newLines = newLines.concat(lines.slice(line, lines.length));
                return newLines.join("\n");
            }
        </script>
    </body>
</html>
